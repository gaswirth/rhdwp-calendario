(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{134:function(e,t,n){},135:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(3),s=n.n(a),r=n(28),o=n.n(r),i=(n(67),n(6));function u(e){var t=e.name,n=e.label,a=e.inlineLabel,s=e.children;return Object(c.jsxs)("div",{className:"sidebarInput fieldGroup fieldGroup__".concat(t," ").concat(a?"inlineLabel":""),children:[n?Object(c.jsx)("label",{htmlFor:t,children:n}):null,s]})}var d=n(140),l=n(10),j=n(29),b=n(18),p=n(141),O=n(5),h=n(68),f=Object(a.createContext)({});function v(e,t){switch(t.type){case"UPDATE_OPTION":return Object(O.a)(Object(O.a)({},e),{},{viewMode:t.viewMode?t.viewMode:e.viewMode,monthCount:t.monthCount?t.monthCount:e.monthCount});case"SET_RANGE":return Object(O.a)(Object(O.a)({},e),{},{viewRange:{start:t.start,end:t.end}});case"NEXT_MONTH":return Object(O.a)(Object(O.a)({},e),{},{viewRange:{start:Object(j.default)(e.viewRange.start,1),end:Object(j.default)(e.viewRange.end,1)}});case"PREV_MONTH":return Object(O.a)(Object(O.a)({},e),{},{viewRange:{start:Object(h.default)(e.viewRange.start,1),end:Object(h.default)(e.viewRange.end,1)}});default:return e}}var m={viewMode:"",monthCount:1,viewRange:{start:null,end:null}};function x(){var e=Object(a.useContext)(f),t=e.viewOptions,n=t.viewMode,s=t.monthCount,r=t.viewRange,o=e.viewOptionsDispatch,i=function(e){o({type:"UPDATE_OPTION",viewMode:e.target.value})};return Object(c.jsxs)("div",{className:"viewOptions",children:[Object(c.jsx)("button",{onClick:function(){var e=Object(d.a)();o({type:"SET_RANGE",start:"calendar"===n?Object(l.default)(e):e,end:Object(j.default)(e,s)})},disabled:Object(b.default)(r.start)===Object(d.a)()||Object(p.a)(r.start,Object(d.a)()),children:"Jump to Today"}),Object(c.jsxs)(u,{name:"viewMode",children:[Object(c.jsx)("button",{onClick:i,className:"calendar"===n?"active ":"inactive",value:"calendar",children:"Calendar"}),Object(c.jsx)("button",{name:"viewMode",onClick:i,className:"list"===n?"active ":"inactive",value:"list",children:"List"})]}),Object(c.jsx)(u,{name:"monthCount",label:"Months",inlineLabel:!0,children:Object(c.jsx)("input",{type:"number",min:1,value:s,onChange:function(e){o({type:"UPDATE_OPTION",monthCount:e.target.value})},className:"mini"})})]})}var g=n(137),_=n(11);function E(e){var t=e.title,n=e.className,a=e.children;return Object(c.jsxs)("div",{className:"widget ".concat(n),children:[t?Object(c.jsx)("h3",{className:"widgetTitle",children:t}):null,a]})}var N,w,D;N=window.rhdReactPlugin.nonce,w=window.rhdReactPlugin.restBase,D=window.rhdReactPlugin.postStatuses;var y="d",C="yyyy-MM-dd",T="EEEE",P="MMM",S="EEEE,  MMMM dd, yyyy",R="MMMM dd, yyyy";function k(e,t){if(e.length>0)for(var n in e)e[n]===t[n]&&(e=Object(_.omit)(e,n));return e}var U=function(e,t,n){return Object(c.jsx)(E,{title:e,className:"widget__".concat(t),children:n})};function M(e){var t=e.start,n=e.end,s=Object(a.useContext)(f).viewOptionsDispatch;return Object(c.jsxs)("div",{className:"calendarListHeader row flex-middle",children:[Object(c.jsx)("div",{className:"col col__start",children:Object(c.jsx)("button",{className:"icon dateChevron",onClick:function(e){e.preventDefault(),s({type:"PREV_MONTH"})},children:"chevron_left"})}),Object(c.jsxs)("div",{className:"col col__center",children:[Object(c.jsx)("h3",{className:"viewTitle",children:"Scheduled Posts"}),Object(c.jsx)("p",{className:"viewRange",children:t&&n?"".concat(Object(g.default)(t,R)," \u2014 ").concat(Object(g.default)(n,R)):null})]}),Object(c.jsx)("div",{className:"col col__end",children:Object(c.jsx)("button",{className:"icon dateChevron",onClick:function(e){e.preventDefault(),s({type:"NEXT_MONTH"})},children:"chevron_right"})})]})}function L(){var e=Object(a.useContext)(f).viewOptions.viewRange;return Object(c.jsx)("header",{className:"calendario__header",children:Object(c.jsxs)("div",{className:"calendario__header__content",children:[Object(c.jsx)("div",{className:"left",children:Object(c.jsx)(M,{start:e.start,end:e.end})}),Object(c.jsx)("div",{className:"right",children:Object(c.jsx)(x,{})})]})})}var A=n(142),F=n(143);function H(e){e.className;var t=e.day,n=e.monthName,a=e.children,s=["day","col","cell"];return Object(A.a)(t)&&s.push("today"),Object(F.a)(t)&&!Object(A.a)(t)&&s.push("past"),Object(c.jsxs)("div",{className:s.join(" "),children:[n?Object(c.jsx)("span",{className:"month",children:n}):"",Object(c.jsx)("span",{className:"number",children:Object(g.default)(t,y)}),a]})}var G=n(9),I=n.n(G),J=n(15),V={updateNow:!1,trash:!1,params:{},unscheduled:!1};function W(e,t){switch(t.type){case"UPDATE":return{updateNow:!0,params:t.params,unscheduled:t.unscheduled};case"UPDATING":return Object(O.a)(Object(O.a)({},e),{},{updateNow:!1});case"TRASH":return{trash:!0,updateNow:!0,params:t.params};case"COMPLETE":return V;default:return e}}var B=n(21),X=Object(a.createContext)({}),Y={currentPost:{id:null,post_title:"",post_status:"",post_date:"",unscheduled:null},refetch:!1,dateRange:{start:"",end:""},unscheduled:[],scheduled:[],trashed:[]};function z(e,t){switch(t.type){case"SET_SCHEDULED":var n=t.posts;return n.forEach((function(e,t){n[t].post_date=new Date(e.post_date)})),Object(O.a)(Object(O.a)({},e),{},{dateRange:{start:t.start,end:t.end},scheduled:n});case"SET_UNSCHEDULED":var c=t.posts;return c.forEach((function(e,t){c[t].post_date=new Date(e.post_date)})),Object(O.a)(Object(O.a)({},e),{},{unscheduled:c});case"SET_TRASHED":var a=t.posts;return a.forEach((function(e,t){a[t].post_date=new Date(e.post_date)})),Object(O.a)(Object(O.a)({},e),{},{trashed:a});case"REFETCH":return Object(O.a)(Object(O.a)({},e),{},{refetch:!e.refetch});case"SET_CURRENTPOST":return Object(O.a)(Object(O.a)({},e),{},{currentPost:Object(O.a)(Object(O.a)({},t.post),{},{unscheduled:t.unscheduled})});case"NEW_POST":return Object(O.a)(Object(O.a)({},e),{},{currentPost:{id:0,post_date:t.post_date,unscheduled:t.unscheduled}});case"UPDATE_CURRENTPOST_FIELD":return Object(O.a)(Object(O.a)({},e),{},{currentPost:Object(O.a)(Object(O.a)({},e.currentPost),{},Object(B.a)({},t.field,t.value))});case"UNSET_CURRENTPOST":return Object(O.a)(Object(O.a)({},e),{},{currentPost:Y.currentPost});default:return e}}var q=n(19);function K(e){var t=e.post,n=e.className,s=e.unscheduled,r=t.id,o=t.edit_link,u=t.view_link,d=Object(a.useContext)(X).postsDispatch,l=Object(a.useReducer)(W,V),j=Object(i.a)(l,2),b=j[0],p=j[1];Object(a.useEffect)((function(){if(!0===b.updateNow&&"undefined"!==r){p({type:"UPDATING"});var e="".concat(w,"/");!0===b.trash?e+="trash/".concat(r):e+="update/".concat(r);var t={unscheduled:b.unscheduled};(function(){var n=Object(J.a)(I.a.mark((function n(){var c;return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return c=n.sent,n.next=6,c.json();case 6:p({type:"COMPLETE"}),d({type:"REFETCH"}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0.message);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(){return n.apply(this,arguments)}})()()}}),[r,d,b.trash,b.params,b.updateNow,b.unscheduled]);return Object(c.jsxs)("div",{className:"postLinks ".concat(n),children:[Object(c.jsx)("a",{className:"icon top left icon__view",href:u,target:"_blank",rel:"noreferrer",title:"View Post",children:"open_in_new"}),Object(c.jsx)("a",{className:"icon top right icon__edit",href:Object(q.decode)(o),target:"_blank",rel:"noreferrer",title:"Edit Post in a new tab",children:"mode_edit"}),s?Object(c.jsx)("button",{className:"icon icon__schedule bottom right",onClick:function(e){e.preventDefault(),p({type:"UPDATE",params:{},unscheduled:!1})},title:"Schedule this post",children:"event_available"}):Object(c.jsx)("button",{className:"icon icon__unschedule bottom right",onClick:function(e){e.preventDefault(),p({type:"UPDATE",params:{},unscheduled:!0})},title:"Unschedule this post",children:"drafts"}),Object(c.jsx)("button",{className:"icon icon__trash bottom left",onClick:function(){p({type:"TRASH",params:{id:r}})},title:"Trash this post",children:"delete_forever"})]})}var Q=Object(a.createContext)(null);function Z(e,t){switch(t.type){case"START":return{post:t.post,isDragging:!0,draggedFrom:t.draggedFrom>=0&&t.draggedFrom};case"DRAGGING_OVER_UNSCHEDULED":return Object(O.a)(Object(O.a)({},e),{},{draggedTo:t.draggedOver,overUnscheduled:!0});case"DRAGGING_OVER_SCHEDULED":return Object(O.a)(Object(O.a)({},e),{},{draggedTo:null,overUnscheduled:!1});case"END":return $;default:return e}}var $={post:{},isDragging:!1,draggedFrom:null,draggedTo:null,overUnscheduled:!1};function ee(e){var t=e.post,n=e.index,s=e.unscheduled,r=e.allowDrag,o=Object(a.useContext)(X),u=o.posts.currentPost,d=o.postsDispatch,l=Object(a.useContext)(Q),j=l.draggedPost,b=j.isDragging,p=j.draggedFrom,O=j.draggedTo,h=l.draggedPostDispatch,f=Object(a.useState)({}),v=Object(i.a)(f,2),m=v[0],x=v[1],g=Object(a.useState)(new Date),E=Object(i.a)(g,2),N=E[0],w=E[1],y=Object(a.useState)(!1),C=Object(i.a)(y,2),T=C[0],P=C[1];Object(a.useEffect)((function(){w(new Date(t.post_date))}),[t.post_date]),Object(a.useEffect)((function(){x({color:D[t.post_status].color,backgroundColor:D[t.post_status].backgroundColor})}),[t.post_status]);var S=function(e){var n=!!e.currentTarget.parentNode.classList.contains("unscheduledDrafts");h({type:"START",post:t,draggedFrom:!!n&&Number(e.currentTarget.dataset.index)})},R=function(){return h({type:"END"})},k=function(e){if(!e.target.classList.contains("icon")){var n=!(!e.target.classList.contains("unscheduledDrafts")&&!e.target.parentNode.classList.contains("unscheduledDrafts"));d({type:"SET_CURRENTPOST",post:t,unscheduled:n})}};return t?function(){var e=["post","post-id-".concat(t.id," status__").concat(t.post_status)];return b&&(O===Number(n)&&(e.push("dropArea"),!1===p?e.push("fromNowhere"):p<O?e.push("fromAbove"):p>O&&e.push("fromBelow")),p===Number(n)&&e.push("dragging")),Object(_.isEmpty)(u)||u.id!==t.id||e.push("currentPost"),Object(c.jsxs)("li",{id:t.id,className:e.join(" "),"data-index":n,draggable:!0===r||!Object(A.a)(N)&&!Object(F.a)(N),onDragStart:S,onDragEnd:R,onClick:k,onMouseEnter:function(){return P(!0)},onMouseLeave:function(){return P(!1)},children:[Object(c.jsx)(K,{className:T&&!b?"visible":"hidden",post:t,unscheduled:s}),Object(c.jsx)("p",{className:"postData",style:{backgroundColor:m.backgroundColor,color:m.color},children:Object(q.decode)(t.post_title,{scope:"strict"})})]})}():null}function te(e){var t=e.className;return Object(c.jsx)("div",{className:"loadingOverlay ".concat(t),children:Object(c.jsxs)("div",{className:"roller",children:[Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{})]})})}function ne(e){var t=e.posts,n=e.className,s=e.allowDrag,r=e.allowDrop,o=e.date,u=e.loadingState,d=Object(a.useContext)(X),l=d.posts.currentPost,j=d.postsDispatch,b=Object(a.useContext)(Q),p=b.draggedPost,h=p.post,f=p.draggedTo,v=p.draggedFrom,m=p.overUnscheduled,x=b.draggedPostDispatch,E=Object(a.useReducer)(W,V),D=Object(i.a)(E,2),y=D[0],T=D[1],P=Object(a.useState)(!1),S=Object(i.a)(P,2),R=S[0],U=S[1];Object(a.useEffect)((function(){if(void 0!==u&&null!==u)return U(u),function(){U(!1)}}),[u]),Object(a.useEffect)((function(){if(!0===y.updateNow&&"undefined"!==h.id){T({type:"UPDATING"});var e="".concat(w,"/update/").concat(h.id),t={params:k(y.params,h),unscheduled:y.unscheduled};if(null!==f&&(t.draggedTo=f),Object(_.isEmpty)(t))return{data:"Update not necessary.",error:!0};var n={"Content-Type":"application/json"};n["X-WP-Nonce"]=N,function(){var c=Object(J.a)(I.a.mark((function c(){var a;return I.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return U(!0),c.prev=1,c.next=4,fetch(e,{method:"POST",headers:n,body:JSON.stringify(t)});case 4:return a=c.sent,c.next=7,a.json();case 7:j({type:"REFETCH"}),x({type:"END"}),T({type:"COMPLETE"}),U(!1),c.next=17;break;case 13:c.prev=13,c.t0=c.catch(1),console.log(c.t0.message),U(!1);case 17:case"end":return c.stop()}}),c,null,[[1,13]])})));return function(){return c.apply(this,arguments)}}()()}}),[y,f,x,h,j]);var M=function(e){if(e.preventDefault(),!1!==s)if(e.currentTarget.classList.contains("unscheduledDrafts")){var t=Number(e.target.dataset.index),n=!1;if(v===t)return;if((n=!Number.isNaN(t)&&t)!==f){if(!1===n){var c=e.currentTarget.getBoundingClientRect(),a=e.clientY-c.top,r=e.currentTarget.childNodes,o=r.length;n=0===r.length||a<r[0].offsetTop?0:a>=r[o-1].offsetTop?o:o-1}x({type:"DRAGGING_OVER_UNSCHEDULED",draggedOver:n})}}else!0===m&&x({type:"DRAGGING_OVER_SCHEDULED"})},L=function(){!1!==r&&(T({type:"UPDATE",params:{post_date:!1===o?Object(g.default)(h.post_date,C):Object(g.default)(o,C)},unscheduled:m}),l.id===h.id&&j({type:"UPDATE_CURRENTPOST_FIELD",field:"post_date",value:o}))};return function(){var e={className:"postList ".concat(n),onDragOver:M};return!1!==r?e.onDrop=L:e.className+=" dropDisabled",Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(te,{className:R?"active":null}),Object(c.jsx)("ul",Object(O.a)(Object(O.a)({},e),{},{children:t.map((function(e,t){return Object(c.jsx)(ee,{post:e,index:t,unscheduled:!1===o,allowDrag:s},e.id)}))}))]})}()}function ce(e){var t=e.day,n=e.unscheduled,s=Object(a.useContext)(X).postsDispatch;return Object(c.jsx)("button",{className:"icon newPost",onClick:function(e){e.preventDefault(),s({type:"NEW_POST",post_date:t||new Date,unscheduled:n||!1})},children:"add_circle"})}var ae=n(41),se=function(e,t){var n=Object(a.useContext)(X).postsDispatch,c=Object(a.useState)(!1),s=Object(i.a)(c,2),r=s[0],o=s[1];return Object(a.useEffect)((function(){if(null!==e&&null!==t){var c=Object(g.default)(e,C),a=Object(g.default)(t,C),s="".concat(w,"/scheduled/").concat(c,"/").concat(a),r={};return r["X-WP-Nonce"]=N,function(){var e=Object(J.a)(I.a.mark((function e(){var t,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,e.next=4,fetch(s,{headers:r});case 4:return t=e.sent,e.next=7,t.json();case 7:c=e.sent,n({type:"SET_SCHEDULED",posts:c.posts,start:c.dateRange.start,end:c.dateRange.end}),o(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("REST error",e.t0.message),o(!1);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}()(),function(){o(!1)}}}),[e,t,n]),r};function re(e){var t=e.posts,n=e.date,a=e.allowDrag,s=e.allowDrop,r=e.title,o=e.loadingState,i=function(e,t){var n=[];return e&&e.forEach((function(e){Object(ae.default)(t,new Date(e.post_date))&&n.push(e)})),n}(t,n);return function(){var e={className:"dayPosts",date:n,posts:i,allowDrop:!0,loadingState:o};"undefined"!==a&&null!==a&&(e.allowDrag=a),e.allowDrop=!1!==s;var t=Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(ce,{day:n,unscheduled:!1}),Object(c.jsx)(ne,Object(O.a)({},e))]});return r?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h4",{className:"title",children:r}),t]}):t}()}var oe=n(74),ie=n(30),ue=n(144);function de(){var e=Object(a.useContext)(X),t=e.posts,n=t.scheduled,s=t.refetch,r=e.postsDispatch,o=Object(a.useContext)(f),i=o.viewOptions,u=i.monthCount,b=i.viewRange,p=o.viewOptionsDispatch;Object(a.useEffect)((function(){r({type:"REFETCH"})}),[r]),Object(a.useEffect)((function(){var e=Object(d.a)();p({type:"SET_RANGE",start:Object(l.default)(e),end:Object(oe.default)(Object(j.default)(e,u))})}),[s,u,p]),se(b.start,b.end);var O=Object(a.useCallback)((function(){for(var e=[],t=Object(l.default)(b.start),n=0;n<7;n++)e.push(Object(c.jsx)("div",{className:"col col__center",children:Object(g.default)(Object(ie.default)(t,n),T)},n));return Object(c.jsx)("div",{className:"days row",children:e})}),[b.start]),h=Object(a.useCallback)((function(){for(var e=[],t=[],a=b.start,s=!0;a<=b.end;){for(var r=0;r<7;r++){var o=Object(ue.a)(a)||s;t.push(Object(c.jsx)(H,{day:a,monthName:o?Object(g.default)(a,P):"",children:Object(c.jsx)(re,{date:a,posts:n,allowDrag:!0,renderEmpty:!0})},a)),s=!1,a=Object(ie.default)(a,1)}e.push(Object(c.jsx)("div",{className:"row",children:t},a)),t=[]}return Object(c.jsx)("div",{className:"body",children:e})}),[b.end,b.start,n]);return Object(c.jsx)("div",{className:"view__calendar",children:null!==b.start&&null!==b.end?Object(c.jsxs)("div",{className:"view__calendar__inner",children:[O(),h()]}):null})}var le=n(75);function je(){var e=Object(a.useContext)(X),t=e.posts,n=t.scheduled,s=t.refetch,r=e.postsDispatch,o=Object(a.useContext)(f),i=o.viewOptions,u=i.monthCount,l=i.viewRange,b=o.viewOptionsDispatch;Object(a.useEffect)((function(){r({type:"REFETCH"})}),[r]),Object(a.useEffect)((function(){var e=Object(d.a)();b({type:"SET_RANGE",start:e,end:Object(j.default)(e,u)})}),[s,u,b]),se(l.start,l.end);var p=function(){var e=[],t=l.start,a=["listDay"];if("undefined"!==l.end&&null!==l.end)for(;Object(le.default)(t)<=Object(le.default)(l.end);)Object(A.a)(t)&&a.push("today"),Object(F.a)(t)&&!Object(A.a)(t)&&a.push("past"),e.push(Object(c.jsx)("li",{className:a.join(" "),children:Object(c.jsx)(re,{date:t,posts:n,allowDrag:!0,title:Object(g.default)(t,S),newPostButton:!0})},t)),t=Object(ie.default)(t,1);return e};return Object(c.jsx)("div",{className:"view__list",children:null!==l.start&&null!==l.end?Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("div",{className:"view__list__days",children:Object(c.jsx)("ul",{children:p()})})}):null})}var be=n(59),pe=n.n(be),Oe=n(145),he=(n(76),{post:{},editMode:!1});function fe(e,t){switch(t.type){case"SET":return{post:t.post,editMode:!0};case"EDIT":var n=t.field,c=t.value;return"post_date"===n&&(c=new Date(c)),Object(O.a)(Object(O.a)({},e),{},{post:Object(O.a)(Object(O.a)({},e.post),{},Object(B.a)({},n,c))});case"DATE_CHANGE":return Object(O.a)(Object(O.a)({},e),{},{post:Object(O.a)(Object(O.a)({},e.post),{},{post_date:t.newDate})});case"CLEAR":return he;default:return{state:e}}}function ve(){var e=Object(a.useContext)(X),t=e.posts.currentPost,n=e.postsDispatch,s=Object(a.useContext)(Q).draggedPostDispatch,r=Object(a.useReducer)(fe,he),o=Object(i.a)(r,2),d=o[0],l=o[1],j=Object(a.useReducer)(W,V),b=Object(i.a)(j,2),p=b[0],O=b[1],h=Object(a.useRef)(),f=Object(a.useState)(new Date),v=Object(i.a)(f,2),m=v[0],x=v[1],E=Object(a.useState)({}),N=Object(i.a)(E,2),y=N[0],T=N[1],P=Object(a.useState)(!1),S=Object(i.a)(P,2),R=S[0],U=S[1],M=d.post,L=d.editMode;Object(a.useEffect)((function(){return M.post_date&&"undefined"!==M.post_date&&x(new Date(M.post_date)),function(){x(new Date)}}),[M.post_date]),Object(a.useEffect)((function(){var e=[];!0===M.unscheduled?e.push("publish","future","pending"):Object(Oe.a)(m)?e.push("publish"):Object(F.a)(m)&&e.push("future");var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=D;if(e.length>0)for(var n in D)e.includes(n)&&(t=Object(_.omit)(t,n));return t}(e);T(t)}),[m,M.unscheduled]),Object(a.useEffect)((function(){if(!0===p.updateNow&&"undefined"!==t.id){O({type:"UPDATING"});var e="".concat(w,"/");!0===p.trash?e+="trash/".concat(t.id):0===t.id?e+="new":e+="update/".concat(t.id);var c={params:k(p.params,t),unscheduled:p.unscheduled};if(Object(_.isEmpty)(c.params))return{data:"Update not necessary.",error:!0};(function(){var t=Object(J.a)(I.a.mark((function t(){var a;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});case 3:return a=t.sent,t.next=6,a.json();case 6:s({type:"END"}),O({type:"COMPLETE"}),n({type:"SET_CURRENTPOST",post:M,unscheduled:M.unscheduled}),n({type:"REFETCH"}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0.message);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}})()()}}),[t,M,s,n,p.trash,p.params,p.updateNow,p.unscheduled]),Object(a.useEffect)((function(){(t.id>0||0===t.id)&&l({type:"SET",post:t})}),[t.id,t]),Object(a.useEffect)((function(){var e=function(e){h.current&&h.current.contains(e.target)||(l({type:"CLEAR"}),n({type:"UNSET_CURRENTPOST"}))};return Object(_.isEmpty)(t)?document.removeEventListener("mousedown",e):document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[t,n]);var H,G=function(e){l({type:"EDIT",field:e.target.name,value:e.target.value})};return L?Object(c.jsx)("div",{className:"editPost",children:Object(c.jsx)("div",{className:"editPost__container",children:Object(c.jsxs)("div",{ref:h,className:"editPost__editor",children:[Object(c.jsxs)("h3",{className:"title",children:[0===M.id?"New":"Edit"," Post"]}),Object(c.jsxs)("form",{className:"editPost__editor__form",onSubmit:function(e){e.preventDefault(),O({type:"UPDATE",params:{post_title:M.post_title,post_date:Object(g.default)(new Date(M.post_date),C),post_status:M.post_status,post_excerpt:M.post_excerpt},unscheduled:M.unscheduled}),l({type:"CLEAR"})},children:[Object(c.jsx)(u,{name:"post_title",label:"Title",children:Object(c.jsx)("input",{name:"post_title",value:Object(q.decode)(M.post_title,{scope:"strict"}),onChange:G})}),Object(c.jsxs)(u,{name:"date",children:[Object(c.jsxs)("div",{className:"fieldGroup__field post_date ".concat(!0===M.unscheduled?"inactive":"active"),children:[Object(c.jsx)("label",{htmlFor:"post_date",children:"Post Date"}),Object(c.jsx)(pe.a,{closeOnScroll:function(e){return e.target===document},selected:m,onChange:function(e){l({type:"EDIT",field:"post_date",value:e})},disabled:!(!t.post_date||!Object(A.a)(t.post_date)&&!Object(F.a)(t.post_date)||"publish"!==t.post_status)})]}),Object(c.jsxs)("div",{className:"fieldGroup__field unscheduled",children:[Object(c.jsx)("input",{type:"checkbox",name:"unscheduled",checked:M.unscheduled,onChange:function(e){l({type:"EDIT",field:e.target.name,value:!M[e.target.name]})}}),Object(c.jsx)("label",{htmlFor:"unscheduled",children:"Unscheduled"})]})]}),Object(c.jsx)(u,{name:"post_status",label:"Status",children:Object(c.jsx)("select",{name:"post_status",onChange:G,value:M.post_status,children:(H=y,Object.keys(H).map((function(e){return Object(c.jsx)("option",{value:e,children:H[e].name},e)})))})}),Object(c.jsx)(u,{name:"taxonomies",label:"Categories & Tags",children:Object(c.jsx)("p",{children:"Coming soon"})}),Object(c.jsx)(u,{name:"post_excerpt",label:"Excerpt",children:Object(c.jsx)("textarea",{name:"post_excerpt",onChange:G,rows:4,value:Object(q.decode)(M.post_excerpt,{scope:"strict"})})}),Object(c.jsx)("div",{className:"post_thumb",children:M.image?Object(c.jsxs)("div",{children:[Object(c.jsx)("span",{children:"Featured Image"}),Object(c.jsx)("a",{href:Object(q.decode)(M.edit_link),target:"_blank",rel:"noreferrer",children:Object(c.jsx)("img",{src:M.image,alt:"".concat(M.post_title)})})]}):null}),Object(c.jsx)("div",{className:"editPost__buttons",children:!0===R?Object(c.jsxs)("div",{className:"editPost__buttons__trash confirm",children:[Object(c.jsx)("p",{style:{fontWeight:"bold"},children:"Are you sure you want to Trash this post?"}),Object(c.jsx)("input",{type:"button",onClick:function(){O({type:"TRASH",params:{id:M.id}}),l({type:"CLEAR"}),U(!1)},value:"Yes",autoFocus:!0}),Object(c.jsx)("input",{type:"button",onClick:function(){return U(!1)},value:"No"})]}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("input",{type:"submit",className:"editPost__buttons__save",value:0===M.id?"Save":"Update"}),Object(c.jsx)("input",{type:"button",className:"editPost__buttons__cancel",onClick:function(){return l({type:"CLEAR"})},value:"Cancel"}),Object(c.jsx)("input",{type:"button",className:"editPost__buttons__trash",onClick:function(){return U(!0)},value:"Delete"})]})})]})]})})}):null}function me(){var e=Object(a.useContext)(f).viewOptions.viewMode;return Object(c.jsxs)("main",{className:"calendario__main",children:[Object(c.jsx)("div",{className:"view",children:"calendar"===e?Object(c.jsx)(de,{}):Object(c.jsx)(je,{})}),Object(c.jsx)(ve,{})]})}function xe(){var e=Object(a.useContext)(X),t=e.posts.unscheduled,n=e.postsDispatch;Object(a.useEffect)((function(){n({type:"REFETCH"})}),[n]);var s=function(){var e=Object(a.useContext)(X),t=e.posts.refetch,n=e.postsDispatch,c=Object(a.useState)(!1),s=Object(i.a)(c,2),r=s[0],o=s[1];return Object(a.useEffect)((function(){var e="".concat(w,"/unscheduled"),t={};return t["X-WP-Nonce"]=N,function(){var c=Object(J.a)(I.a.mark((function c(){var a,s;return I.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return o(!0),c.prev=1,c.next=4,fetch(e,{headers:t});case 4:return a=c.sent,c.next=7,a.json();case 7:s=c.sent,n({type:"SET_UNSCHEDULED",posts:s.posts,unscheduled:!0}),o(!1),c.next=16;break;case 12:c.prev=12,c.t0=c.catch(1),console.log("REST error",c.t0.message),o(!1);case 16:case"end":return c.stop()}}),c,null,[[1,12]])})));return function(){return c.apply(this,arguments)}}()(),function(){o(!1)}}),[n,t]),r}();return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(ne,{className:"unscheduledDrafts",date:!1,posts:t,allowDrag:!0,loadingState:s}),Object(c.jsx)(ce,{unscheduled:!0})]})}function ge(){var e=Object(a.useContext)(X),t=e.posts.trashed,n=e.postsDispatch;Object(a.useEffect)((function(){n({type:"REFETCH"})}),[n]);var s=function(){var e=Object(a.useContext)(X),t=e.posts.refetch,n=e.postsDispatch,c=Object(a.useState)(!1),s=Object(i.a)(c,2),r=s[0],o=s[1];return Object(a.useEffect)((function(){var e="".concat(w,"/trashed"),t={};return t["X-WP-Nonce"]=N,function(){var c=Object(J.a)(I.a.mark((function c(){var a,s;return I.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return o(!0),c.prev=1,c.next=4,fetch(e,{headers:t});case 4:return a=c.sent,c.next=7,a.json();case 7:s=c.sent,n({type:"SET_UNSCHEDULED",posts:s.posts,unscheduled:!0}),o(!1),c.next=16;break;case 12:c.prev=12,c.t0=c.catch(1),console.log("REST error",c.t0.message),o(!1);case 16:case"end":return c.stop()}}),c,null,[[1,12]])})));return function(){return c.apply(this,arguments)}}()(),function(){o(!1)}}),[n,t]),r}();return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(ne,{className:"trashedPosts",date:!1,posts:t,allowDrag:!0,loadingState:s}),Object(c.jsx)(ce,{unscheduled:!0})]})}function _e(){var e=Object.keys(D);return Object(c.jsxs)("div",{className:"statusFilters",children:[Object(c.jsx)("p",{style:{fontSize:"0.8em"},children:"You'll be able to click me one day..."}),Object(c.jsx)("ul",{className:"filters",children:e.map((function(e,t){var n=D[e],a=n.color,s=n.backgroundColor,r=n.name;return Object(c.jsxs)("li",{className:"filterItem status__".concat(e),children:[Object(c.jsx)("span",{className:"dot",style:{color:a,backgroundColor:s}}),Object(c.jsx)("span",{className:"name",children:r})]},t)}))})]})}function Ee(){var e=Object(a.useContext)(X).posts.trashed;return Object(a.useEffect)((function(){console.log(e)}),[e]),Object(c.jsx)("aside",{className:"calendario__sidebar",children:Object(c.jsxs)("div",{className:"calendario__sidebar__inner",children:[U("Unscheduled Drafts","unscheduledDrafts",Object(c.jsx)(xe,{})),Object(_.isEmpty)(e)?null:Object(c.jsx)(ge,{}),U("","viewOptions noBorder",Object(c.jsx)(_e,{})),U("Calendario II: The Datening","dev",Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("ul",{style:{marginLeft:0,paddingLeft:"24px",listStylePosition:"outside"},children:[Object(c.jsx)("li",{children:Object(c.jsx)("a",{href:"https://github.com/gaswirth/rhdwp-calendario#readme",target:"_blank",rel:"noreferrer",children:"TODO/Readme"})}),Object(c.jsx)("li",{children:Object(c.jsx)("a",{href:"https://github.com/gaswirth/rhdwp-calendario/issues",target:"_blank",rel:"noreferrer",children:"Report a bug/issue"})}),Object(c.jsxs)("li",{children:["GitHub:"," ",Object(c.jsx)("a",{href:"https://github.com/gaswirth/rhdwp-calendario",target:"_blank",rel:"noreferrer",children:"gaswirth/rhdwp-calendario"})]})]}),Object(c.jsx)("p",{style:{fontSize:"0.7em"},children:Object(c.jsx)("a",{href:"https://roundhouse-designs.com",target:"_blank",rel:"noreferrer",children:"Roundhouse Designs"})})]}))]})})}n(134);function Ne(){var e=Object(a.useReducer)(z,Y),t=Object(i.a)(e,2),n=t[0],s=t[1],r=Object(a.useReducer)(Z,$),o=Object(i.a)(r,2),u=o[0],d=o[1],l=Object(a.useReducer)(v,m),j=Object(i.a)(l,2),b=j[0],p=j[1],O=function(e,t){var n=Object(a.useState)((function(){var n=window.localStorage.getItem(t);return null!==n?JSON.parse(n):e})),c=Object(i.a)(n,2),s=c[0],r=c[1];return Object(a.useEffect)((function(){window.localStorage.setItem(t,JSON.stringify(s))}),[t,s]),[s,r]}({viewMode:"calendar",monthCount:1},"viewOptions"),h=Object(i.a)(O,2),x=h[0],g=h[1];return Object(a.useEffect)((function(){p({type:"UPDATE_OPTION",monthCount:x.monthCount,viewMode:x.viewMode})}),[]),Object(a.useEffect)((function(){g({viewMode:b.viewMode,monthCount:b.monthCount})}),[g,b.viewMode,b.monthCount]),Object(c.jsx)("div",{className:"calendario",children:Object(c.jsx)(a.Profiler,{id:"Main",onRender:function(e,t,n,c,a,s,r){},children:Object(c.jsx)(f.Provider,{value:{viewOptions:b,viewOptionsDispatch:p},children:Object(c.jsxs)(X.Provider,{value:{posts:n,postsDispatch:s},children:[Object(c.jsx)(L,{}),Object(c.jsxs)(Q.Provider,{value:{draggedPost:u,draggedPostDispatch:d},children:[Object(c.jsx)(me,{}),Object(c.jsx)(Ee,{})]})]})})})})}var we,De=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,146)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),s(e),r(e)}))},ye=(window.rhdReactPlugin||{}).appSelector;(we=document.querySelector(ye))&&o.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(Ne,{})}),we),De()},67:function(e,t,n){}},[[135,1,2]]]);
//# sourceMappingURL=main.3a36c05b.chunk.js.map