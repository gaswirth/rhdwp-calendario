(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{169:function(e,t,a){},171:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a(1),c=a.n(n),r=a(21),o=a.n(r),i=(a(78),a(10)),d=a(14),u=a(3),l=a(173),j=a(174),b=a(69),O=a(175),p=a(12);function h(e){var t=e.title,a=e.className,n=e.children;return Object(s.jsxs)("div",{className:"widget ".concat(a),children:[t?Object(s.jsx)("h3",{className:"widgetTitle",children:t}):null,n]})}var f=Object(u.a)({},window.rhdReactPlugin),v="d",m="yyyy-MM-dd",x="yyyy-MM-dd h:mm aa",_="EEEE",g="MMM",y="EEEE,  MMMM dd, yyyy",E="MMMM dd, yyyy";function N(e,t){if(e.length>0){var a=function(a){Array.isArray(e[a])?e[a].length===t[a].length&&e[a].every((function(e,s){return e===t[a][s]})):e[a]===t[a]&&(e=Object(p.omit)(e,a))};for(var s in e)a(s)}return e}var w=function(e,t,a){return Object(s.jsx)(h,{title:e,className:"widget__".concat(t),children:a})},T=f.postStatuses,D=Object(n.createContext)({}),C={viewMode:"",viewRange:{start:null,end:null},statuses:function(){var e={};for(var t in T)e[t]=!0;return e}()};function R(e,t){switch(t.type){case"UPDATE":return Object(u.a)(Object(u.a)({},e),{},{viewMode:t.viewMode?t.viewMode:e.viewMode,viewRange:t.viewRange?t.viewRange:e.viewRange});case"SET_RANGE":var a="list"!==e.viewMode?{start:Object(l.a)(t.start),end:Object(j.a)(t.end)}:{start:t.start,end:t.end};return Object(u.a)(Object(u.a)({},e),{},{viewRange:{start:a.start,end:a.end}});case"SET_RANGE_START":return Object(u.a)(Object(u.a)({},e),{},{viewRange:Object(u.a)(Object(u.a)({},e.viewRange),{},{start:"list"!==e.viewMode?Object(l.a)(t.date):t.date})});case"SET_RANGE_END":return Object(u.a)(Object(u.a)({},e),{},{viewRange:Object(u.a)(Object(u.a)({},e.viewRange),{},{end:"list"!==e.viewMode?Object(j.a)(t.date):t.date})});case"NEXT_MONTH":return Object(u.a)(Object(u.a)({},e),{},{viewRange:{start:Object(b.a)(e.viewRange.start,1),end:Object(b.a)(e.viewRange.end,1)}});case"PREV_MONTH":return Object(u.a)(Object(u.a)({},e),{},{viewRange:{start:Object(O.a)(e.viewRange.start,1),end:Object(O.a)(e.viewRange.end,1)}});case"TOGGLE_STATUS":return Object(u.a)(Object(u.a)({},e),{},{statuses:Object(u.a)(Object(u.a)({},e.statuses),{},Object(d.a)({},t.status,!e.statuses[t.status]))});default:return e}}function S(){var e=Object(n.useContext)(D),t=e.viewOptions.viewMode,a=e.viewOptionsDispatch,c=function(e){a({type:"UPDATE",viewMode:e.target.value})};return Object(s.jsx)("div",{className:"viewOptions",children:Object(s.jsxs)("div",{className:"viewMode",children:[Object(s.jsx)("button",{onClick:c,className:"icon ".concat("calendar"===t?"active ":"inactive"),value:"calendar",title:"Calendar",children:"calendar_view_month"}),Object(s.jsx)("button",{name:"viewMode",onClick:c,className:"icon ".concat("list"===t?"active ":"inactive"),value:"list",title:"List",children:"view_list"})]})})}var P=a(24),k=a.n(P),M=a(176),U=a(177),A=a(178),L=a(179);function F(e){var t=e.handleTodayClick,a=Object(n.useContext)(D),c=a.viewOptions.viewRange,r=a.viewMode,o=a.viewOptionsDispatch,i=Object(M.a)(),d=Object(n.forwardRef)((function(e,t){var a=e.value,n=e.onClick;return Object(s.jsx)("button",{className:"viewRange__input",onClick:n,ref:t,children:a})}));Object(n.useEffect)((function(){c.start||c.end||o({type:"SET_RANGE",start:"calendar"===r?Object(U.a)(i):i,end:"calendar"===r?Object(A.a)():Object(L.a)(i,30)})}),[i,c.start,c.end,r,o]);return Object(s.jsxs)("div",{className:"calendarListHeader row flex-middle",children:[Object(s.jsx)("div",{className:"col col__start",children:Object(s.jsx)("button",{className:"icon dateChevron",onClick:function(e){e.preventDefault(),o({type:"PREV_MONTH"})},title:"Previous Month",children:"chevron_left"})}),Object(s.jsxs)("div",{className:"col col__center mainViewOptions",children:[Object(s.jsx)("div",{className:"toToday",children:Object(s.jsx)("button",{className:"icon today",onClick:t,title:"Jump to Today",children:"today"})}),Object(s.jsxs)("div",{className:"viewRange",children:[Object(s.jsx)(k.a,{dateFormat:E,selected:c.start,onChange:function(e){return o({type:"SET_RANGE_START",date:e})},customInput:Object(s.jsx)(d,{}),selectsStart:!0,startDate:c.start,endDate:c.end,closeOnScroll:function(e){return e.target===document}})," to ",Object(s.jsx)(k.a,{dateFormat:E,selected:c.end,onChange:function(e){return o({type:"SET_RANGE_END",date:e})},customInput:Object(s.jsx)(d,{}),selectsEnd:!0,startDate:c.start,endDate:c.end,minDate:c.start,monthsShown:2,closeOnScroll:function(e){return e.target===document}})]}),Object(s.jsx)(S,{})]}),Object(s.jsx)("div",{className:"col col__end",children:Object(s.jsx)("button",{className:"icon dateChevron",onClick:function(e){e.preventDefault(),o({type:"NEXT_MONTH"})},title:"Next Month",children:"chevron_right"})})]})}function G(e){var t=e.handleTodayClick;return Object(s.jsx)("header",{className:"calendario__header",children:Object(s.jsxs)("div",{className:"calendario__header__content",children:[Object(s.jsx)("div",{className:"left",children:Object(s.jsx)(F,{handleTodayClick:t})}),Object(s.jsx)("div",{className:"right",children:Object(s.jsx)("h1",{className:"calendario__title",children:"the editorial calendorial"})})]})})}var I=a(180),H=a(181),B=a(189),J=Object(n.forwardRef)((function(e,t){var a=e.day,n=e.monthName,c=e.children,r=["day","col","cell"];return Object(I.a)(a)&&r.push("today"),Object(H.a)(a)&&!Object(I.a)(a)&&r.push("past"),Object(s.jsxs)("div",{className:r.join(" "),ref:Object(I.a)(a)?t:null,children:[n?Object(s.jsx)("span",{className:"month",children:n}):"",Object(s.jsx)("span",{className:"number",children:Object(B.a)(a,v)}),c]})})),V=a(13),X=a.n(V),Y=a(15),W={updateNow:!1,trash:!1,params:{},unscheduled:!1};function q(e,t){switch(t.type){case"UPDATE":return{updateNow:!0,params:t.params,unscheduled:t.unscheduled};case"UPDATING":return Object(u.a)(Object(u.a)({},e),{},{updateNow:!1});case"TRASH":return{trash:!0,updateNow:!0,params:t.params};case"COMPLETE":return W;default:return e}}var z=Object(n.createContext)({}),K={currentPost:{id:null,post_title:"",post_status:"",post_date:"",unscheduled:null},refetch:!1,dateRange:{start:"",end:""},unscheduled:[],scheduled:[],trashed:[],taxonomies:{},locale:""};function Q(e,t){switch(t.type){case"SET_SCHEDULED":var a=t.posts;return a.forEach((function(e,t){a[t].post_date=new Date(e.post_date)})),Object(u.a)(Object(u.a)({},e),{},{dateRange:{start:t.start,end:t.end},scheduled:a});case"SET_UNSCHEDULED":var s=t.posts;return s.forEach((function(e,t){s[t].post_date=new Date(e.post_date)})),Object(u.a)(Object(u.a)({},e),{},{unscheduled:s});case"SET_TAXONOMY_TERMS":return Object(u.a)(Object(u.a)({},e),{},{taxonomies:Object(u.a)(Object(u.a)({},e.taxonomies),{},Object(d.a)({},t.name,{taxonomy:t.taxonomy,terms:t.terms}))});case"SET_CURRENTPOST":return Object(u.a)(Object(u.a)({},e),{},{currentPost:Object(u.a)(Object(u.a)({},t.post),{},{unscheduled:t.unscheduled})});case"REFETCH":return Object(u.a)(Object(u.a)({},e),{},{refetch:!e.refetch});case"NEW_POST":return Object(u.a)(Object(u.a)({},e),{},{currentPost:{id:0,post_date:t.post_date,unscheduled:t.unscheduled,taxonomies:{}}});case"UPDATE_CURRENTPOST_FIELD":return Object(u.a)(Object(u.a)({},e),{},{currentPost:Object(u.a)(Object(u.a)({},e.currentPost),{},Object(d.a)({},t.field,t.value))});case"UNSET_CURRENTPOST":return Object(u.a)(Object(u.a)({},e),{},{currentPost:K.currentPost});default:return e}}var Z=a(16);function $(e){var t=e.post,a=e.className,c=e.unscheduled,r=f.routeBase,o=t.id,d=t.edit_link,u=t.view_link,l=Object(n.useContext)(z).postsDispatch,j=Object(n.useReducer)(q,W),b=Object(i.a)(j,2),O=b[0],p=b[1];Object(n.useEffect)((function(){if(!0===O.updateNow&&"undefined"!==o){p({type:"UPDATING"});var e="".concat(r,"/");!0===O.trash?e+="trash/".concat(o):e+="update/".concat(o);var t={unscheduled:O.unscheduled};(function(){var a=Object(Y.a)(X.a.mark((function a(){var s;return X.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return s=a.sent,a.next=6,s.json();case 6:p({type:"COMPLETE"}),l({type:"REFETCH"}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0.message);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(){return a.apply(this,arguments)}})()()}}),[o,r,l,O.trash,O.params,O.updateNow,O.unscheduled]);return Object(s.jsxs)("div",{className:"postLinks ".concat(a),children:[Object(s.jsx)("button",{className:"icon top left icon__view",onClick:function(){return window.open(u,"_blank")},target:"_blank",rel:"noreferrer",title:"View Post",children:"open_in_new"}),Object(s.jsx)("button",{className:"icon top right icon__edit",onClick:function(){return window.open(Object(Z.decode)(d),"_blank")},target:"_blank",rel:"noreferrer",title:"Edit Post in a new tab",children:"mode_edit"}),c?Object(s.jsx)("button",{className:"icon icon__schedule bottom right",onClick:function(e){e.preventDefault(),p({type:"UPDATE",params:{},unscheduled:!1})},title:"Schedule this post",children:"event_available"}):Object(s.jsx)("button",{className:"icon icon__unschedule bottom right",onClick:function(e){e.preventDefault(),p({type:"UPDATE",params:{},unscheduled:!0})},title:"Unschedule this post",children:"drafts"}),Object(s.jsx)("button",{className:"icon icon__trash bottom left",onClick:function(){p({type:"TRASH",params:{id:o}})},title:"Trash this post",children:"delete_forever"})]})}var ee=Object(n.createContext)(null);function te(e,t){switch(t.type){case"START":return{post:t.post,isDragging:!0,draggedFrom:t.draggedFrom>=0&&t.draggedFrom};case"DRAGGING_OVER_UNSCHEDULED":return Object(u.a)(Object(u.a)({},e),{},{draggedTo:t.draggedOver,overUnscheduled:!0});case"DRAGGING_OVER_SCHEDULED":return Object(u.a)(Object(u.a)({},e),{},{draggedTo:null,overUnscheduled:!1});case"END":return ae;default:return e}}var ae={post:{},isDragging:!1,draggedFrom:null,draggedTo:null,overUnscheduled:!1};function se(e){var t=e.post,a=e.index,c=e.unscheduled,r=e.allowDrag,o=f.postStatuses,d=Object(n.useContext)(z),u=d.posts.currentPost,l=d.postsDispatch,j=Object(n.useContext)(ee),b=j.draggedPost,O=b.isDragging,h=b.draggedFrom,v=b.draggedTo,m=j.draggedPostDispatch,x=Object(n.useContext)(D).viewOptions.statuses,_=Object(n.useState)({}),g=Object(i.a)(_,2),y=g[0],E=g[1],N=Object(n.useState)(new Date),w=Object(i.a)(N,2),T=w[0],C=w[1];Object(n.useEffect)((function(){C(new Date(t.post_date))}),[t.post_date]),Object(n.useEffect)((function(){E({color:o[t.post_status].color,backgroundColor:o[t.post_status].backgroundColor})}),[t.post_status,o]);var R=function(e){var a=!!e.currentTarget.parentNode.classList.contains("unscheduledDrafts");m({type:"START",post:t,draggedFrom:!!a&&Number(e.currentTarget.dataset.index)})},S=function(){return m({type:"END"})},P=function(e){e.target.classList.contains("icon")||l({type:"SET_CURRENTPOST",post:t,unscheduled:c})};return t?function(){var e=["post","post-id-".concat(t.id," status__").concat(t.post_status)];return O&&(v===Number(a)&&(e.push("dropArea"),!1===h?e.push("fromNowhere"):h<v?e.push("fromAbove"):h>v&&e.push("fromBelow")),h===Number(a)&&e.push("dragging")),Object(p.isEmpty)(u)||u.id!==t.id||e.push("currentPost"),Object(s.jsxs)("li",{id:t.id,className:e.join(" "),style:!1===c&&!0===x[t.post_status]||!0===c?{visibility:"visible"}:{visibility:"hidden"},"data-index":a,draggable:!0===r||!Object(I.a)(T)&&!Object(H.a)(T),onDragStart:R,onDragEnd:S,onClick:P,children:[Object(s.jsx)($,{className:O?"disabled":"active",post:t,unscheduled:c}),Object(s.jsx)("p",{className:"postData",style:{backgroundColor:y.backgroundColor,color:y.color},children:Object(Z.decode)(t.post_title,{scope:"strict"})})]})}():null}function ne(e){var t=e.className;return Object(s.jsx)("div",{className:"loadingOverlay ".concat(t),children:Object(s.jsxs)("div",{className:"roller",children:[Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{})]})})}var ce=a(182),re=a(183),oe=a(184),ie=a(185);function de(e){var t=e.posts,a=e.className,c=e.allowDrag,r=e.allowDrop,o=e.date,d=e.loadingState,l=f.routeBase,j=f.nonce,b=Object(n.useContext)(z),O=b.posts.currentPost,h=b.postsDispatch,v=Object(n.useContext)(ee),m=v.draggedPost,_=m.post,g=m.draggedTo,y=m.draggedFrom,E=m.overUnscheduled,w=v.draggedPostDispatch,T=Object(n.useReducer)(q,W),D=Object(i.a)(T,2),C=D[0],R=D[1],S=Object(n.useState)(!1),P=Object(i.a)(S,2),k=P[0],M=P[1];Object(n.useEffect)((function(){if(void 0!==d&&null!==d)return M(d),function(){M(!1)}}),[d]),Object(n.useEffect)((function(){if(!0===C.updateNow&&"undefined"!==_.id){R({type:"UPDATING"});var e="".concat(l,"/update/").concat(_.id),t={params:N(C.params,_),unscheduled:C.unscheduled};if(null!==g&&(t.draggedTo=g),Object(p.isEmpty)(t))return{data:"Update not necessary.",error:!0};var a={"Content-Type":"application/json"};a["X-WP-Nonce"]=j,function(){var s=Object(Y.a)(X.a.mark((function s(){var n;return X.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return M(!0),s.prev=1,s.next=4,fetch(e,{method:"POST",headers:a,body:JSON.stringify(t)});case 4:return n=s.sent,s.next=7,n.json();case 7:h({type:"REFETCH"}),w({type:"END"}),R({type:"COMPLETE"}),M(!1),s.next=17;break;case 13:s.prev=13,s.t0=s.catch(1),console.log(s.t0.message),M(!1);case 17:case"end":return s.stop()}}),s,null,[[1,13]])})));return function(){return s.apply(this,arguments)}}()()}}),[l,j,C,g,w,_,h]);var U=function(e){if(e.preventDefault(),!1!==c)if(e.currentTarget.classList.contains("unscheduledDrafts")){var t=Number(e.target.dataset.index),a=!1;if(y===t)return;if((a=!Number.isNaN(t)&&t)!==g){if(!1===a){var s=e.currentTarget.getBoundingClientRect(),n=e.clientY-s.top,r=e.currentTarget.childNodes,o=r.length;a=0===r.length||n<r[0].offsetTop?0:n>=r[o-1].offsetTop?o:o-1}w({type:"DRAGGING_OVER_UNSCHEDULED",draggedOver:a})}}else!0===E&&w({type:"DRAGGING_OVER_SCHEDULED"})},A=function(){var e,t,a;!1!==r&&(!1===o?a=Object(B.a)(_.post_date,x):(e=o,t={h:Object(ce.a)(_.post_date),m:Object(re.a)(_.post_date)},e=Object(oe.a)(e,t.h),e=Object(ie.a)(e,t.m),a=Object(B.a)(e,x)),R({type:"UPDATE",params:{post_date:a},unscheduled:E}),O.id===_.id&&h({type:"UPDATE_CURRENTPOST_FIELD",field:"post_date",value:o}))};return function(){var e={className:"postList ".concat(a),onDragOver:U};return!1!==r?e.onDrop=A:e.className+=" dropDisabled",Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(ne,{className:k?"active":null}),Object(s.jsx)("ul",Object(u.a)(Object(u.a)({},e),{},{children:t.map((function(e,t){return Object(s.jsx)(se,{post:e,index:t,unscheduled:!1===o,allowDrag:c},e.id)}))}))]})}()}function ue(e){var t=e.day,a=e.unscheduled,c=Object(n.useContext)(z).postsDispatch;return Object(s.jsx)("button",{className:"icon newPost",onClick:function(e){e.preventDefault(),c({type:"NEW_POST",post_date:t||new Date,unscheduled:a||!1})},children:"add_circle"})}var le=a(72),je=f.routeBase,be=f.nonce,Oe={};Oe["X-WP-Nonce"]=be;var pe=function(e,t){var a=Object(n.useContext)(z),s=a.posts.refetch,c=a.postsDispatch,r=Object(n.useState)(!1),o=Object(i.a)(r,2),d=o[0],u=o[1];return Object(n.useEffect)((function(){if(null!==e&&null!==t){var a=Object(B.a)(e,m),s=Object(B.a)(t,m),n="".concat(je,"/scheduled/").concat(a,"/").concat(s);return function(){var e=Object(Y.a)(X.a.mark((function e(){var t,a;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,fetch(n,{headers:Oe});case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,c({type:"SET_SCHEDULED",posts:a.posts,start:a.dateRange.start,end:a.dateRange.end}),u(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("REST error",e.t0.message),u(!1);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}()(),function(){u(!1)}}}),[e,t,s,c]),d},he=function(e){var t=Object(n.useContext)(z),a=t.posts.taxonomies,s=t.postsDispatch,c=Object(n.useState)(!1),r=Object(i.a)(c,2),o=r[0],d=r[1];return Object(n.useEffect)((function(){if(Object(p.isEmpty)(a[e])){var t="".concat(je,"/tax/").concat(e);return function(){var a=Object(Y.a)(X.a.mark((function a(){var n,c;return X.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return d(!0),a.prev=1,a.next=4,fetch(t,{headers:Oe});case 4:return n=a.sent,a.next=7,n.json();case 7:c=a.sent,s({type:"SET_TAXONOMY_TERMS",name:e,taxonomy:c.taxonomy,terms:c.terms}),d(!1),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(1),console.log("REST error",a.t0.message),d(!1);case 16:case"end":return a.stop()}}),a,null,[[1,12]])})));return function(){return a.apply(this,arguments)}}()(),function(){d(!1)}}}),[e,a,s]),o};function fe(e){var t=e.posts,a=e.date,n=e.allowDrag,c=e.allowDrop,r=e.title,o=e.loadingState,i=function(e,t){var a=[];return e&&e.forEach((function(e){Object(le.a)(t,new Date(e.post_date))&&a.push(e)})),a}(t,a);return function(){var e={className:"dayPosts",date:a,posts:i,allowDrop:!0,loadingState:o};"undefined"!==n&&null!==n&&(e.allowDrag=n),e.allowDrop=!1!==c;var t=Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(ue,{day:a,unscheduled:!1}),Object(s.jsx)(de,Object(u.a)({},e))]});return r?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h4",{className:"title",children:r}),t]}):t}()}var ve=a(186);function me(e){var t=e.className,a=e.todayRef,c=Object(n.useContext)(z),r=c.posts.scheduled,o=c.postsDispatch,i=Object(n.useContext)(D).viewOptions.viewRange;Object(n.useEffect)((function(){o({type:"REFETCH"})}),[o]),pe(i.start,i.end);var d=Object(n.useCallback)((function(){for(var e=[],t=Object(l.a)(i.start),a=0;a<7;a++)e.push(Object(s.jsx)("div",{className:"col col__center",children:Object(B.a)(Object(L.a)(t,a),_)},a));return Object(s.jsx)("div",{className:"days row",children:e})}),[i.start]),u=Object(n.useCallback)((function(){for(var e=[],t=[],n=i.start,c=!0;n<=i.end;){for(var o=0;o<7;o++){var d=Object(ve.a)(n)||c;t.push(Object(s.jsx)(J,{ref:Object(I.a)(n)?a:null,day:n,monthName:d?Object(B.a)(n,g):"",children:Object(s.jsx)(fe,{date:n,posts:r,allowDrag:!0,renderEmpty:!0})},n)),c=!1,n=Object(L.a)(n,1)}e.push(Object(s.jsx)("div",{className:"row",children:t},n)),t=[]}return Object(s.jsx)("div",{className:"body",children:e})}),[i.end,i.start,r,a]);return Object(s.jsx)("div",{className:t,children:null!==i.start&&null!==i.end?Object(s.jsxs)("div",{className:"view__calendar__inner",children:[d(),u()]}):null})}var xe=a(187);function _e(e){var t=e.className,a=Object(n.useContext)(z),c=a.posts.scheduled,r=a.postsDispatch,o=Object(n.useContext)(D).viewOptions.viewRange,i=o.start,d=o.end;Object(n.useEffect)((function(){r({type:"REFETCH"})}),[r]),pe(i,d);var u=function(){var e=[],t=i,a=["listDay"];if("undefined"!==d&&null!==d)for(;Object(xe.a)(t)<=Object(xe.a)(d);)Object(I.a)(t)&&a.push("today"),Object(H.a)(t)&&!Object(I.a)(t)&&a.push("past"),e.push(Object(s.jsx)("li",{className:a.join(" "),children:Object(s.jsx)(fe,{date:t,posts:c,allowDrag:!0,title:Object(B.a)(t,y),newPostButton:!0})},t)),t=Object(L.a)(t,1);return e};return Object(s.jsx)("div",{className:t,children:null!==i&&null!==d?Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{className:"view__list__days",children:Object(s.jsx)("ul",{children:u()})})}):null})}var ge=a(30);function ye(e){var t=e.name,a=e.label,n=e.inlineLabel,c=e.children;return Object(s.jsxs)("div",{className:"fieldGroup fieldGroup__".concat(t," ").concat(n?"inlineLabel":""),children:[a?Object(s.jsx)("label",{htmlFor:t,children:a}):null,c]})}var Ee=a(188),Ne={post:{},editMode:!1};function we(e,t){switch(t.type){case"SET":return{post:t.post,editMode:!0};case"EDIT":var a=t.field,s=t.value;return"post_date"===a&&(s=new Date(s)),Object(u.a)(Object(u.a)({},e),{},{post:Object(u.a)(Object(u.a)({},e.post),{},Object(d.a)({},a,s))});case"TOGGLE_TAXONOMY":var n=parseInt(t.term_id),c=!!e.post.taxonomies.hasOwnProperty(t.taxonomy)&&e.post.taxonomies[t.taxonomy].indexOf(n),r=-1===c?[].concat(Object(ge.a)(e.post.taxonomies[t.taxonomy]),[n]):!1===c?[n]:[].concat(Object(ge.a)(e.post.taxonomies[t.taxonomy].slice(0,c)),Object(ge.a)(e.post.taxonomies[t.taxonomy].slice(c+1)));return Object(u.a)(Object(u.a)({},e),{},{post:Object(u.a)(Object(u.a)({},e.post),{},{taxonomies:Object(u.a)(Object(u.a)({},e.post.taxonomies),{},Object(d.a)({},t.taxonomy,r))})});case"CLEAR":return Ne;default:return{state:e}}}function Te(){var e=f.routeBase,t=Object(n.useContext)(z),a=t.posts,c=a.currentPost,r=a.taxonomies,o=t.postsDispatch,d=Object(n.useContext)(ee).draggedPostDispatch,u=Object(n.useReducer)(we,Ne),l=Object(i.a)(u,2),j=l[0],b=l[1],O=Object(n.useReducer)(q,W),h=Object(i.a)(O,2),v=h[0],m=h[1],_=Object(n.useRef)(),g=Object(n.useState)(new Date),y=Object(i.a)(g,2),E=y[0],w=y[1],T=Object(n.useState)({}),D=Object(i.a)(T,2),C=D[0],R=D[1],S=Object(n.useState)(!1),P=Object(i.a)(S,2),M=P[0],U=P[1],A=Object(n.useState)(!1),L=Object(i.a)(A,2),F=L[0],G=L[1],J=j.post,V=j.editMode;Object(n.useEffect)((function(){return J.post_date&&"undefined"!==J.post_date&&w(new Date(J.post_date)),function(){w(new Date)}}),[J.post_date]),Object(n.useEffect)((function(){var e=[];!0===J.unscheduled?e.push("publish","future","pending"):Object(Ee.a)(E)?e.push("publish"):Object(H.a)(E)&&e.push("future");var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=f.postStatuses;if(e.length>0)for(var a in f.postStatuses)e.includes(a)&&(t=Object(p.omit)(t,a));return t}(e);R(t)}),[E,J.unscheduled]),Object(n.useEffect)((function(){U(!(!c.post_date||!Object(I.a)(c.post_date)&&!Object(H.a)(c.post_date)||"publish"!==c.post_status))}),[c.post_date,c.post_status]),Object(n.useEffect)((function(){if(!0===v.updateNow&&"undefined"!==c.id){m({type:"UPDATING"});var t="".concat(e,"/");!0===v.trash?t+="trash/".concat(c.id):0===c.id?t+="new":t+="update/".concat(c.id);var a={params:N(v.params,c),unscheduled:v.unscheduled};if(Object(p.isEmpty)(a.params))return{data:"Update not necessary.",error:!0};(function(){var e=Object(Y.a)(X.a.mark((function e(){var s;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 3:return s=e.sent,e.next=6,s.json();case 6:d({type:"END"}),m({type:"COMPLETE"}),o({type:"SET_CURRENTPOST",post:J,unscheduled:J.unscheduled}),o({type:"REFETCH"}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}})()()}}),[c,e,J,d,o,v.trash,v.params,v.updateNow,v.unscheduled]),Object(n.useEffect)((function(){(c.id>0||0===c.id)&&b({type:"SET",post:c})}),[c.id,c]);var K=Object(n.useCallback)((function(){b({type:"CLEAR"}),o({type:"UNSET_CURRENTPOST"})}),[b,o]);Object(n.useEffect)((function(){if(!1!==V){var e=function(e){_.current&&_.current.contains(e.target)||K()};return Object(p.isEmpty)(c)?document.removeEventListener("mousedown",e):document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}}),[V,c,o,K]);var Q,$=function(e){b({type:"EDIT",field:e.target.name,value:e.target.value})},te=function(e){b({type:"TOGGLE_TAXONOMY",taxonomy:e.target.name,term_id:e.target.value})};return V?Object(s.jsx)("div",{className:"editPost",children:Object(s.jsx)("div",{className:"editPost__container",children:Object(s.jsxs)("div",{ref:_,className:"editPost__editor",children:[Object(s.jsx)("button",{className:"close icon",onClick:K,children:"highlight_off"}),Object(s.jsxs)("h3",{className:"title",children:[0===J.id?"New":"Edit"," Post"]}),Object(s.jsxs)("form",{className:"editPost__editor__form",onSubmit:function(e){e.preventDefault(),m({type:"UPDATE",params:{post_title:J.post_title,post_date:Object(B.a)(new Date(J.post_date),x),post_status:J.post_status,post_excerpt:J.post_excerpt,taxonomies:J.taxonomies},unscheduled:J.unscheduled}),b({type:"CLEAR"})},children:[Object(s.jsx)(ye,{name:"post_title",label:"Title",children:Object(s.jsx)("input",{name:"post_title",value:Object(Z.decode)(J.post_title,{scope:"strict"}),onChange:$})}),Object(s.jsxs)(ye,{name:"date_status",children:[Object(s.jsxs)("div",{className:"fieldGroup__date",children:[Object(s.jsxs)("div",{className:"post_date ".concat(!0===J.unscheduled?"inactive":"active"),children:[Object(s.jsx)("label",{htmlFor:"post_date",children:"Post Date"}),Object(s.jsx)(k.a,{closeOnScroll:function(e){return e.target===document},selected:E,timeInputLabel:"Time:",showTimeInput:!0,dateFormat:x,onChange:function(e){null===e&&(e=new Date),b({type:"EDIT",field:"post_date",value:e})},disabled:M})]}),Object(s.jsxs)("div",{className:"unscheduled",children:[Object(s.jsx)("input",{type:"checkbox",name:"unscheduled",checked:J.unscheduled,onChange:function(e){b({type:"EDIT",field:e.target.name,value:!J[e.target.name]})}}),Object(s.jsx)("label",{htmlFor:"unscheduled",children:"Unscheduled"})]})]}),Object(s.jsxs)("div",{className:"fieldGroup__status",children:[Object(s.jsx)("label",{htmlFor:"post_status",children:"Post Status"}),Object(s.jsx)("select",{name:"post_status",onChange:$,value:J.post_status,children:(Q=C,Object.keys(Q).map((function(e){return Object(s.jsx)("option",{value:e,children:Q[e].name},e)})))})]})]}),Object(s.jsxs)(ye,{name:"taxonomies",children:[Object(s.jsxs)("label",{htmlFor:"category",children:["Categories",Object(s.jsx)("fieldset",{name:"category",children:r.category.terms.map((function(e,t){return Object(s.jsxs)("label",{children:[Object(s.jsx)("input",{type:"checkbox",name:"category",value:e.term_id,onChange:te,checked:!Object(p.isEmpty)(J.taxonomies)&&!Object(p.isEmpty)(J.taxonomies.category)&&J.taxonomies.category.includes(e.term_id)}),Object(Z.decode)(e.name,{scope:"strict"})]},t)}))})]}),Object(s.jsxs)("label",{htmlFor:"post_tag",children:["Tags",Object(s.jsx)("fieldset",{name:"post_tag",children:r.post_tag.terms.map((function(e,t){return Object(s.jsxs)("label",{children:[Object(s.jsx)("input",{type:"checkbox",name:"post_tag",value:e.term_id,onChange:te,checked:!Object(p.isEmpty)(J.taxonomies)&&!Object(p.isEmpty)(J.taxonomies.post_tag)&&J.taxonomies.post_tag.includes(e.term_id)}),Object(Z.decode)(e.name,{scope:"strict"})]},t)}))})]})]}),Object(s.jsx)(ye,{name:"post_excerpt",label:"Excerpt",children:Object(s.jsx)("textarea",{name:"post_excerpt",onChange:$,rows:4,value:Object(Z.decode)(J.post_excerpt,{scope:"strict"})})}),Object(s.jsx)("div",{className:"post_thumb",children:J.image?Object(s.jsxs)("div",{children:[Object(s.jsx)("span",{children:"Featured Image"}),Object(s.jsx)("a",{href:Object(Z.decode)(J.edit_link),target:"_blank",rel:"noreferrer",children:Object(s.jsx)("img",{src:J.image,alt:"".concat(J.post_title)})})]}):null}),Object(s.jsx)("div",{className:"editPost__buttons",children:!0===F?Object(s.jsxs)("div",{className:"editPost__buttons__trash confirm",children:[Object(s.jsx)("p",{style:{fontWeight:"bold"},children:"Are you sure you want to Trash this post?"}),Object(s.jsx)("input",{type:"button",onClick:function(){m({type:"TRASH",params:{id:J.id}}),b({type:"CLEAR"}),G(!1)},value:"Yes",autoFocus:!0}),Object(s.jsx)("input",{type:"button",onClick:function(){return G(!1)},value:"No"})]}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("input",{type:"submit",className:"editPost__buttons__save",value:0===J.id?"Save":"Update"}),Object(s.jsx)("input",{type:"button",className:"editPost__buttons__cancel",onClick:function(){b({type:"CLEAR"}),o({type:"UNSET_CURRENTPOST"})},value:"Cancel"}),Object(s.jsx)("input",{type:"button",className:"editPost__buttons__trash",onClick:function(){return G(!0)},value:"Delete"})]})})]})]})})}):null}var De=Object(n.forwardRef)((function(e,t){var a=e.todayRef,c=Object(n.useContext)(D).viewOptions.viewMode;return he("category"),he("post_tag"),Object(s.jsxs)("main",{className:"calendario__main",children:[Object(s.jsxs)("div",{className:"view",ref:t,children:[Object(s.jsx)(S,{className:"view__options"}),"calendar"===c?Object(s.jsx)(me,{className:"view__calendar",todayRef:a}):Object(s.jsx)(_e,{className:"view__list",todayRef:a})]}),Object(s.jsx)(Te,{})]})}));function Ce(){var e=f.trashUrl,t=Object(n.useContext)(z),a=t.posts.unscheduled,c=t.postsDispatch;Object(n.useEffect)((function(){c({type:"REFETCH"})}),[c]);var r=function(){var e=Object(n.useContext)(z),t=e.posts.refetch,a=e.postsDispatch,s=Object(n.useState)(!1),c=Object(i.a)(s,2),r=c[0],o=c[1];return Object(n.useEffect)((function(){var e="".concat(je,"/unscheduled");return function(){var t=Object(Y.a)(X.a.mark((function t(){var s,n;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o(!0),t.prev=1,t.next=4,fetch(e,{headers:Oe});case 4:return s=t.sent,t.next=7,s.json();case 7:n=t.sent,a({type:"SET_UNSCHEDULED",posts:n.posts,unscheduled:!0}),o(!1),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),console.log("REST error",t.t0.message),o(!1);case 16:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(){return t.apply(this,arguments)}}()(),function(){o(!1)}}),[a,t]),r}();return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(de,{className:"unscheduledDrafts",date:!1,posts:a,allowDrag:!0,loadingState:r}),Object(s.jsx)(ue,{unscheduled:!0}),Object(s.jsxs)("a",{className:"trashLink",rel:"noreferrer",href:"".concat(e),target:"_blank",children:["Trashed Posts ",Object(s.jsx)("span",{className:"icon",children:"open_in_new"})]})]})}function Re(){var e=f.postStatuses,t=Object.keys(e),a=Object(n.useContext)(D),c=a.viewOptions.statuses,r=a.viewOptionsDispatch,o=function(e){r({type:"TOGGLE_STATUS",status:e.target.name})};return Object(s.jsx)("div",{className:"statusFilters",children:Object(s.jsx)("ul",{className:"filters",children:t.map((function(t,a){var n=e[t],r=n.color,i=n.backgroundColor,d=n.name;return Object(s.jsxs)("li",{className:"filterItem status__".concat(t),children:[Object(s.jsx)("button",{className:"dot ".concat(c[t]?"visible":"hidden"),name:t,style:!0===c[t]?{color:r,backgroundColor:i,borderColor:i}:{color:r,borderColor:i},onClick:o}),Object(s.jsx)("span",{className:"name",children:d})]},a)}))})})}function Se(){return Object(s.jsx)("aside",{className:"calendario__sidebar",children:Object(s.jsxs)("div",{className:"calendario__sidebar__inner",children:[w("Unscheduled Drafts","unscheduledDrafts",Object(s.jsx)(Ce,{})),w("Filter by Status","statusFilters",Object(s.jsx)(Re,{})),w("Dev Links + Info","dev",Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("ul",{style:{marginLeft:0,paddingLeft:"24px",listStylePosition:"outside"},children:[Object(s.jsx)("li",{children:Object(s.jsx)("a",{href:"https://github.com/gaswirth/rhdwp-calendario#readme",target:"_blank",rel:"noreferrer",children:"Readme"})}),Object(s.jsx)("li",{children:Object(s.jsx)("a",{href:"https://github.com/gaswirth/rhdwp-calendario/issues",target:"_blank",rel:"noreferrer",children:"Report an issue"})}),Object(s.jsxs)("li",{children:["GitHub:"," ",Object(s.jsx)("a",{href:"https://github.com/gaswirth/rhdwp-calendario",target:"_blank",rel:"noreferrer",children:"gaswirth/rhdwp-calendario"})]})]}),Object(s.jsx)("p",{style:{fontSize:"0.7em"},children:Object(s.jsx)("a",{href:"https://roundhouse-designs.com",target:"_blank",rel:"noreferrer",children:"Roundhouse Designs"})})]}))]})})}a(169),a(170);function Pe(){var e=Object(n.useReducer)(Q,K),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(n.useReducer)(te,ae),o=Object(i.a)(r,2),d=o[0],u=o[1],l=Object(n.useReducer)(R,C),j=Object(i.a)(l,2),b=j[0],O=j[1],p=function(e,t){var a=Object(n.useState)((function(){var a=window.localStorage.getItem(t);return null!==a?JSON.parse(a):e})),s=Object(i.a)(a,2),c=s[0],r=s[1];return Object(n.useEffect)((function(){window.localStorage.setItem(t,JSON.stringify(c))}),[t,c]),[c,r]}({viewMode:"calendar"},"viewOptions"),h=Object(i.a)(p,2),f=h[0],v=h[1],m=Object(n.useRef)(),x=Object(n.useRef)();return Object(n.useEffect)((function(){O({type:"UPDATE",viewMode:f.viewMode})}),[]),Object(n.useEffect)((function(){v({viewMode:b.viewMode})}),[v,b.viewMode]),Object(s.jsx)("div",{className:"calendario",children:Object(s.jsx)(D.Provider,{value:{viewOptions:b,viewOptionsDispatch:O},children:Object(s.jsxs)(z.Provider,{value:{posts:a,postsDispatch:c},children:[Object(s.jsx)(G,{handleTodayClick:function(){var e,t,a,s=new Date;e=s,t=b.viewRange.start,a=b.viewRange.end,e.getTime()>=t.getTime()&&e.getTime()<=a.getTime()?x.current.scroll({top:m.current.offsetTop,behavior:"smooth"}):O({type:"SET_RANGE_START",date:s})}}),Object(s.jsxs)(ee.Provider,{value:{draggedPost:d,draggedPostDispatch:u},children:[Object(s.jsx)(De,{ref:x,todayRef:m}),Object(s.jsx)(Se,{})]})]})})})}var ke,Me=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,190)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),s(e),n(e),c(e),r(e)}))},Ue=(window.rhdReactPlugin||{}).appSelector;(ke=document.querySelector(Ue))&&o.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(Pe,{})}),ke),Me()},78:function(e,t,a){}},[[171,1,2]]]);
//# sourceMappingURL=main.4cc29ce2.chunk.js.map