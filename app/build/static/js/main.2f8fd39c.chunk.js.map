{"version":3,"sources":["components/common/Widget.js","lib/utils.js","ViewContext.js","components/ViewOptions.js","components/MainHeader.js","PostsContext.js","lib/hooks.js","components/Header.js","DragContext.js","components/Day.js","lib/updatePost.js","components/PostLinks.js","components/Post.js","components/common/Loading.js","components/PostList.js","components/common/NewPostButton.js","components/DayPosts.js","components/Calendar.js","components/List.js","components/common/FieldGroup.js","components/EditPost.js","components/Main.js","components/AdminLinks.js","components/UnscheduledDrafts.js","components/common/ColorPickerPopover.js","components/common/ToggleButton.js","components/StatusFilters.js","components/Sidebar.js","App.js","reportWebVitals.js","index.js"],"names":["Widget","title","className","children","wp","window","rhdReactPlugin","dateFormat","filterUnchangedParams","params","post","length","key","Array","isArray","every","value","index","omit","renderWidget","ViewContext","createContext","initialViewOptions","viewMode","viewRange","start","end","postStatuses","defaultStatusColors","viewReducer","state","action","type","range","startOfWeek","endOfWeek","date","addMonths","subMonths","statuses","status","visible","postStatus","color","reset","Object","keys","ViewOptions","useContext","viewOptions","viewOptionsDispatch","handleViewModeChange","e","target","onClick","name","MainHeader","handleTodayClick","today","startOfToday","DateInput","forwardRef","ref","useEffect","startOfMonth","endOfMonth","addDays","preventDefault","selected","onChange","customInput","selectsStart","startDate","endDate","closeOnScroll","document","selectsEnd","minDate","monthsShown","PostsContext","initialPosts","currentPost","id","post_title","post_status","post_date","unscheduled","refetch","dateRange","scheduled","trashed","taxonomies","locale","postsReducer","scheduledPosts","posts","forEach","Date","unscheduledPosts","taxonomy","terms","field","routeBase","headers","nonce","useFetchScheduledPosts","postsDispatch","useState","isLoading","setIsLoading","format","url","a","fetch","res","json","data","console","log","message","fetchData","useFetchTaxonomyTerms","isEmpty","useClickOutside","handler","startedInside","startedWhenMounted","listener","event","current","contains","validateEventStart","addEventListener","removeEventListener","Header","useFetchPostStatuses","pluginUrl","href","rel","src","alt","DragContext","dragReducer","isDragging","draggedFrom","draggedTo","draggedOver","overUnscheduled","initialDrag","Day","day","monthName","dragOver","setDragOver","draggedPost","classes","handleDragOver","isSameDay","isToday","push","isPast","join","onDragOver","onDragLeave","onDrop","initialUpdateState","updateNow","trash","updateReducer","PostLinks","user","DEBUG_MODE","edit_link","view_link","useReducer","updatePost","updatePostDispatch","postData","method","body","JSON","stringify","response","open","decode","Post","allowDrag","draggedPostDispatch","setDate","setColor","undefined","handleDragStart","draggingUnscheduled","currentTarget","parentNode","classList","Number","dataset","handleDragEnd","handleClick","style","visibility","data-index","draggable","onDragStart","onDragEnd","backgroundColor","scope","renderPost","Loading","PostList","allowDrop","loadingState","error","overNow","isNaN","targetRect","getBoundingClientRect","mouseY","clientY","top","listItems","childNodes","itemCount","offsetTop","handleDrop","dropDate","time","h","getHours","m","getMinutes","setHours","setMinutes","listProps","map","renderPostList","NewPostButton","DayPosts","dayPosts","useDayPosts","renderList","Calendar","todayRef","renderDaysHeaderRow","useCallback","days","i","renderDays","rows","firstCalendarDay","dayIsFirstDay","isFirstDayOfMonth","renderEmpty","List","endOfDay","newPostButton","FieldGroup","label","inlineLabel","htmlFor","initialEditPost","editMode","editPostReducer","term_id","parseInt","hasOwnProperty","indexOf","termList","slice","EditPost","editPost","editPostDispatch","node","useRef","allowedStatuses","setAllowedStatuses","datePickerDisabled","setDatePickerDisabled","trashPostClicked","setTrashPostClicked","exclude","isFuture","statusList","filtered","includes","filterStatusList","closeModal","handleInputChange","handleTermCheckboxChange","onSubmit","post_excerpt","timeInputLabel","showTimeInput","disabled","checked","category","term","post_tag","image","fontWeight","autoFocus","Main","AdminLinks","blogUrl","trashUrl","renderLink","link","UnscheduledDrafts","useFetchUnscheduledPosts","ColorPickerPopover","presetStatusColors","popover","previous","colorValue","setColorValue","isOpen","setIsOpen","close","background","ToggleButton","toggleSelected","StatusFilters","firstUpdate","colors","toggleStatus","Sidebar","App","defaultValue","stickyValue","localStorage","getItem","parse","setValue","setItem","useStickyState","view","setView","mainRef","Provider","min","max","getTime","scroll","behavior","appAnchorElement","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","appSelector","querySelector","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.2f8fd39c.chunk.js","sourcesContent":["import React from \"react\";\n\nexport default function Widget({ title, className, children }) {\n\treturn (\n\t\t<div className={`widget ${className}`}>\n\t\t\t{title ? <h3 className=\"widgetTitle\">{title}</h3> : null}\n\t\t\t{children}\n\t\t</div>\n\t);\n}\n","import Widget from \"../components/common/Widget\";\nimport { omit } from \"lodash\";\n\nexport const DEBUG_MODE =\n\tprocess.env.REACT_APP_DEBUG_MODE === \"true\" ? true : false;\n\nexport const wp =\n\tDEBUG_MODE !== true\n\t\t? {\n\t\t\t\t...window.rhdReactPlugin,\n\t\t  }\n\t\t: {\n\t\t\t\tnonce: 0,\n\t\t\t\trouteBase: \"http://localhost/wp-json/calendario/v1\",\n\t\t\t\tuser: 1,\n\t\t\t\tadminUrl: \"\",\n\t\t\t\tpluginUrl: \"\",\n\t\t\t\tpostsUrl: \"\",\n\t\t\t\ttrashUrl: \"\",\n\t\t\t\tblogUrl: \"//localhost\",\n\t\t\t\tdefaultStatusColors: {\n\t\t\t\t\tpublish: \"dodgerblue\",\n\t\t\t\t\tfuture: \"olivedrab\",\n\t\t\t\t\tdraft: \"darkgray\",\n\t\t\t\t\tpending: \"orange\",\n\t\t\t\t\tprivate: \"brown\",\n\t\t\t\t},\n\t\t\t\tpresetStatusColors: [\n\t\t\t\t\t\"darkgray\",\n\t\t\t\t\t\"violet\",\n\t\t\t\t\t\"darkorchid\",\n\t\t\t\t\t\"dodgerblue\",\n\t\t\t\t\t\"skyblue\",\n\t\t\t\t\t\"olivedrab\",\n\t\t\t\t\t\"mediumseagreen\",\n\t\t\t\t\t\"lightsalmon\",\n\t\t\t\t\t\"orange\",\n\t\t\t\t\t\"brown\",\n\t\t\t\t],\n\t\t  };\n\nexport const dateFormat = {\n\tday: \"d\",\n\tdate: \"yyyy-MM-dd\",\n\tdateTime: \"yyyy-MM-dd h:mm aa\",\n\tyear: \"yyyy\",\n\tdayName: \"EEEE\",\n\tmonthName: \"MMMM\",\n\tmonthShort: \"MMM\",\n\tfullDate: \"EEEE,  MMMM dd, yyyy\",\n\tdaylessDate: \"MMMM dd, yyyy\",\n};\n\n/**\n * Produces a filtered list of post status objects.\n *\n * @param {array} exclude keys to exclude.\n * @return {object} The filtered postStatuses object.\n */\nexport function filterStatusList(statuses, exclude = []) {\n\tlet filtered = statuses;\n\tif (exclude.length > 0) {\n\t\tfor (let key in filtered) {\n\t\t\tif (exclude.includes(key)) {\n\t\t\t\tfiltered = omit(filtered, key);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn filtered;\n}\n\n/**\n * Filters unchanged values from a post object.\n *\n * @param {object} params  Key/value post parameters to update\n * @param {object} post The post to check against\n * @returns {object} The filtered params object\n */\nexport function filterUnchangedParams(params, post) {\n\tif (params.length > 0) {\n\t\tfor (let key in params) {\n\t\t\tif (Array.isArray(params[key])) {\n\t\t\t\tif (\n\t\t\t\t\tparams[key].length === post[key].length &&\n\t\t\t\t\tparams[key].every(\n\t\t\t\t\t\t(value, index) => value === post[key][index]\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tif (params[key] === post[key]) {\n\t\t\t\t\tparams = omit(params, key);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn params;\n}\n\n/**\n * Renders a styled Widget.\n *\n * @param {string} title\n * @param {string} className\n * @param {*} children\n * @returns\n */\nexport const renderWidget = (title, className, children) => {\n\treturn (\n\t\t<Widget title={title} className={`widget__${className}`}>\n\t\t\t{children}\n\t\t</Widget>\n\t);\n};\n\n/**\n *\n * @param {Date} date The target date\n * @param {*} min Start of the range\n * @param {*} max End of the range\n * @returns\n */\nexport const dateIsBetween = (date, min, max) =>\n\tdate.getTime() >= min.getTime() && date.getTime() <= max.getTime();\n","import { createContext } from \"react\";\nimport { wp } from \"./lib/utils\";\nimport { addMonths, subMonths, startOfWeek, endOfWeek } from \"date-fns\";\n\nconst ViewContext = createContext({});\nexport default ViewContext;\n\nexport const initialViewOptions = {\n\tviewMode: \"\",\n\tviewRange: {\n\t\tstart: null,\n\t\tend: null,\n\t},\n\tpostStatuses: {},\n};\n\nconst { defaultStatusColors } = wp;\n\nexport function viewReducer(state, action) {\n\tswitch (action.type) {\n\t\tcase \"UPDATE\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tviewMode: action.viewMode ? action.viewMode : state.viewMode,\n\t\t\t\tviewRange: action.viewRange\n\t\t\t\t\t? action.viewRange\n\t\t\t\t\t: state.viewRange,\n\t\t\t};\n\n\t\tcase \"SET_RANGE\":\n\t\t\tlet range =\n\t\t\t\tstate.viewMode !== \"list\"\n\t\t\t\t\t? {\n\t\t\t\t\t\t\tstart: startOfWeek(action.start),\n\t\t\t\t\t\t\tend: endOfWeek(action.end),\n\t\t\t\t\t  }\n\t\t\t\t\t: { start: action.start, end: action.end };\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tviewRange: {\n\t\t\t\t\tstart: range.start,\n\t\t\t\t\tend: range.end,\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase \"SET_RANGE_START\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tviewRange: {\n\t\t\t\t\t...state.viewRange,\n\t\t\t\t\tstart:\n\t\t\t\t\t\tstate.viewMode !== \"list\"\n\t\t\t\t\t\t\t? startOfWeek(action.date)\n\t\t\t\t\t\t\t: action.date,\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase \"SET_RANGE_END\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tviewRange: {\n\t\t\t\t\t...state.viewRange,\n\t\t\t\t\tend:\n\t\t\t\t\t\tstate.viewMode !== \"list\"\n\t\t\t\t\t\t\t? endOfWeek(action.date)\n\t\t\t\t\t\t\t: action.date,\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase \"NEXT_MONTH\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tviewRange: {\n\t\t\t\t\tstart: addMonths(state.viewRange.start, 1),\n\t\t\t\t\tend: addMonths(state.viewRange.end, 1),\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase \"PREV_MONTH\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tviewRange: {\n\t\t\t\t\tstart: subMonths(state.viewRange.start, 1),\n\t\t\t\t\tend: subMonths(state.viewRange.end, 1),\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase \"SET_POST_STATUSES\":\n\t\t\tlet statuses = action.postStatuses;\n\n\t\t\t// Don't overwrite visibility, if set\n\t\t\tfor (let status in statuses) {\n\t\t\t\tstatuses[status].visible =\n\t\t\t\t\t\"visible\" in statuses[status]\n\t\t\t\t\t\t? statuses[status].visible\n\t\t\t\t\t\t: true;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tpostStatuses: statuses,\n\t\t\t};\n\n\t\tcase \"TOGGLE_POST_STATUS\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tpostStatuses: {\n\t\t\t\t\t...state.postStatuses,\n\t\t\t\t\t[action.postStatus]: {\n\t\t\t\t\t\t...state.postStatuses[action.postStatus],\n\t\t\t\t\t\tvisible: !state.postStatuses[action.postStatus].visible,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase \"SET_POST_STATUS_COLOR\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tpostStatuses: {\n\t\t\t\t\t...state.postStatuses,\n\t\t\t\t\t[action.postStatus]: {\n\t\t\t\t\t\t...state.postStatuses[action.postStatus],\n\t\t\t\t\t\tcolor: action.color,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase \"RESET_POST_STATUS_COLORS\":\n\t\t\tlet reset = state.postStatuses;\n\t\t\tlet statusKeys = Object.keys(state.postStatuses);\n\n\t\t\tfor (let status of statusKeys) {\n\t\t\t\treset[status].color = defaultStatusColors[status];\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tpostStatuses: { ...reset },\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n","import React, { useContext } from \"react\";\n\nimport ViewContext from \"../ViewContext\";\n\nexport default function ViewOptions() {\n\tconst {\n\t\tviewOptions: { viewMode },\n\t\tviewOptionsDispatch,\n\t} = useContext(ViewContext);\n\n\tconst handleViewModeChange = (e) => {\n\t\tviewOptionsDispatch({\n\t\t\ttype: \"UPDATE\",\n\t\t\tviewMode: e.target.value,\n\t\t});\n\t};\n\n\treturn (\n\t\t<div className=\"viewOptions\">\n\t\t\t<div className=\"viewMode\">\n\t\t\t\t<button\n\t\t\t\t\tonClick={handleViewModeChange}\n\t\t\t\t\tclassName={`icon ${\n\t\t\t\t\t\tviewMode === \"calendar\" ? \"active \" : \"inactive\"\n\t\t\t\t\t}`}\n\t\t\t\t\tvalue=\"calendar\"\n\t\t\t\t\ttitle=\"Calendar\"\n\t\t\t\t>\n\t\t\t\t\tcalendar_view_month\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tname=\"viewMode\"\n\t\t\t\t\tonClick={handleViewModeChange}\n\t\t\t\t\tclassName={`icon ${\n\t\t\t\t\t\tviewMode === \"list\" ? \"active \" : \"inactive\"\n\t\t\t\t\t}`}\n\t\t\t\t\tvalue=\"list\"\n\t\t\t\t\ttitle=\"List\"\n\t\t\t\t>\n\t\t\t\t\tview_list\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import { forwardRef, useContext, useEffect } from \"react\";\nimport ViewOptions from \"./ViewOptions\";\nimport DatePicker from \"react-datepicker\";\nimport { addDays, startOfToday, startOfMonth, endOfMonth } from \"date-fns\";\n\nimport ViewContext from \"../ViewContext\";\nimport { dateFormat } from \"../lib/utils\";\n\nexport default function MainHeader({ handleTodayClick }) {\n\tconst {\n\t\tviewOptions: { viewRange },\n\t\tviewMode,\n\t\tviewOptionsDispatch,\n\t} = useContext(ViewContext);\n\n\tconst today = startOfToday();\n\n\tconst DateInput = forwardRef(({ value, onClick }, ref) => (\n\t\t<button className=\"viewRange__input\" onClick={onClick} ref={ref}>\n\t\t\t{value}\n\t\t</button>\n\t));\n\n\tuseEffect(() => {\n\t\t// set a sensible default range\n\t\tif (!viewRange.start && !viewRange.end) {\n\t\t\tviewOptionsDispatch({\n\t\t\t\ttype: \"SET_RANGE\",\n\t\t\t\tstart: viewMode === \"calendar\" ? startOfMonth(today) : today,\n\t\t\t\tend:\n\t\t\t\t\tviewMode === \"calendar\" ? endOfMonth() : addDays(today, 30),\n\t\t\t});\n\t\t}\n\t}, [today, viewRange.start, viewRange.end, viewMode, viewOptionsDispatch]);\n\n\tconst nextMonth = (e) => {\n\t\te.preventDefault();\n\t\tviewOptionsDispatch({ type: \"NEXT_MONTH\" });\n\t};\n\n\tconst prevMonth = (e) => {\n\t\te.preventDefault();\n\t\tviewOptionsDispatch({ type: \"PREV_MONTH\" });\n\t};\n\n\treturn (\n\t\t<div className=\"calendarListHeader row flex-middle\">\n\t\t\t<div className=\"col col__start\">\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"icon dateChevron\"\n\t\t\t\t\tonClick={prevMonth}\n\t\t\t\t\ttitle=\"Previous Month\"\n\t\t\t\t>\n\t\t\t\t\tchevron_left\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div className=\"col col__center mainViewOptions\">\n\t\t\t\t<div className=\"toToday\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"icon today\"\n\t\t\t\t\t\tonClick={handleTodayClick}\n\t\t\t\t\t\ttitle=\"Jump to Today\"\n\t\t\t\t\t>\n\t\t\t\t\t\ttoday\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"viewRange\">\n\t\t\t\t\t<DatePicker\n\t\t\t\t\t\tdateFormat={dateFormat.daylessDate}\n\t\t\t\t\t\tselected={viewRange.start}\n\t\t\t\t\t\tonChange={(date) =>\n\t\t\t\t\t\t\tviewOptionsDispatch({\n\t\t\t\t\t\t\t\ttype: `SET_RANGE_START`,\n\t\t\t\t\t\t\t\tdate,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcustomInput={<DateInput />}\n\t\t\t\t\t\tselectsStart\n\t\t\t\t\t\tstartDate={viewRange.start}\n\t\t\t\t\t\tendDate={viewRange.end}\n\t\t\t\t\t\tcloseOnScroll={(e) => e.target === document}\n\t\t\t\t\t/>\n\t\t\t\t\t{\" to \"}\n\t\t\t\t\t<DatePicker\n\t\t\t\t\t\tdateFormat={dateFormat.daylessDate}\n\t\t\t\t\t\tselected={viewRange.end}\n\t\t\t\t\t\tonChange={(date) =>\n\t\t\t\t\t\t\tviewOptionsDispatch({\n\t\t\t\t\t\t\t\ttype: `SET_RANGE_END`,\n\t\t\t\t\t\t\t\tdate,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcustomInput={<DateInput />}\n\t\t\t\t\t\tselectsEnd\n\t\t\t\t\t\tstartDate={viewRange.start}\n\t\t\t\t\t\tendDate={viewRange.end}\n\t\t\t\t\t\tminDate={viewRange.start}\n\t\t\t\t\t\tmonthsShown={2}\n\t\t\t\t\t\tcloseOnScroll={(e) => e.target === document}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<ViewOptions />\n\t\t\t</div>\n\t\t\t<div className=\"col col__end\">\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"icon dateChevron\"\n\t\t\t\t\tonClick={nextMonth}\n\t\t\t\t\ttitle=\"Next Month\"\n\t\t\t\t>\n\t\t\t\t\tchevron_right\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import { createContext } from \"react\";\n\nconst PostsContext = createContext({});\nexport default PostsContext;\n\nexport const initialPosts = {\n\tcurrentPost: {\n\t\tid: null,\n\t\tpost_title: \"\",\n\t\tpost_status: \"\",\n\t\tpost_date: \"\",\n\t\tunscheduled: null,\n\t},\n\trefetch: false,\n\tdateRange: {\n\t\tstart: \"\",\n\t\tend: \"\",\n\t},\n\tunscheduled: [],\n\tscheduled: [],\n\ttrashed: [],\n\ttaxonomies: {},\n\tlocale: \"\",\n};\n\nexport function postsReducer(state, action) {\n\tswitch (action.type) {\n\t\tcase \"SET_SCHEDULED\":\n\t\t\tlet scheduledPosts = action.posts;\n\n\t\t\t// cast the date as a Date object\n\t\t\tscheduledPosts.forEach((post, index) => {\n\t\t\t\tscheduledPosts[index].post_date = new Date(post.post_date);\n\t\t\t});\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tdateRange: {\n\t\t\t\t\tstart: action.start,\n\t\t\t\t\tend: action.end,\n\t\t\t\t},\n\t\t\t\tscheduled: scheduledPosts,\n\t\t\t};\n\n\t\tcase \"SET_UNSCHEDULED\":\n\t\t\tlet unscheduledPosts = action.posts;\n\n\t\t\t// cast the date as a Date object\n\t\t\tunscheduledPosts.forEach((post, index) => {\n\t\t\t\tunscheduledPosts[index].post_date = new Date(post.post_date);\n\t\t\t});\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tunscheduled: unscheduledPosts,\n\t\t\t};\n\n\t\tcase \"SET_TAXONOMY_TERMS\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttaxonomies: {\n\t\t\t\t\t...state.taxonomies,\n\t\t\t\t\t[action.name]: {\n\t\t\t\t\t\ttaxonomy: action.taxonomy,\n\t\t\t\t\t\tterms: action.terms,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase \"SET_CURRENTPOST\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcurrentPost: {\n\t\t\t\t\t...action.post,\n\t\t\t\t\tunscheduled: action.unscheduled,\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase \"REFETCH\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\trefetch: !state.refetch,\n\t\t\t};\n\n\t\tcase \"NEW_POST\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcurrentPost: {\n\t\t\t\t\tid: 0,\n\t\t\t\t\tpost_date: action.post_date,\n\t\t\t\t\tunscheduled: action.unscheduled,\n\t\t\t\t\ttaxonomies: {},\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase \"UPDATE_CURRENTPOST_FIELD\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcurrentPost: {\n\t\t\t\t\t...state.currentPost,\n\t\t\t\t\t[action.field]: action.value,\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase \"UNSET_CURRENTPOST\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcurrentPost: initialPosts.currentPost,\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n","import { useState, useEffect, useContext /* useRef */ } from \"react\";\nimport { wp, dateFormat } from \"../lib/utils\";\nimport { format, isSameDay } from \"date-fns\";\nimport { isEmpty } from \"lodash\";\n\nimport PostsContext from \"../PostsContext\";\nimport ViewContext from \"../ViewContext\";\n\nimport { DEBUG_MODE } from \"../lib/utils\";\n\nconst { routeBase, nonce } = wp;\n\nconst headers = DEBUG_MODE !== true ? { \"X-WP-Nonce\": nonce } : {};\n\n/**\n * Uses localStorage to save view-specific user options.\n *\n * @param {any} defaultValue The default option value\n * @param {string} key The option key\n * @returns {[state, setter]} The useState state and setter\n */\nexport const useStickyState = (defaultValue, key) => {\n\tconst [value, setValue] = useState(() => {\n\t\tconst stickyValue = window.localStorage.getItem(key);\n\t\treturn stickyValue !== null ? JSON.parse(stickyValue) : defaultValue;\n\t});\n\n\tuseEffect(() => {\n\t\twindow.localStorage.setItem(key, JSON.stringify(value));\n\t}, [key, value]);\n\n\treturn [value, setValue];\n};\n\n/**\n * Get posts for a specified calendar day.\n *\n * @param {array} posts The posts\n * @param {Date} date The calendar day\n * @returns {array} The calendar day's posts\n */\nexport const useDayPosts = (posts, date) => {\n\tlet dayPosts = [];\n\tif (posts) {\n\t\tposts.forEach((post) => {\n\t\t\tif (isSameDay(date, new Date(post.post_date))) {\n\t\t\t\tdayPosts.push(post);\n\t\t\t}\n\t\t});\n\t}\n\n\treturn dayPosts;\n};\n\n/**\n * Retrieves 'scheduled' posts from the server\n * @param {Date} start The range's start\n * @param {Date} end The range's end\n * @returns {boolean} The current loading state\n */\nexport const useFetchScheduledPosts = (start, end) => {\n\tconst {\n\t\tposts: { refetch },\n\t\tpostsDispatch,\n\t} = useContext(PostsContext);\n\tconst [isLoading, setIsLoading] = useState(false);\n\n\tuseEffect(() => {\n\t\tif (start !== null && end !== null) {\n\t\t\tlet startDate = format(start, dateFormat.date);\n\t\t\tlet endDate = format(end, dateFormat.date);\n\t\t\tlet url = `${routeBase}/posts/scheduled/${startDate}/${endDate}`;\n\n\t\t\tconst fetchData = async () => {\n\t\t\t\tsetIsLoading(true);\n\n\t\t\t\ttry {\n\t\t\t\t\tconst res = await fetch(url, {\n\t\t\t\t\t\theaders,\n\t\t\t\t\t});\n\t\t\t\t\tconst data = await res.json();\n\n\t\t\t\t\tpostsDispatch({\n\t\t\t\t\t\ttype: \"SET_SCHEDULED\",\n\t\t\t\t\t\tposts: data.posts,\n\t\t\t\t\t\tstart: data.dateRange.start,\n\t\t\t\t\t\tend: data.dateRange.end,\n\t\t\t\t\t});\n\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.log(\"REST error\", error.message);\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tfetchData();\n\n\t\t\treturn () => {\n\t\t\t\tsetIsLoading(false);\n\t\t\t};\n\t\t}\n\t}, [start, end, refetch, postsDispatch]);\n\n\treturn isLoading;\n};\n\n/**\n * Retrieves 'unscheduled' posts from the server\n *\n * @returns {boolean} The current loading state\n */\nexport const useFetchUnscheduledPosts = () => {\n\tconst {\n\t\tposts: { refetch },\n\t\tpostsDispatch,\n\t} = useContext(PostsContext);\n\tconst [isLoading, setIsLoading] = useState(false);\n\n\tuseEffect(() => {\n\t\tlet url = `${routeBase}/posts/unscheduled`;\n\n\t\tconst fetchData = async () => {\n\t\t\tsetIsLoading(true);\n\n\t\t\ttry {\n\t\t\t\tconst res = await fetch(url, {\n\t\t\t\t\theaders,\n\t\t\t\t});\n\t\t\t\tconst data = await res.json();\n\n\t\t\t\tpostsDispatch({\n\t\t\t\t\ttype: \"SET_UNSCHEDULED\",\n\t\t\t\t\tposts: data.posts,\n\t\t\t\t\tunscheduled: true,\n\t\t\t\t});\n\n\t\t\t\tsetIsLoading(false);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.log(\"REST error\", error.message);\n\t\t\t\tsetIsLoading(false);\n\t\t\t}\n\t\t};\n\n\t\tfetchData();\n\n\t\treturn () => {\n\t\t\tsetIsLoading(false);\n\t\t};\n\t}, [postsDispatch, refetch]);\n\n\treturn isLoading;\n};\n\n/**\n * Retrieves the set of post statuses from the server\n *\n * @returns {boolean} The current loading state\n */\nexport const useFetchPostStatuses = () => {\n\tconst [isLoading, setIsLoading] = useState(false);\n\tconst { viewOptionsDispatch } = useContext(ViewContext);\n\n\tuseEffect(() => {\n\t\tlet url = `${routeBase}/statuses`;\n\n\t\tconst fetchData = async () => {\n\t\t\tsetIsLoading(true);\n\n\t\t\ttry {\n\t\t\t\tconst res = await fetch(url, {\n\t\t\t\t\theaders,\n\t\t\t\t});\n\t\t\t\tconst data = await res.json();\n\n\t\t\t\tviewOptionsDispatch({\n\t\t\t\t\ttype: \"SET_POST_STATUSES\",\n\t\t\t\t\tpostStatuses: data,\n\t\t\t\t});\n\n\t\t\t\tsetIsLoading(false);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.log(\"REST error\", error.message);\n\t\t\t\tsetIsLoading(false);\n\t\t\t}\n\t\t};\n\n\t\tfetchData();\n\n\t\treturn () => {\n\t\t\tsetIsLoading(false);\n\t\t};\n\t}, [viewOptionsDispatch]);\n\n\treturn isLoading;\n};\n\n/**\n * Retrieves all terms of a taxonomy\n *\n * @param {string} name The taxonomy name (slug) to fetch\n * @returns {boolean} The current loading state\n */\nexport const useFetchTaxonomyTerms = (name) => {\n\tconst {\n\t\tposts: { taxonomies },\n\t\tpostsDispatch,\n\t} = useContext(PostsContext);\n\tconst [isLoading, setIsLoading] = useState(false);\n\n\tuseEffect(() => {\n\t\t// Only fetch categories if not already set\n\t\tif (isEmpty(taxonomies[name])) {\n\t\t\tlet url = `${routeBase}/tax/${name}`;\n\n\t\t\tconst fetchData = async () => {\n\t\t\t\tsetIsLoading(true);\n\n\t\t\t\ttry {\n\t\t\t\t\tconst res = await fetch(url, {\n\t\t\t\t\t\theaders,\n\t\t\t\t\t});\n\t\t\t\t\tconst data = await res.json();\n\n\t\t\t\t\tpostsDispatch({\n\t\t\t\t\t\ttype: \"SET_TAXONOMY_TERMS\",\n\t\t\t\t\t\tname,\n\t\t\t\t\t\ttaxonomy: data.taxonomy,\n\t\t\t\t\t\tterms: data.terms,\n\t\t\t\t\t});\n\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.log(\"REST error\", error.message);\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tfetchData();\n\n\t\t\treturn () => {\n\t\t\t\tsetIsLoading(false);\n\t\t\t};\n\t\t}\n\t}, [name, taxonomies, postsDispatch]);\n\n\treturn isLoading;\n};\n\n/**\n * Retrieves 'scheduled' posts from the server\n * @param {Object} ref The element's ref\n * @param {Function} end The handler function\n * @returns {void}\n */\nexport const useClickOutside = (ref, handler) => {\n\tuseEffect(() => {\n\t\tlet startedInside = false;\n\t\tlet startedWhenMounted = false;\n\n\t\tconst listener = (event) => {\n\t\t\t// Do nothing if `mousedown` or `touchstart` started inside ref element\n\t\t\tif (startedInside || !startedWhenMounted) return;\n\t\t\t// Do nothing if clicking ref's element or descendent elements\n\t\t\tif (!ref.current || ref.current.contains(event.target)) return;\n\n\t\t\thandler(event);\n\t\t};\n\n\t\tconst validateEventStart = (event) => {\n\t\t\tstartedWhenMounted = ref.current;\n\t\t\tstartedInside = ref.current && ref.current.contains(event.target);\n\t\t};\n\n\t\tdocument.addEventListener(\"mousedown\", validateEventStart);\n\t\tdocument.addEventListener(\"touchstart\", validateEventStart);\n\t\tdocument.addEventListener(\"click\", listener);\n\n\t\treturn () => {\n\t\t\tdocument.removeEventListener(\"mousedown\", validateEventStart);\n\t\t\tdocument.removeEventListener(\"touchstart\", validateEventStart);\n\t\t\tdocument.removeEventListener(\"click\", listener);\n\t\t};\n\t}, [ref, handler]);\n};\n","import React from \"react\";\nimport MainHeader from \"./MainHeader\";\nimport { useFetchPostStatuses } from \"../lib/hooks\";\nimport { wp } from \"../lib/utils\";\n\nexport default function Header({ handleTodayClick }) {\n\tuseFetchPostStatuses();\n\n\tconst { pluginUrl } = wp;\n\n\treturn (\n\t\t<header className=\"calendario__header\">\n\t\t\t<div className=\"calendario__header__content\">\n\t\t\t\t<div className=\"left\">\n\t\t\t\t\t<MainHeader handleTodayClick={handleTodayClick} />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"right\">\n\t\t\t\t\t<h1 className=\"calendario__title\">editorial calendar.io</h1>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref=\"https://roundhouse-designs.com\"\n\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tclassName=\"calendario__logo\"\n\t\t\t\t\t\t\tsrc={`${pluginUrl}rhd-logo.png`}\n\t\t\t\t\t\t\talt=\"Roundhouse Designs logo\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</header>\n\t);\n}\n","import { createContext } from \"react\";\n\nconst DragContext = createContext(null);\nexport default DragContext;\n\nexport function dragReducer(state, action) {\n\tswitch (action.type) {\n\t\tcase \"START\":\n\t\t\treturn {\n\t\t\t\tpost: action.post,\n\t\t\t\tisDragging: true,\n\t\t\t\tdraggedFrom:\n\t\t\t\t\taction.draggedFrom >= 0 ? action.draggedFrom : false,\n\t\t\t};\n\n\t\tcase \"DRAGGING_OVER_UNSCHEDULED\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tdraggedTo: action.draggedOver,\n\t\t\t\toverUnscheduled: true,\n\t\t\t};\n\n\t\tcase \"END\": {\n\t\t\treturn initialDrag;\n\t\t}\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n\nexport const initialDrag = {\n\tpost: {},\n\tisDragging: false,\n\tdraggedFrom: null,\n\tdraggedTo: null,\n\toverUnscheduled: false,\n};\n","import React, { forwardRef, useContext, useState } from \"react\";\nimport { dateFormat } from \"../lib/utils\";\nimport { format, isToday, isPast, isSameDay } from \"date-fns\";\n\nimport DragContext from \"../DragContext\";\n\nconst Day = forwardRef(({ day, monthName, children }, ref) => {\n\tconst [dragOver, setDragOver] = useState(false);\n\tconst {\n\t\tdraggedPost: {\n\t\t\tpost: { post_date },\n\t\t},\n\t} = useContext(DragContext);\n\tvar classes = [\"day\", \"col\", \"cell\"];\n\n\tconst handleDragOver = () => {\n\t\tif (isSameDay(day, post_date)) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetDragOver(true);\n\t};\n\n\tconst renderDay = () => {\n\t\tif (isToday(day)) {\n\t\t\tclasses.push(\"today\");\n\t\t}\n\n\t\tif (isPast(day) && !isToday(day)) {\n\t\t\tclasses.push(\"past\");\n\t\t}\n\n\t\tif (dragOver) {\n\t\t\tclasses.push(\"dragOver\");\n\t\t}\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={classes.join(\" \")}\n\t\t\t\tref={isToday(day) ? ref : null}\n\t\t\t\tonDragOver={handleDragOver}\n\t\t\t\tonDragLeave={() => setDragOver(false)}\n\t\t\t\tonDrop={() => setDragOver(false)}\n\t\t\t>\n\t\t\t\t{monthName ? <span className=\"month\">{monthName}</span> : \"\"}\n\t\t\t\t<span className=\"number\">{format(day, dateFormat.day)}</span>\n\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t);\n\t};\n\n\treturn renderDay();\n});\nexport default Day;\n","export const initialUpdateState = {\n\tupdateNow: false,\n\ttrash: false,\n\tparams: {},\n\tunscheduled: false,\n};\n\nexport function updateReducer(state, action) {\n\tswitch (action.type) {\n\t\tcase \"UPDATE\":\n\t\t\treturn {\n\t\t\t\tupdateNow: true,\n\t\t\t\tparams: action.params,\n\t\t\t\tunscheduled: action.unscheduled,\n\t\t\t};\n\n\t\tcase \"UPDATING\":\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tupdateNow: false,\n\t\t\t};\n\n\t\tcase \"TRASH\":\n\t\t\treturn {\n\t\t\t\ttrash: true,\n\t\t\t\tupdateNow: true,\n\t\t\t\tparams: action.params,\n\t\t\t};\n\n\t\tcase \"COMPLETE\":\n\t\t\treturn initialUpdateState;\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n","import React, { useReducer, useEffect, useContext } from \"react\";\nimport { updateReducer, initialUpdateState } from \"../lib/updatePost\";\n\nimport PostsContext from \"../PostsContext\";\n\nimport { wp } from \"../lib/utils\";\nimport { decode } from \"html-entities\";\n\nexport default function PostLinks({ post, className, unscheduled }) {\n\tconst { routeBase, user, nonce, DEBUG_MODE } = wp;\n\tconst { id, edit_link, view_link } = post;\n\tconst { postsDispatch } = useContext(PostsContext);\n\tconst [updatePost, updatePostDispatch] = useReducer(\n\t\tupdateReducer,\n\t\tinitialUpdateState\n\t);\n\n\t// Update the post\n\tuseEffect(() => {\n\t\tif (updatePost.updateNow === true && id !== \"undefined\") {\n\t\t\tupdatePostDispatch({\n\t\t\t\ttype: \"UPDATING\",\n\t\t\t});\n\n\t\t\tlet url = `${routeBase}/posts/`;\n\t\t\tif (updatePost.trash === true) {\n\t\t\t\turl += `trash/${id}/${user}`;\n\t\t\t} else {\n\t\t\t\turl += `update/${id}/${user}`;\n\t\t\t}\n\n\t\t\tlet headers = {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t};\n\t\t\tif (DEBUG_MODE !== true) {\n\t\t\t\theaders[\"X-WP-Nonce\"] = nonce;\n\t\t\t}\n\n\t\t\tlet postData = {\n\t\t\t\tunscheduled: updatePost.unscheduled,\n\t\t\t};\n\n\t\t\tconst fetchData = async () => {\n\t\t\t\ttry {\n\t\t\t\t\tconst response = await fetch(url, {\n\t\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\t\theaders,\n\t\t\t\t\t\tbody: JSON.stringify(postData),\n\t\t\t\t\t});\n\t\t\t\t\t// const data = await response.json(); // If you need to catch the response...\n\t\t\t\t\tawait response.json();\n\n\t\t\t\t\tupdatePostDispatch({\n\t\t\t\t\t\ttype: \"COMPLETE\",\n\t\t\t\t\t});\n\n\t\t\t\t\tpostsDispatch({\n\t\t\t\t\t\ttype: \"REFETCH\",\n\t\t\t\t\t});\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.log(error.message);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tfetchData();\n\t\t}\n\t}, [\n\t\tid,\n\t\tuser,\n\t\tnonce,\n\t\trouteBase,\n\t\tpostsDispatch,\n\t\tupdatePost.trash,\n\t\tupdatePost.params,\n\t\tupdatePost.updateNow,\n\t\tupdatePost.unscheduled,\n\t\tDEBUG_MODE,\n\t]);\n\n\tconst unschedulePost = (e) => {\n\t\te.preventDefault();\n\n\t\tupdatePostDispatch({\n\t\t\ttype: \"UPDATE\",\n\t\t\tparams: {},\n\t\t\tunscheduled: true,\n\t\t});\n\t};\n\n\tconst schedulePost = (e) => {\n\t\te.preventDefault();\n\n\t\tupdatePostDispatch({\n\t\t\ttype: \"UPDATE\",\n\t\t\tparams: {},\n\t\t\tunscheduled: false,\n\t\t});\n\t};\n\n\tconst trashPost = () => {\n\t\tupdatePostDispatch({\n\t\t\ttype: \"TRASH\",\n\t\t\tparams: {\n\t\t\t\tid: id,\n\t\t\t},\n\t\t});\n\t};\n\n\treturn (\n\t\t<div className={`postLinks ${className}`}>\n\t\t\t<button\n\t\t\t\tclassName=\"icon top left icon__view\"\n\t\t\t\tonClick={() => window.open(view_link, \"_blank\")}\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\trel=\"noreferrer\"\n\t\t\t\ttitle=\"View Post\"\n\t\t\t>\n\t\t\t\topen_in_new\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tclassName=\"icon top right icon__edit\"\n\t\t\t\tonClick={() => window.open(decode(edit_link), \"_blank\")}\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\trel=\"noreferrer\"\n\t\t\t\ttitle=\"Edit Post in a new tab\"\n\t\t\t>\n\t\t\t\tmode_edit\n\t\t\t</button>\n\t\t\t{unscheduled ? (\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"icon icon__schedule bottom right\"\n\t\t\t\t\tonClick={schedulePost}\n\t\t\t\t\ttitle=\"Schedule this post\"\n\t\t\t\t>\n\t\t\t\t\tevent_available\n\t\t\t\t</button>\n\t\t\t) : (\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"icon icon__unschedule bottom right\"\n\t\t\t\t\tonClick={unschedulePost}\n\t\t\t\t\ttitle=\"Unschedule this post\"\n\t\t\t\t>\n\t\t\t\t\tdrafts\n\t\t\t\t</button>\n\t\t\t)}\n\t\t\t<button\n\t\t\t\tclassName=\"icon icon__trash bottom left\"\n\t\t\t\tonClick={trashPost}\n\t\t\t\ttitle=\"Trash this post\"\n\t\t\t>\n\t\t\t\tdelete_forever\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n","import React, { useContext, useEffect, useState } from \"react\";\nimport PostLinks from \"./PostLinks\";\nimport { isEmpty } from \"lodash\";\nimport { isPast, isToday } from \"date-fns\";\nimport { decode } from \"html-entities\";\n\nimport PostsContext from \"../PostsContext\";\nimport DragContext from \"../DragContext\";\nimport ViewContext from \"../ViewContext\";\n\nexport default function Post({ post, index, unscheduled, allowDrag }) {\n\tconst {\n\t\tposts: { currentPost },\n\t\tpostsDispatch,\n\t} = useContext(PostsContext);\n\tconst {\n\t\tdraggedPost: { isDragging, draggedFrom, draggedTo },\n\t\tdraggedPostDispatch,\n\t} = useContext(DragContext);\n\tconst {\n\t\tviewOptions: { postStatuses },\n\t} = useContext(ViewContext);\n\n\tconst [date, setDate] = useState(new Date());\n\tconst [color, setColor] = useState(\"\");\n\n\tuseEffect(() => {\n\t\tsetDate(new Date(post.post_date));\n\n\t\treturn () => {\n\t\t\tsetDate(new Date());\n\t\t};\n\t}, [post.post_date]);\n\n\tuseEffect(() => {\n\t\tif (postStatuses === undefined || isEmpty(postStatuses)) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetColor(postStatuses[post.post_status].color);\n\n\t\treturn () => {\n\t\t\tsetColor(\"\");\n\t\t};\n\t}, [post.post_status, postStatuses]);\n\n\tconst handleDragStart = (e) => {\n\t\tlet draggingUnscheduled = e.currentTarget.parentNode.classList.contains(\n\t\t\t\"unscheduledDrafts\"\n\t\t)\n\t\t\t? true\n\t\t\t: false;\n\n\t\tdraggedPostDispatch({\n\t\t\ttype: \"START\",\n\t\t\tpost: post,\n\t\t\tdraggedFrom: draggingUnscheduled\n\t\t\t\t? Number(e.currentTarget.dataset.index)\n\t\t\t\t: false,\n\t\t});\n\t};\n\n\tconst handleDragEnd = () => draggedPostDispatch({ type: \"END\" });\n\n\tconst handleClick = (e) => {\n\t\t// Skip if clicking a QuickLink button\n\t\tif (e.target.classList.contains(\"icon\")) {\n\t\t\treturn;\n\t\t}\n\n\t\tpostsDispatch({\n\t\t\ttype: \"SET_CURRENTPOST\",\n\t\t\tpost: post,\n\t\t\tunscheduled,\n\t\t});\n\t};\n\n\tconst renderPost = () => {\n\t\tlet classes = [\n\t\t\t\"post\",\n\t\t\t`post-id-${post.id} status__${post.post_status}`,\n\t\t];\n\t\tif (isDragging) {\n\t\t\tif (draggedTo === Number(index)) {\n\t\t\t\tclasses.push(\"dropArea\");\n\n\t\t\t\tif (draggedFrom === false) {\n\t\t\t\t\tclasses.push(\"fromNowhere\");\n\t\t\t\t} else if (draggedFrom < draggedTo) {\n\t\t\t\t\tclasses.push(\"fromAbove\");\n\t\t\t\t} else if (draggedFrom > draggedTo) {\n\t\t\t\t\tclasses.push(\"fromBelow\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (draggedFrom === Number(index)) {\n\t\t\t\tclasses.push(\"dragging\");\n\t\t\t}\n\t\t}\n\n\t\tif (!isEmpty(currentPost) && currentPost.id === post.id) {\n\t\t\tclasses.push(\"currentPost\");\n\t\t}\n\n\t\treturn (\n\t\t\t<li\n\t\t\t\tid={post.id}\n\t\t\t\tclassName={classes.join(\" \")}\n\t\t\t\tstyle={\n\t\t\t\t\tunscheduled === false &&\n\t\t\t\t\tpostStatuses[post.post_status].visible === true\n\t\t\t\t\t\t? { visibility: \"visible\" }\n\t\t\t\t\t\t: unscheduled === true\n\t\t\t\t\t\t? { visibility: \"visible\" }\n\t\t\t\t\t\t: { visibility: \"hidden\" }\n\t\t\t\t}\n\t\t\t\tdata-index={index}\n\t\t\t\tdraggable={\n\t\t\t\t\tallowDrag === true || (!isToday(date) && !isPast(date))\n\t\t\t\t\t\t? true\n\t\t\t\t\t\t: false\n\t\t\t\t}\n\t\t\t\tonDragStart={handleDragStart}\n\t\t\t\tonDragEnd={handleDragEnd}\n\t\t\t\tonClick={handleClick}\n\t\t\t>\n\t\t\t\t<PostLinks\n\t\t\t\t\tclassName={isDragging ? \"disabled\" : \"active\"}\n\t\t\t\t\tpost={post}\n\t\t\t\t\tunscheduled={unscheduled}\n\t\t\t\t/>\n\t\t\t\t<p\n\t\t\t\t\tclassName=\"postData\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tbackgroundColor: color,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{decode(post.post_title, { scope: \"strict\" })}\n\t\t\t\t</p>\n\t\t\t</li>\n\t\t);\n\t};\n\n\treturn post && !isEmpty(postStatuses) ? renderPost() : null;\n}\n","import React from \"react\";\n\nexport default function Loading({ className }) {\n\treturn (\n\t\t<div className={`loadingOverlay ${className}`}>\n\t\t\t<div className=\"roller\">\n\t\t\t\t<div></div>\n\t\t\t\t<div></div>\n\t\t\t\t<div></div>\n\t\t\t\t<div></div>\n\t\t\t\t<div></div>\n\t\t\t\t<div></div>\n\t\t\t\t<div></div>\n\t\t\t\t<div></div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React, { useContext, useEffect, useReducer, useState } from \"react\";\nimport Post from \"./Post\";\nimport Loading from \"./common/Loading\";\nimport {\n\tdateFormat,\n\tfilterUnchangedParams,\n\twp,\n\tDEBUG_MODE,\n} from \"../lib/utils\";\nimport { updateReducer, initialUpdateState } from \"../lib/updatePost\";\nimport { format, getHours, getMinutes, setHours, setMinutes } from \"date-fns\";\nimport { isEmpty } from \"lodash\";\n\nimport PostsContext from \"../PostsContext\";\nimport DragContext from \"../DragContext\";\n\nexport default function PostList({\n\tposts,\n\tclassName,\n\tallowDrag,\n\tallowDrop,\n\tdate,\n\tloadingState,\n}) {\n\tconst { routeBase, user, nonce } = wp;\n\tconst {\n\t\tposts: { currentPost },\n\t\tpostsDispatch,\n\t} = useContext(PostsContext);\n\tconst {\n\t\tdraggedPost: { post, draggedTo, draggedFrom, overUnscheduled },\n\t\tdraggedPostDispatch,\n\t} = useContext(DragContext);\n\tconst [updatePost, updatePostDispatch] = useReducer(\n\t\tupdateReducer,\n\t\tinitialUpdateState\n\t);\n\tconst [isLoading, setIsLoading] = useState(false);\n\n\tuseEffect(() => {\n\t\tif (loadingState === undefined || loadingState === null) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetIsLoading(loadingState);\n\n\t\treturn () => {\n\t\t\tsetIsLoading(false);\n\t\t};\n\t}, [loadingState]);\n\n\t// Fire the update!\n\tuseEffect(() => {\n\t\tif (updatePost.updateNow === true && post.id !== \"undefined\") {\n\t\t\tupdatePostDispatch({\n\t\t\t\ttype: \"UPDATING\",\n\t\t\t});\n\n\t\t\tlet url = `${routeBase}/posts/update/${post.id}/${user}`;\n\n\t\t\tlet headers = {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t};\n\n\t\t\tif (DEBUG_MODE !== true) {\n\t\t\t\theaders[\"X-WP-Nonce\"] = nonce;\n\t\t\t}\n\n\t\t\tlet postData = {\n\t\t\t\tparams: filterUnchangedParams(updatePost.params, post),\n\t\t\t\tunscheduled: updatePost.unscheduled,\n\t\t\t};\n\n\t\t\tif (draggedTo !== null) {\n\t\t\t\tpostData.draggedTo = draggedTo;\n\t\t\t}\n\n\t\t\tif (isEmpty(postData)) {\n\t\t\t\treturn { data: \"Update not necessary.\", error: true };\n\t\t\t}\n\n\t\t\tconst fetchData = async () => {\n\t\t\t\tsetIsLoading(true);\n\n\t\t\t\ttry {\n\t\t\t\t\tconst response = await fetch(url, {\n\t\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\t\theaders,\n\t\t\t\t\t\tbody: JSON.stringify(postData),\n\t\t\t\t\t});\n\t\t\t\t\t// const data = await response.json(); // If you need to catch the response...\n\t\t\t\t\tawait response.json();\n\n\t\t\t\t\tpostsDispatch({\n\t\t\t\t\t\ttype: \"REFETCH\",\n\t\t\t\t\t});\n\t\t\t\t\tdraggedPostDispatch({\n\t\t\t\t\t\ttype: \"END\",\n\t\t\t\t\t});\n\t\t\t\t\tupdatePostDispatch({\n\t\t\t\t\t\ttype: \"COMPLETE\",\n\t\t\t\t\t});\n\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.log(error.message);\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tfetchData();\n\t\t}\n\t}, [\n\t\trouteBase,\n\t\tuser,\n\t\tnonce,\n\t\tupdatePost,\n\t\tdraggedTo,\n\t\tdraggedPostDispatch,\n\t\tpost,\n\t\tpostsDispatch,\n\t]);\n\n\tconst handleDragOver = (e) => {\n\t\te.preventDefault();\n\n\t\tif (\n\t\t\tallowDrag === false ||\n\t\t\t!e.currentTarget.classList.contains(\"unscheduledDrafts\")\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet overNow = Number(e.target.dataset.index);\n\t\tif (draggedFrom === overNow) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet draggedOver = Number.isNaN(overNow) ? false : overNow;\n\n\t\tif (draggedOver !== draggedTo) {\n\t\t\tif (draggedOver === false) {\n\t\t\t\tlet targetRect = e.currentTarget.getBoundingClientRect();\n\t\t\t\tlet mouseY = e.clientY - targetRect.top;\n\t\t\t\tconst listItems = e.currentTarget.childNodes;\n\t\t\t\tlet itemCount = listItems.length;\n\n\t\t\t\tif (listItems.length === 0 || mouseY < listItems[0].offsetTop) {\n\t\t\t\t\tdraggedOver = 0;\n\t\t\t\t} else if (mouseY >= listItems[itemCount - 1].offsetTop) {\n\t\t\t\t\tdraggedOver = itemCount;\n\t\t\t\t} else {\n\t\t\t\t\tdraggedOver = itemCount - 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdraggedPostDispatch({\n\t\t\t\ttype: \"DRAGGING_OVER_UNSCHEDULED\",\n\t\t\t\tdraggedOver,\n\t\t\t});\n\t\t}\n\t};\n\n\tconst handleDrop = () => {\n\t\tif (allowDrop !== false) {\n\t\t\tlet dropDate, time, post_date;\n\n\t\t\tif (date === false) {\n\t\t\t\tpost_date = format(post.post_date, dateFormat.dateTime);\n\t\t\t} else {\n\t\t\t\tdropDate = date;\n\t\t\t\ttime = {\n\t\t\t\t\th: getHours(post.post_date),\n\t\t\t\t\tm: getMinutes(post.post_date),\n\t\t\t\t};\n\t\t\t\tdropDate = setHours(dropDate, time.h);\n\t\t\t\tdropDate = setMinutes(dropDate, time.m);\n\n\t\t\t\tpost_date = format(dropDate, dateFormat.dateTime);\n\t\t\t}\n\n\t\t\tupdatePostDispatch({\n\t\t\t\ttype: \"UPDATE\",\n\t\t\t\tparams: {\n\t\t\t\t\tpost_date,\n\t\t\t\t},\n\t\t\t\tunscheduled: overUnscheduled,\n\t\t\t});\n\n\t\t\tif (currentPost.id === post.id) {\n\t\t\t\tpostsDispatch({\n\t\t\t\t\ttype: \"UPDATE_CURRENTPOST_FIELD\",\n\t\t\t\t\tfield: \"post_date\",\n\t\t\t\t\tvalue: date,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\tconst renderPostList = () => {\n\t\tlet listProps = {\n\t\t\tclassName: `postList ${className}`,\n\t\t\tonDragOver: handleDragOver,\n\t\t};\n\n\t\tif (allowDrop !== false) {\n\t\t\tlistProps.onDrop = handleDrop;\n\t\t} else {\n\t\t\tlistProps.className += \" dropDisabled\";\n\t\t}\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Loading className={isLoading ? \"active\" : null} />\n\t\t\t\t<ul {...listProps}>\n\t\t\t\t\t{posts.map((post, index) => (\n\t\t\t\t\t\t<Post\n\t\t\t\t\t\t\tpost={post}\n\t\t\t\t\t\t\tkey={post.id}\n\t\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\t\tunscheduled={date === false ? true : false}\n\t\t\t\t\t\t\tallowDrag={allowDrag}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t</>\n\t\t);\n\t};\n\n\treturn renderPostList();\n}\n","import React, { useContext } from \"react\";\n\nimport PostsContext from \"../../PostsContext\";\n\nexport default function NewPostButton({ day, unscheduled }) {\n\tconst { postsDispatch } = useContext(PostsContext);\n\n\tconst handleNewPost = (e) => {\n\t\te.preventDefault();\n\n\t\tpostsDispatch({\n\t\t\ttype: \"NEW_POST\",\n\t\t\tpost_date: day ? day : new Date(),\n\t\t\tunscheduled: unscheduled ? unscheduled : false,\n\t\t});\n\t};\n\n\treturn (\n\t\t<button className=\"icon newPost\" onClick={handleNewPost}>\n\t\t\tadd_circle\n\t\t</button>\n\t);\n}\n","import React from \"react\";\nimport PostList from \"./PostList\";\nimport NewPostButton from \"./common/NewPostButton\";\nimport { useDayPosts } from \"../lib/hooks\";\n\nexport default function DayPosts({\n\tposts,\n\tdate,\n\tallowDrag,\n\tallowDrop,\n\ttitle,\n\tloadingState,\n}) {\n\tconst dayPosts = useDayPosts(posts, date);\n\n\tconst renderPostList = () => {\n\t\tlet listProps = {\n\t\t\tclassName: \"dayPosts\", // make this a prop/change conditionally\n\t\t\tdate: date,\n\t\t\tposts: dayPosts,\n\t\t\tallowDrop: true,\n\t\t\tloadingState,\n\t\t};\n\n\t\t// Drag control\n\t\tif (allowDrag !== \"undefined\" && allowDrag !== null) {\n\t\t\tlistProps.allowDrag = allowDrag;\n\t\t}\n\n\t\t// Drop control\n\t\tlistProps.allowDrop = allowDrop !== false ? true : false;\n\n\t\tconst renderList = (\n\t\t\t<>\n\t\t\t\t<NewPostButton day={date} unscheduled={false} />\n\t\t\t\t<PostList {...listProps} />\n\t\t\t</>\n\t\t);\n\n\t\tif (title) {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<h4 className=\"title\">{title}</h4>\n\t\t\t\t\t{renderList}\n\t\t\t\t</>\n\t\t\t);\n\t\t} else {\n\t\t\treturn renderList;\n\t\t}\n\t};\n\n\treturn renderPostList();\n}\n","import React, { useContext, useEffect, useCallback } from \"react\";\nimport Day from \"./Day\";\nimport DayPosts from \"./DayPosts\";\nimport { useFetchScheduledPosts } from \"../lib/hooks\";\nimport { dateFormat } from \"../lib/utils\";\nimport {\n\tformat,\n\taddDays,\n\tstartOfWeek,\n\tisFirstDayOfMonth,\n\tisToday,\n} from \"date-fns\";\n\n\nimport PostsContext from \"../PostsContext\";\nimport ViewContext from \"../ViewContext\";\n\nexport default function Calendar({ className, todayRef }) {\n\tconst {\n\t\tposts: { scheduled },\n\t\tpostsDispatch,\n\t} = useContext(PostsContext);\n\tconst {\n\t\tviewOptions: { viewRange },\n\t} = useContext(ViewContext);\n\n\tuseEffect(() => {\n\t\tpostsDispatch({\n\t\t\ttype: \"REFETCH\",\n\t\t});\n\t}, [postsDispatch]);\n\n\tuseFetchScheduledPosts(viewRange.start, viewRange.end);\n\n\tconst renderDaysHeaderRow = useCallback(() => {\n\t\tconst days = [];\n\n\t\tlet startDate = startOfWeek(viewRange.start);\n\n\t\tfor (let i = 0; i < 7; i++) {\n\t\t\tdays.push(\n\t\t\t\t<div className=\"col col__center\" key={i}>\n\t\t\t\t\t{format(addDays(startDate, i), dateFormat.dayName)}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\treturn <div className=\"days row\">{days}</div>;\n\t}, [viewRange.start]);\n\n\tconst renderDays = useCallback(() => {\n\t\tconst rows = [];\n\n\t\tlet days = [];\n\t\tlet day = viewRange.start;\n\t\tlet firstCalendarDay = true;\n\n\t\twhile (day <= viewRange.end) {\n\t\t\tfor (let i = 0; i < 7; i++) {\n\t\t\t\tconst dayIsFirstDay =\n\t\t\t\t\tisFirstDayOfMonth(day) || firstCalendarDay;\n\n\t\t\t\tdays.push(\n\t\t\t\t\t<Day\n\t\t\t\t\t\tkey={day}\n\t\t\t\t\t\tref={isToday(day) ? todayRef : null}\n\t\t\t\t\t\tday={day}\n\t\t\t\t\t\tmonthName={\n\t\t\t\t\t\t\tdayIsFirstDay\n\t\t\t\t\t\t\t\t? format(day, dateFormat.monthShort)\n\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<DayPosts\n\t\t\t\t\t\t\tdate={day}\n\t\t\t\t\t\t\tposts={scheduled}\n\t\t\t\t\t\t\tallowDrag={true}\n\t\t\t\t\t\t\trenderEmpty={true}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Day>\n\t\t\t\t);\n\n\t\t\t\tfirstCalendarDay = false;\n\t\t\t\tday = addDays(day, 1);\n\t\t\t}\n\n\t\t\trows.push(\n\t\t\t\t<div className=\"row\" key={day}>\n\t\t\t\t\t{days}\n\t\t\t\t</div>\n\t\t\t);\n\t\t\tdays = [];\n\t\t}\n\t\treturn <div className=\"body\">{rows}</div>;\n\t}, [viewRange.end, viewRange.start, scheduled, todayRef]);\n\n\tconst renderCalendar = () => {\n\t\treturn (\n\t\t\t<div className=\"view__calendar__inner\">\n\t\t\t\t{renderDaysHeaderRow()}\n\t\t\t\t{renderDays()}\n\t\t\t</div>\n\t\t);\n\t};\n\n\treturn (\n\t\t<div className={className}>\n\t\t\t{viewRange.start !== null && viewRange.end !== null\n\t\t\t\t? renderCalendar()\n\t\t\t\t: null}\n\t\t</div>\n\t);\n}\n","import React, { useContext, useEffect } from \"react\";\nimport DayPosts from \"./DayPosts\";\nimport { dateFormat } from \"../lib/utils\";\nimport { format, addDays, endOfDay, isToday, isPast } from \"date-fns\";\n\nimport { useFetchScheduledPosts } from \"../lib/hooks\";\n\nimport PostsContext from \"../PostsContext\";\nimport ViewContext from \"../ViewContext\";\n\nexport default function List({ className }) {\n\tconst {\n\t\tposts: { scheduled },\n\t\tpostsDispatch,\n\t} = useContext(PostsContext);\n\n\tconst {\n\t\tviewOptions: {\n\t\t\tviewRange: { start, end },\n\t\t},\n\t} = useContext(ViewContext);\n\n\tuseEffect(() => {\n\t\tpostsDispatch({\n\t\t\ttype: \"REFETCH\",\n\t\t});\n\t}, [postsDispatch]);\n\n\tuseFetchScheduledPosts(start, end);\n\n\tconst renderDays = () => {\n\t\tlet days = [];\n\t\tlet day = start;\n\t\tlet classes = [\"listDay\"];\n\n\t\tif (end !== \"undefined\" && end !== null) {\n\t\t\twhile (endOfDay(day) <= endOfDay(end)) {\n\t\t\t\tif (isToday(day)) {\n\t\t\t\t\tclasses.push(\"today\");\n\t\t\t\t}\n\t\t\t\tif (isPast(day) && !isToday(day)) {\n\t\t\t\t\tclasses.push(\"past\");\n\t\t\t\t}\n\t\t\t\tdays.push(\n\t\t\t\t\t<li key={day} className={classes.join(\" \")}>\n\t\t\t\t\t\t<DayPosts\n\t\t\t\t\t\t\tdate={day}\n\t\t\t\t\t\t\tposts={scheduled}\n\t\t\t\t\t\t\tallowDrag={true}\n\t\t\t\t\t\t\ttitle={format(day, dateFormat.fullDate)}\n\t\t\t\t\t\t\tnewPostButton={true}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</li>\n\t\t\t\t);\n\n\t\t\t\tday = addDays(day, 1);\n\t\t\t}\n\t\t}\n\n\t\treturn days;\n\t};\n\n\tconst renderList = () => {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div className=\"view__list__days\">\n\t\t\t\t\t<ul>{renderDays()}</ul>\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t};\n\n\treturn (\n\t\t<div className={className}>\n\t\t\t{start !== null && end !== null ? renderList() : null}\n\t\t</div>\n\t);\n}\n","import React from \"react\";\n\nexport default function FieldGroup({ name, label, inlineLabel, children }) {\n\tconst renderInput = () => {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={`fieldGroup fieldGroup__${name} ${\n\t\t\t\t\tinlineLabel ? \"inlineLabel\" : \"\"\n\t\t\t\t}`}\n\t\t\t>\n\t\t\t\t{label ? <label htmlFor={name}>{label}</label> : null}\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t);\n\t};\n\n\treturn renderInput();\n}\n","import React, {\n\tuseContext,\n\tuseRef,\n\tuseEffect,\n\tuseState,\n\tuseReducer,\n\tuseCallback,\n} from \"react\";\nimport FieldGroup from \"./common/FieldGroup\";\nimport { updateReducer, initialUpdateState } from \"../lib/updatePost\";\nimport { useClickOutside } from \"../lib/hooks\";\nimport {\n\tdateFormat,\n\tfilterStatusList,\n\twp,\n\tfilterUnchangedParams,\n\tDEBUG_MODE,\n} from \"../lib/utils\";\nimport DatePicker from \"react-datepicker\";\nimport { format, isFuture, isPast, isToday } from \"date-fns\";\nimport { isEmpty } from \"lodash\";\nimport { decode } from \"html-entities\";\n\nimport PostsContext from \"../PostsContext\";\nimport ViewContext from \"../ViewContext\";\nimport DragContext from \"../DragContext\";\n\nconst initialEditPost = {\n\tpost: {},\n\teditMode: false,\n};\n\nfunction editPostReducer(state, action) {\n\tswitch (action.type) {\n\t\tcase \"SET\":\n\t\t\treturn {\n\t\t\t\tpost: action.post,\n\t\t\t\teditMode: true,\n\t\t\t};\n\n\t\tcase \"EDIT\":\n\t\t\tconst { field } = action;\n\t\t\tvar { value } = action;\n\n\t\t\tif (field === \"post_date\") {\n\t\t\t\tvalue = new Date(value);\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tpost: {\n\t\t\t\t\t...state.post,\n\t\t\t\t\t[field]: value,\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase \"TOGGLE_TAXONOMY\":\n\t\t\tconst term_id = parseInt(action.term_id);\n\t\t\tconst index = state.post.taxonomies.hasOwnProperty(action.taxonomy)\n\t\t\t\t? state.post.taxonomies[action.taxonomy].indexOf(term_id)\n\t\t\t\t: false;\n\t\t\tlet termList =\n\t\t\t\tindex === -1\n\t\t\t\t\t? [...state.post.taxonomies[action.taxonomy], term_id]\n\t\t\t\t\t: index === false\n\t\t\t\t\t? [term_id]\n\t\t\t\t\t: [\n\t\t\t\t\t\t\t...state.post.taxonomies[action.taxonomy].slice(\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\tindex\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t...state.post.taxonomies[action.taxonomy].slice(\n\t\t\t\t\t\t\t\tindex + 1\n\t\t\t\t\t\t\t),\n\t\t\t\t\t  ];\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tpost: {\n\t\t\t\t\t...state.post,\n\t\t\t\t\ttaxonomies: {\n\t\t\t\t\t\t...state.post.taxonomies,\n\t\t\t\t\t\t[action.taxonomy]: termList,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\n\t\tcase \"CLEAR\":\n\t\t\treturn initialEditPost;\n\n\t\tdefault:\n\t\t\treturn { state };\n\t}\n}\n\nexport default function EditPost() {\n\tconst { routeBase, user, nonce } = wp;\n\tconst {\n\t\tviewOptions: { postStatuses },\n\t} = useContext(ViewContext);\n\tconst {\n\t\tposts: { currentPost, taxonomies },\n\t\tpostsDispatch,\n\t} = useContext(PostsContext);\n\tconst { draggedPostDispatch } = useContext(DragContext);\n\tconst [editPost, editPostDispatch] = useReducer(\n\t\teditPostReducer,\n\t\tinitialEditPost\n\t);\n\tconst [updatePost, updatePostDispatch] = useReducer(\n\t\tupdateReducer,\n\t\tinitialUpdateState\n\t);\n\tconst node = useRef();\n\tconst [date, setDate] = useState(new Date());\n\tconst [allowedStatuses, setAllowedStatuses] = useState({});\n\tconst [datePickerDisabled, setDatePickerDisabled] = useState(false);\n\tconst [trashPostClicked, setTrashPostClicked] = useState(false);\n\n\tconst { post, editMode } = editPost;\n\n\tuseEffect(() => {\n\t\tif (post.post_date && post.post_date !== \"undefined\") {\n\t\t\tsetDate(new Date(post.post_date));\n\t\t}\n\n\t\treturn () => {\n\t\t\tsetDate(new Date());\n\t\t};\n\t}, [post.post_date]);\n\n\tuseEffect(() => {\n\t\tlet exclude = [];\n\n\t\tif (post.unscheduled === true) {\n\t\t\texclude.push(\"publish\", \"future\", \"pending\");\n\t\t} else if (isFuture(date)) {\n\t\t\texclude.push(\"publish\");\n\t\t} else if (isPast(date)) {\n\t\t\texclude.push(\"future\");\n\t\t}\n\n\t\tconst statusList = filterStatusList(postStatuses, exclude);\n\n\t\tsetAllowedStatuses(statusList);\n\n\t\treturn () => {\n\t\t\tsetAllowedStatuses({});\n\t\t};\n\t}, [date, post.unscheduled, postStatuses]);\n\n\tuseEffect(() => {\n\t\tsetDatePickerDisabled(\n\t\t\tcurrentPost.post_date &&\n\t\t\t\t(isToday(currentPost.post_date) ||\n\t\t\t\t\tisPast(currentPost.post_date)) &&\n\t\t\t\tcurrentPost.post_status === \"publish\"\n\t\t\t\t? true\n\t\t\t\t: false\n\t\t);\n\n\t\treturn () => {\n\t\t\tsetDatePickerDisabled(false);\n\t\t};\n\t}, [currentPost.post_date, currentPost.post_status]);\n\n\t// Update the post\n\tuseEffect(() => {\n\t\tif (updatePost.updateNow === true && currentPost.id !== \"undefined\") {\n\t\t\tupdatePostDispatch({\n\t\t\t\ttype: \"UPDATING\",\n\t\t\t});\n\n\t\t\t// Check if this is a new post and set the proper URL\n\t\t\tlet url = `${routeBase}/posts/`;\n\t\t\tif (updatePost.trash === true) {\n\t\t\t\turl += `trash/${currentPost.id}/${user}`;\n\t\t\t} else {\n\t\t\t\tif (currentPost.id === 0) {\n\t\t\t\t\turl += `new/${user}`;\n\t\t\t\t} else {\n\t\t\t\t\turl += `update/${currentPost.id}/${user}`;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet headers = {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t};\n\t\t\tif (DEBUG_MODE !== true) {\n\t\t\t\theaders[\"X-WP-Nonce\"] = nonce;\n\t\t\t}\n\n\t\t\tlet postData = {\n\t\t\t\tparams: filterUnchangedParams(updatePost.params, currentPost),\n\t\t\t\tunscheduled: updatePost.unscheduled,\n\t\t\t};\n\n\t\t\tif (isEmpty(postData.params)) {\n\t\t\t\treturn { data: \"Update not necessary.\", error: true };\n\t\t\t}\n\n\t\t\tconst fetchData = async () => {\n\t\t\t\ttry {\n\t\t\t\t\tconst response = await fetch(url, {\n\t\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\t\theaders,\n\t\t\t\t\t\tbody: JSON.stringify(postData),\n\t\t\t\t\t});\n\t\t\t\t\t// const data = await response.json(); // If you need to catch the response...\n\t\t\t\t\tawait response.json();\n\n\t\t\t\t\tdraggedPostDispatch({\n\t\t\t\t\t\ttype: \"END\",\n\t\t\t\t\t});\n\n\t\t\t\t\tupdatePostDispatch({\n\t\t\t\t\t\ttype: \"COMPLETE\",\n\t\t\t\t\t});\n\n\t\t\t\t\tpostsDispatch({\n\t\t\t\t\t\ttype: \"SET_CURRENTPOST\",\n\t\t\t\t\t\tpost: post,\n\t\t\t\t\t\tunscheduled: post.unscheduled,\n\t\t\t\t\t});\n\n\t\t\t\t\tpostsDispatch({\n\t\t\t\t\t\ttype: \"REFETCH\",\n\t\t\t\t\t});\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.log(error.message);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tfetchData();\n\t\t}\n\t}, [\n\t\tcurrentPost,\n\t\trouteBase,\n\t\tpost,\n\t\tuser,\n\t\tnonce,\n\t\tdraggedPostDispatch,\n\t\tpostsDispatch,\n\t\tupdatePost.trash,\n\t\tupdatePost.params,\n\t\tupdatePost.updateNow,\n\t\tupdatePost.unscheduled,\n\t]);\n\n\tuseEffect(() => {\n\t\tif (currentPost.id > 0 || currentPost.id === 0) {\n\t\t\teditPostDispatch({\n\t\t\t\ttype: \"SET\",\n\t\t\t\tpost: currentPost,\n\t\t\t});\n\t\t}\n\n\t\treturn () => {\n\t\t\teditPostDispatch({\n\t\t\t\ttype: \"CLEAR\",\n\t\t\t});\n\t\t};\n\t}, [currentPost.id, currentPost]);\n\n\tconst closeModal = useCallback(() => {\n\t\teditPostDispatch({\n\t\t\ttype: \"CLEAR\",\n\t\t});\n\n\t\tpostsDispatch({\n\t\t\ttype: \"UNSET_CURRENTPOST\",\n\t\t});\n\t}, [editPostDispatch, postsDispatch]);\n\n\tconst handleSubmit = (e) => {\n\t\te.preventDefault();\n\n\t\tupdatePostDispatch({\n\t\t\ttype: \"UPDATE\",\n\t\t\tparams: {\n\t\t\t\tpost_title: post.post_title,\n\t\t\t\tpost_date: format(\n\t\t\t\t\tnew Date(post.post_date),\n\t\t\t\t\tdateFormat.dateTime\n\t\t\t\t),\n\t\t\t\tpost_status: post.post_status,\n\t\t\t\tpost_excerpt: post.post_excerpt,\n\t\t\t\ttaxonomies: post.taxonomies,\n\t\t\t},\n\t\t\tunscheduled: post.unscheduled,\n\t\t});\n\n\t\teditPostDispatch({\n\t\t\ttype: \"CLEAR\",\n\t\t});\n\t};\n\n\tconst trashHandler = () => {\n\t\tupdatePostDispatch({\n\t\t\ttype: \"TRASH\",\n\t\t\tparams: {\n\t\t\t\tid: post.id,\n\t\t\t},\n\t\t});\n\n\t\teditPostDispatch({\n\t\t\ttype: \"CLEAR\",\n\t\t});\n\n\t\tsetTrashPostClicked(false);\n\t};\n\n\tconst cancelHandler = () => {\n\t\teditPostDispatch({ type: \"CLEAR\" });\n\t\tpostsDispatch({\n\t\t\ttype: \"UNSET_CURRENTPOST\",\n\t\t});\n\t};\n\n\tconst handleInputChange = (e) => {\n\t\teditPostDispatch({\n\t\t\ttype: \"EDIT\",\n\t\t\tfield: e.target.name,\n\t\t\tvalue: e.target.value,\n\t\t});\n\t};\n\n\tconst handleCheckboxToggle = (e) => {\n\t\teditPostDispatch({\n\t\t\ttype: \"EDIT\",\n\t\t\tfield: e.target.name,\n\t\t\tvalue: !post[e.target.name],\n\t\t});\n\t};\n\n\tconst handleTermCheckboxChange = (e) => {\n\t\teditPostDispatch({\n\t\t\ttype: \"TOGGLE_TAXONOMY\",\n\t\t\ttaxonomy: e.target.name,\n\t\t\tterm_id: e.target.value,\n\t\t});\n\t};\n\n\tconst handleInputDateChange = (date) => {\n\t\tif (date === null) {\n\t\t\tdate = new Date();\n\t\t}\n\n\t\teditPostDispatch({\n\t\t\ttype: \"EDIT\",\n\t\t\tfield: \"post_date\",\n\t\t\tvalue: date,\n\t\t});\n\t};\n\n\tconst renderStatusOptions = (statusList) => {\n\t\treturn Object.keys(statusList).map((status) => (\n\t\t\t<option key={status} value={status}>\n\t\t\t\t{statusList[status].name}\n\t\t\t</option>\n\t\t));\n\t};\n\n\tuseClickOutside(node, closeModal);\n\n\treturn (\n\t\t<div className={`editPost ${editMode ? \"active\" : \"inactive\"}`}>\n\t\t\t<div className=\"editPost__container\">\n\t\t\t\t{editMode ? (\n\t\t\t\t\t<div ref={node} className=\"editPost__editor\">\n\t\t\t\t\t\t<button className=\"close icon\" onClick={closeModal}>\n\t\t\t\t\t\t\thighlight_off\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<h3 className=\"title\">\n\t\t\t\t\t\t\t{post.id === 0 ? \"New\" : \"Edit\"} Post\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t<form\n\t\t\t\t\t\t\tclassName=\"editPost__editor__form\"\n\t\t\t\t\t\t\tonSubmit={handleSubmit}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<FieldGroup name=\"post_title\" label=\"Title\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tname=\"post_title\"\n\t\t\t\t\t\t\t\t\tvalue={decode(post.post_title, {\n\t\t\t\t\t\t\t\t\t\tscope: \"strict\",\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldGroup>\n\n\t\t\t\t\t\t\t<FieldGroup name=\"date_status\">\n\t\t\t\t\t\t\t\t<div className=\"fieldGroup__date\">\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={`post_date ${\n\t\t\t\t\t\t\t\t\t\t\tpost.unscheduled === true\n\t\t\t\t\t\t\t\t\t\t\t\t? \"inactive\"\n\t\t\t\t\t\t\t\t\t\t\t\t: \"active\"\n\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"post_date\">\n\t\t\t\t\t\t\t\t\t\t\tPost Date\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t<DatePicker\n\t\t\t\t\t\t\t\t\t\t\tcloseOnScroll={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\te.target === document\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tselected={date}\n\t\t\t\t\t\t\t\t\t\t\ttimeInputLabel=\"Time:\"\n\t\t\t\t\t\t\t\t\t\t\tshowTimeInput\n\t\t\t\t\t\t\t\t\t\t\tdateFormat={dateFormat.dateTime}\n\t\t\t\t\t\t\t\t\t\t\tonChange={handleInputDateChange}\n\t\t\t\t\t\t\t\t\t\t\tdisabled={datePickerDisabled}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"unscheduled\">\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\t\t\tname=\"unscheduled\"\n\t\t\t\t\t\t\t\t\t\t\tchecked={post.unscheduled}\n\t\t\t\t\t\t\t\t\t\t\tonChange={handleCheckboxToggle}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"unscheduled\">\n\t\t\t\t\t\t\t\t\t\t\tUnscheduled\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"fieldGroup__status\">\n\t\t\t\t\t\t\t\t\t<label htmlFor=\"post_status\">\n\t\t\t\t\t\t\t\t\t\tPost Status\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\t\tname=\"post_status\"\n\t\t\t\t\t\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t\t\t\t\t\t\tvalue={post.post_status}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{renderStatusOptions(allowedStatuses)}\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</FieldGroup>\n\n\t\t\t\t\t\t\t<FieldGroup name=\"taxonomies\">\n\t\t\t\t\t\t\t\t<label htmlFor=\"category\">\n\t\t\t\t\t\t\t\t\tCategories\n\t\t\t\t\t\t\t\t\t<fieldset name=\"category\">\n\t\t\t\t\t\t\t\t\t\t{taxonomies.category.terms.map(\n\t\t\t\t\t\t\t\t\t\t\t(term, index) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<label key={index}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"category\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={term.term_id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleTermCheckboxChange\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t!isEmpty(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpost.taxonomies\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t!isEmpty(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpost.taxonomies\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.category\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpost.taxonomies.category.includes(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tterm.term_id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{decode(term.name, {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tscope: \"strict\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</fieldset>\n\t\t\t\t\t\t\t\t</label>\n\n\t\t\t\t\t\t\t\t<label htmlFor=\"post_tag\">\n\t\t\t\t\t\t\t\t\tTags\n\t\t\t\t\t\t\t\t\t<fieldset name=\"post_tag\">\n\t\t\t\t\t\t\t\t\t\t{taxonomies.post_tag.terms.map(\n\t\t\t\t\t\t\t\t\t\t\t(term, index) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<label key={index}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"post_tag\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={term.term_id}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleTermCheckboxChange\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t!isEmpty(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpost.taxonomies\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t!isEmpty(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpost.taxonomies\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.post_tag\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpost.taxonomies.post_tag.includes(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tterm.term_id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{decode(term.name, {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tscope: \"strict\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</fieldset>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</FieldGroup>\n\n\t\t\t\t\t\t\t<FieldGroup name=\"post_excerpt\" label=\"Excerpt\">\n\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\tname=\"post_excerpt\"\n\t\t\t\t\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t\t\t\t\t\trows={4}\n\t\t\t\t\t\t\t\t\tvalue={decode(post.post_excerpt, {\n\t\t\t\t\t\t\t\t\t\tscope: \"strict\",\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FieldGroup>\n\n\t\t\t\t\t\t\t<div className=\"post_thumb\">\n\t\t\t\t\t\t\t\t{post.image ? (\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<span>Featured Image</span>\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\thref={decode(post.edit_link)}\n\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\tsrc={post.image}\n\t\t\t\t\t\t\t\t\t\t\t\talt={`${post.post_title}`}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"editPost__buttons\">\n\t\t\t\t\t\t\t\t{trashPostClicked === true ? (\n\t\t\t\t\t\t\t\t\t<div className=\"editPost__buttons__trash confirm\">\n\t\t\t\t\t\t\t\t\t\t<p style={{ fontWeight: \"bold\" }}>\n\t\t\t\t\t\t\t\t\t\t\tAre you sure you want to Trash this\n\t\t\t\t\t\t\t\t\t\t\tpost?\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={trashHandler}\n\t\t\t\t\t\t\t\t\t\t\tvalue=\"Yes\"\n\t\t\t\t\t\t\t\t\t\t\tautoFocus={true}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t{/* TODO bind ESC to cancel */}\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetTrashPostClicked(false)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tvalue=\"No\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"editPost__buttons__save\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\t\t\t\t\t\tpost.id === 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"Save\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"Update\"\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"editPost__buttons__cancel\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={cancelHandler}\n\t\t\t\t\t\t\t\t\t\t\tvalue=\"Cancel\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"editPost__buttons__trash\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetTrashPostClicked(true)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tvalue=\"Delete\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\t\t\t\t) : null}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React, { forwardRef, useContext } from \"react\";\nimport Calendar from \"./Calendar\";\nimport List from \"./List\";\nimport EditPost from \"./EditPost\";\nimport { useFetchTaxonomyTerms } from \"../lib/hooks\";\n\nimport ViewContext from \"../ViewContext\";\n\nconst Main = forwardRef(({ todayRef }, ref) => {\n\tconst {\n\t\tviewOptions: { viewMode },\n\t} = useContext(ViewContext);\n\n\tuseFetchTaxonomyTerms(\"category\");\n\tuseFetchTaxonomyTerms(\"post_tag\");\n\n\treturn (\n\t\t<main className=\"calendario__main\">\n\t\t\t<div className=\"view\" ref={ref}>\n\t\t\t\t{viewMode === \"calendar\" ? (\n\t\t\t\t\t<Calendar className=\"view__calendar\" todayRef={todayRef} />\n\t\t\t\t) : (\n\t\t\t\t\t<List className=\"view__list\" todayRef={todayRef} />\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<EditPost />\n\t\t</main>\n\t);\n});\nexport default Main;\n","import React from \"react\";\nimport { wp } from \"../lib/utils\";\n\nexport default function AdminLinks() {\n\tconst { blogUrl, trashUrl } = wp;\n\n\tconst renderLink = ([link, title, target]) => {\n\t\ttarget = target ? target : \"_self\";\n\n\t\treturn (\n\t\t\t<li>\n\t\t\t\t<a rel=\"noreferrer\" href={link} target={target}>\n\t\t\t\t\t{title} <span className=\"icon\">open_in_new</span>\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t);\n\t};\n\n\treturn (\n\t\t<ul className=\"adminLinks\">\n\t\t\t{renderLink([trashUrl, \"Trash\", \"_blank\"])}\n\t\t\t{renderLink([blogUrl, \"View Posts\", \"_blank\"])}\n\t\t</ul>\n\t);\n}\n","import React, { useContext, useEffect } from \"react\";\nimport PostList from \"./PostList\";\nimport AdminLinks from \"./AdminLinks\";\nimport NewPostButton from \"./common/NewPostButton\";\nimport { useFetchUnscheduledPosts } from \"../lib/hooks\";\n\nimport PostsContext from \"../PostsContext\";\n\nexport default function UnscheduledDrafts() {\n\tconst {\n\t\tposts: { unscheduled },\n\t\tpostsDispatch,\n\t} = useContext(PostsContext);\n\n\tuseEffect(() => {\n\t\tpostsDispatch({\n\t\t\ttype: \"REFETCH\",\n\t\t});\n\t}, [postsDispatch]);\n\n\tconst isLoading = useFetchUnscheduledPosts();\n\n\treturn (\n\t\t<>\n\t\t\t<PostList\n\t\t\t\tclassName=\"unscheduledDrafts\"\n\t\t\t\tdate={false}\n\t\t\t\tposts={unscheduled}\n\t\t\t\tallowDrag={true}\n\t\t\t\tloadingState={isLoading}\n\t\t\t/>\n\t\t\t<NewPostButton unscheduled={true} />\n\t\t\t<AdminLinks />\n\t\t</>\n\t);\n}\n","import React, {\n\tuseCallback,\n\tuseContext,\n\tuseEffect,\n\tuseRef,\n\tuseState,\n} from \"react\";\nimport { wp } from \"../../lib/utils\";\nimport { useClickOutside } from \"../../lib/hooks\";\n\nimport ViewContext from \"../../ViewContext\";\n\nimport { HexColorPicker } from \"react-colorful\";\n\nexport default function ColorPickerPopover({ color, name }) {\n\tconst { presetStatusColors } = wp;\n\tconst popover = useRef();\n\tconst previous = useRef(color);\n\tconst {\n\t\tviewOptions: { postStatuses },\n\t\tviewOptionsDispatch,\n\t} = useContext(ViewContext);\n\tconst [colorValue, setColorValue] = useState(\"\");\n\tconst [isOpen, setIsOpen] = useState(false);\n\n\tuseEffect(() => {\n\t\tif (popover.current === undefined && !color) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetColorValue(color);\n\t}, [color]);\n\n\tuseEffect(() => {\n\t\tif (\n\t\t\tpopover.current === undefined ||\n\t\t\tpostStatuses[name].color === colorValue ||\n\t\t\tprevious.current === colorValue\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tviewOptionsDispatch({\n\t\t\ttype: \"SET_POST_STATUS_COLOR\",\n\t\t\tpostStatus: name,\n\t\t\tcolor: colorValue,\n\t\t});\n\n\t\tprevious.current = colorValue;\n\t}, [colorValue, name, postStatuses, viewOptionsDispatch]);\n\n\tconst close = useCallback(() => setIsOpen(false), []);\n\tuseClickOutside(popover, close);\n\n\treturn (\n\t\t<div className=\"picker\">\n\t\t\t<div\n\t\t\t\tclassName=\"swatch\"\n\t\t\t\tstyle={{ backgroundColor: colorValue }}\n\t\t\t\tonClick={() => setIsOpen(true)}\n\t\t\t/>\n\n\t\t\t{isOpen && (\n\t\t\t\t<div className=\"popover\" ref={popover}>\n\t\t\t\t\t<HexColorPicker\n\t\t\t\t\t\tcolor={colorValue}\n\t\t\t\t\t\tonChange={setColorValue}\n\t\t\t\t\t\tname={name}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<div className=\"picker__swatches\">\n\t\t\t\t\t\t{presetStatusColors === undefined\n\t\t\t\t\t\t\t? null\n\t\t\t\t\t\t\t: presetStatusColors.map((color) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tkey={color}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"picker__swatch\"\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ background: color }}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => setColorValue(color)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t  })}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React from \"react\";\n\nexport default function ToggleButton({ selected, toggleSelected, name }) {\n\treturn (\n\t\t<div className=\"toggle\">\n\t\t\t<button\n\t\t\t\tname={name}\n\t\t\t\tclassName={`dialog-button ${selected ? \"\" : \"disabled\"}`}\n\t\t\t\tonClick={toggleSelected}\n\t\t\t>\n\t\t\t\t{selected ? \"ON\" : \"OFF\"}\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n","import React, { useContext, useEffect, useRef } from \"react\";\nimport ColorPickerPopover from \"./common/ColorPickerPopover\";\nimport ToggleButton from \"./common/ToggleButton\";\nimport { wp } from \"../lib/utils\";\nimport { isEmpty } from \"lodash\";\n\nimport ViewContext from \"../ViewContext\";\n\nexport default function StatusFilters() {\n\tconst { routeBase } = wp;\n\tconst firstUpdate = useRef(true);\n\tconst {\n\t\tviewOptions: { postStatuses },\n\t\tviewOptionsDispatch,\n\t} = useContext(ViewContext);\n\tconst keys = Object.keys(postStatuses);\n\n\t// Updates the server when the dispatch is updated (after debounce)\n\tuseEffect(() => {\n\t\tif (isEmpty(postStatuses)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (firstUpdate.current === true) {\n\t\t\tfirstUpdate.current = false;\n\t\t\treturn;\n\t\t}\n\n\t\t// update server\n\t\tlet url = `${routeBase}/statuses`;\n\n\t\tconst fetchData = async () => {\n\t\t\tlet colors = {};\n\t\t\tfor (let status in postStatuses) {\n\t\t\t\tcolors[status] = postStatuses[status].color;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tconst response = await fetch(url, {\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\t\t\tbody: JSON.stringify(colors),\n\t\t\t\t});\n\t\t\t\t// const data = await response.json(); // If you need to catch the response...\n\t\t\t\tawait response.json();\n\n\t\t\t\t// do something else?\n\t\t\t} catch (error) {\n\t\t\t\tconsole.log(error.message);\n\t\t\t}\n\t\t};\n\n\t\tfetchData();\n\t}, [firstUpdate, routeBase, postStatuses]);\n\n\tconst toggleStatus = (e) => {\n\t\tviewOptionsDispatch({\n\t\t\ttype: \"TOGGLE_POST_STATUS\",\n\t\t\tpostStatus: e.target.name,\n\t\t});\n\t};\n\n\tconst handleResetColors = () => {\n\t\tviewOptionsDispatch({\n\t\t\ttype: \"RESET_POST_STATUS_COLORS\",\n\t\t});\n\t};\n\n\treturn (\n\t\t<div className=\"statusFilters\">\n\t\t\t<ul className=\"filters\">\n\t\t\t\t{keys.map((status, index) => {\n\t\t\t\t\tconst { color, name } = postStatuses[status];\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tclassName={`filterItem status__${status}`}\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ColorPickerPopover color={color} name={status} />\n\t\t\t\t\t\t\t<span className=\"name\">{name}</span>\n\t\t\t\t\t\t\t<ToggleButton\n\t\t\t\t\t\t\t\tselected={\n\t\t\t\t\t\t\t\t\tpostStatuses[status].visible ? true : false\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\ttoggleSelected={toggleStatus}\n\t\t\t\t\t\t\t\tname={status}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</ul>\n\t\t\t<button className=\"reset\" onClick={handleResetColors}>\n\t\t\t\tReset Colors\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n","import React, { useEffect } from \"react\";\nimport UnscheduledDrafts from \"./UnscheduledDrafts\";\nimport StatusFilters from \"./StatusFilters\";\nimport { renderWidget } from \"../lib/utils\";\nimport { wp } from \"../lib/utils\";\n\nexport default function Sidebar() {\n\tconst { pluginUrl } = wp;\n\n\tuseEffect(() => {\n\t\tconsole.log(pluginUrl);\n\t});\n\n\treturn (\n\t\t<aside className=\"calendario__sidebar\">\n\t\t\t<div className=\"calendario__sidebar__inner\">\n\t\t\t\t{renderWidget(\n\t\t\t\t\t\"Unscheduled Drafts\",\n\t\t\t\t\t\"unscheduledDrafts\",\n\t\t\t\t\t<UnscheduledDrafts />\n\t\t\t\t)}\n\n\t\t\t\t{renderWidget(\n\t\t\t\t\t\"Post Status\",\n\t\t\t\t\t\"statusFilters\",\n\t\t\t\t\t<StatusFilters />\n\t\t\t\t)}\n\n\t\t\t\t{renderWidget(\n\t\t\t\t\t\"\",\n\t\t\t\t\t\"support\",\n\t\t\t\t\t<>\n\t\t\t\t\t\t<ul className=\"docs\">\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref=\"https://github.com/gaswirth/rhdwp-calendario\"\n\t\t\t\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tHelp + Documentation (dummy link)\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref=\"https://github.com/gaswirth/rhdwp-calendario\"\n\t\t\t\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tSupport (dummy link)\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tclassName=\"rhdLogo\"\n\t\t\t\t\t\t\thref=\"https://roundhouse-designs.com\"\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={`${pluginUrl}rhd-logo.png`}\n\t\t\t\t\t\t\t\talt=\"Roundhouse Designs logo\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</aside>\n\t);\n}\n","import React, { useEffect, useReducer, useRef } from \"react\";\nimport Header from \"./components/Header\";\nimport Main from \"./components/Main\";\nimport Sidebar from \"./components/Sidebar\";\nimport { useStickyState } from \"./lib/hooks\";\nimport { dateIsBetween } from \"./lib/utils\";\n\nimport PostsContext, { postsReducer, initialPosts } from \"./PostsContext\";\nimport DragContext, { dragReducer, initialDrag } from \"./DragContext\";\nimport ViewContext, { viewReducer, initialViewOptions } from \"./ViewContext\";\n\nimport \"react-datepicker/dist/react-datepicker.css\";\n\nexport default function App() {\n\tconst [posts, postsDispatch] = useReducer(postsReducer, initialPosts);\n\tconst [draggedPost, draggedPostDispatch] = useReducer(\n\t\tdragReducer,\n\t\tinitialDrag\n\t);\n\tconst [viewOptions, viewOptionsDispatch] = useReducer(\n\t\tviewReducer,\n\t\tinitialViewOptions\n\t);\n\tconst [view, setView] = useStickyState(\n\t\t{\n\t\t\tviewMode: \"calendar\",\n\t\t},\n\t\t\"viewOptions\"\n\t);\n\n\tconst todayRef = useRef();\n\tconst mainRef = useRef();\n\n\tuseEffect(() => {\n\t\t// Update the context initially\n\t\tviewOptionsDispatch({\n\t\t\ttype: \"UPDATE\",\n\t\t\tviewMode: view.viewMode,\n\t\t});\n\t\t//eslint-disable-next-line\n\t}, []);\n\n\tuseEffect(() => {\n\t\t// Store the values if it's updated elsewhere\n\t\tsetView({\n\t\t\tviewMode: viewOptions.viewMode,\n\t\t});\n\t}, [setView, viewOptions.viewMode]);\n\n\tfunction handleTodayClick() {\n\t\tconst today = new Date();\n\n\t\tif (\n\t\t\tdateIsBetween(\n\t\t\t\ttoday,\n\t\t\t\tviewOptions.viewRange.start,\n\t\t\t\tviewOptions.viewRange.end\n\t\t\t)\n\t\t) {\n\t\t\tmainRef.current.scroll({\n\t\t\t\ttop: todayRef.current.offsetTop,\n\t\t\t\tbehavior: \"smooth\",\n\t\t\t});\n\t\t} else {\n\t\t\tviewOptionsDispatch({\n\t\t\t\ttype: \"SET_RANGE_START\",\n\t\t\t\tdate: today,\n\t\t\t});\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className={`calendario`}>\n\t\t\t<ViewContext.Provider value={{ viewOptions, viewOptionsDispatch }}>\n\t\t\t\t<PostsContext.Provider value={{ posts, postsDispatch }}>\n\t\t\t\t\t<Header handleTodayClick={handleTodayClick} />\n\n\t\t\t\t\t<DragContext.Provider\n\t\t\t\t\t\tvalue={{ draggedPost, draggedPostDispatch }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Sidebar />\n\t\t\t\t\t\t<Main ref={mainRef} todayRef={todayRef} />\n\t\t\t\t\t</DragContext.Provider>\n\t\t\t\t</PostsContext.Provider>\n\t\t\t</ViewContext.Provider>\n\t\t</div>\n\t);\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./scss/index.scss\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nimport { DEBUG_MODE } from \"./lib/utils\";\n\nvar reactAppData, appAnchorElement;\nif (DEBUG_MODE !== true) {\n\t// live values\n\treactAppData = window.rhdReactPlugin || {};\n\tconst { appSelector } = reactAppData;\n\tappAnchorElement = document.querySelector(appSelector);\n} else {\n\t// Dev\n\tappAnchorElement = document.getElementById(\"root\");\n}\n\nif (appAnchorElement) {\n\tReactDOM.render(\n\t\t<React.StrictMode>\n\t\t\t<App />\n\t\t</React.StrictMode>,\n\t\tappAnchorElement\n\t);\n}\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}