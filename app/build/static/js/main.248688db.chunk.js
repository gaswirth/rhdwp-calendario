(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{171:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),s=a(21),r=a.n(s),o=(a(78),a(9)),i=a(15),u=a(2),l=a(0);function d(e){var t=e.title,a=e.className,c=e.children;return Object(l.jsxs)("div",{className:"widget ".concat(a),children:[t?Object(l.jsx)("h3",{className:"widgetTitle",children:t}):null,c]})}var j=a(13),b=Object(u.a)({},window.rhdReactPlugin),O="d",p="yyyy-MM-dd",h="yyyy-MM-dd h:mm aa",f="EEEE",v="MMM",m="EEEE,  MMMM dd, yyyy",x="MMMM dd, yyyy";function g(e,t){if(e.length>0){var a=function(a){Array.isArray(e[a])?e[a].length===t[a].length&&e[a].every((function(e,c){return e===t[a][c]})):e[a]===t[a]&&(e=Object(j.omit)(e,a))};for(var c in e)a(c)}return e}var _=function(e,t,a){return Object(l.jsx)(d,{title:e,className:"widget__".concat(t),children:a})},E=a(173),N=a(174),y=a(69),w=a(175),T=Object(c.createContext)({}),S={viewMode:"",viewRange:{start:null,end:null},postStatuses:{}},D=b.defaultStatusColors;function C(e,t){switch(t.type){case"UPDATE":return Object(u.a)(Object(u.a)({},e),{},{viewMode:t.viewMode?t.viewMode:e.viewMode,viewRange:t.viewRange?t.viewRange:e.viewRange});case"SET_RANGE":var a="list"!==e.viewMode?{start:Object(E.a)(t.start),end:Object(N.a)(t.end)}:{start:t.start,end:t.end};return Object(u.a)(Object(u.a)({},e),{},{viewRange:{start:a.start,end:a.end}});case"SET_RANGE_START":return Object(u.a)(Object(u.a)({},e),{},{viewRange:Object(u.a)(Object(u.a)({},e.viewRange),{},{start:"list"!==e.viewMode?Object(E.a)(t.date):t.date})});case"SET_RANGE_END":return Object(u.a)(Object(u.a)({},e),{},{viewRange:Object(u.a)(Object(u.a)({},e.viewRange),{},{end:"list"!==e.viewMode?Object(N.a)(t.date):t.date})});case"NEXT_MONTH":return Object(u.a)(Object(u.a)({},e),{},{viewRange:{start:Object(y.a)(e.viewRange.start,1),end:Object(y.a)(e.viewRange.end,1)}});case"PREV_MONTH":return Object(u.a)(Object(u.a)({},e),{},{viewRange:{start:Object(w.a)(e.viewRange.start,1),end:Object(w.a)(e.viewRange.end,1)}});case"SET_POST_STATUSES":var c=t.postStatuses;for(var n in c)c[n].visible=!("visible"in c[n])||c[n].visible;return Object(u.a)(Object(u.a)({},e),{},{postStatuses:c});case"TOGGLE_POST_STATUS":return Object(u.a)(Object(u.a)({},e),{},{postStatuses:Object(u.a)(Object(u.a)({},e.postStatuses),{},Object(i.a)({},t.postStatus,Object(u.a)(Object(u.a)({},e.postStatuses[t.postStatus]),{},{visible:!e.postStatuses[t.postStatus].visible})))});case"SET_POST_STATUS_COLOR":return Object(u.a)(Object(u.a)({},e),{},{postStatuses:Object(u.a)(Object(u.a)({},e.postStatuses),{},Object(i.a)({},t.postStatus,Object(u.a)(Object(u.a)({},e.postStatuses[t.postStatus]),{},{color:t.color})))});case"RESET_POST_STATUS_COLORS":for(var s=e.postStatuses,r=0,o=Object.keys(e.postStatuses);r<o.length;r++){var l=o[r];s[l].color=D[l]}return Object(u.a)(Object(u.a)({},e),{},{postStatuses:Object(u.a)({},s)});default:return e}}function R(){var e=Object(c.useContext)(T),t=e.viewOptions.viewMode,a=e.viewOptionsDispatch,n=function(e){a({type:"UPDATE",viewMode:e.target.value})};return Object(l.jsx)("div",{className:"viewOptions",children:Object(l.jsxs)("div",{className:"viewMode",children:[Object(l.jsx)("button",{onClick:n,className:"icon ".concat("calendar"===t?"active ":"inactive"),value:"calendar",title:"Calendar",children:"calendar_view_month"}),Object(l.jsx)("button",{name:"viewMode",onClick:n,className:"icon ".concat("list"===t?"active ":"inactive"),value:"list",title:"List",children:"view_list"})]})})}var P=a(24),k=a.n(P),A=a(176),U=a(177),M=a(178),L=a(179);function F(e){var t=e.handleTodayClick,a=Object(c.useContext)(T),n=a.viewOptions.viewRange,s=a.viewMode,r=a.viewOptionsDispatch,o=Object(A.a)(),i=Object(c.forwardRef)((function(e,t){var a=e.value,c=e.onClick;return Object(l.jsx)("button",{className:"viewRange__input",onClick:c,ref:t,children:a})}));Object(c.useEffect)((function(){n.start||n.end||r({type:"SET_RANGE",start:"calendar"===s?Object(U.a)(o):o,end:"calendar"===s?Object(M.a)():Object(L.a)(o,30)})}),[o,n.start,n.end,s,r]);return Object(l.jsxs)("div",{className:"calendarListHeader row flex-middle",children:[Object(l.jsx)("div",{className:"col col__start",children:Object(l.jsx)("button",{className:"icon dateChevron",onClick:function(e){e.preventDefault(),r({type:"PREV_MONTH"})},title:"Previous Month",children:"chevron_left"})}),Object(l.jsxs)("div",{className:"col col__center mainViewOptions",children:[Object(l.jsx)("div",{className:"toToday",children:Object(l.jsx)("button",{className:"icon today",onClick:t,title:"Jump to Today",children:"today"})}),Object(l.jsxs)("div",{className:"viewRange",children:[Object(l.jsx)(k.a,{dateFormat:x,selected:n.start,onChange:function(e){return r({type:"SET_RANGE_START",date:e})},customInput:Object(l.jsx)(i,{}),selectsStart:!0,startDate:n.start,endDate:n.end,closeOnScroll:function(e){return e.target===document}})," to ",Object(l.jsx)(k.a,{dateFormat:x,selected:n.end,onChange:function(e){return r({type:"SET_RANGE_END",date:e})},customInput:Object(l.jsx)(i,{}),selectsEnd:!0,startDate:n.start,endDate:n.end,minDate:n.start,monthsShown:2,closeOnScroll:function(e){return e.target===document}})]}),Object(l.jsx)(R,{})]}),Object(l.jsx)("div",{className:"col col__end",children:Object(l.jsx)("button",{className:"icon dateChevron",onClick:function(e){e.preventDefault(),r({type:"NEXT_MONTH"})},title:"Next Month",children:"chevron_right"})})]})}var G=a(12),I=a.n(G),H=a(14),B=a(72),X=a(189),J=Object(c.createContext)({}),V={currentPost:{id:null,post_title:"",post_status:"",post_date:"",unscheduled:null},refetch:!1,dateRange:{start:"",end:""},unscheduled:[],scheduled:[],trashed:[],taxonomies:{},locale:""};function W(e,t){switch(t.type){case"SET_SCHEDULED":var a=t.posts;return a.forEach((function(e,t){a[t].post_date=new Date(e.post_date)})),Object(u.a)(Object(u.a)({},e),{},{dateRange:{start:t.start,end:t.end},scheduled:a});case"SET_UNSCHEDULED":var c=t.posts;return c.forEach((function(e,t){c[t].post_date=new Date(e.post_date)})),Object(u.a)(Object(u.a)({},e),{},{unscheduled:c});case"SET_TAXONOMY_TERMS":return Object(u.a)(Object(u.a)({},e),{},{taxonomies:Object(u.a)(Object(u.a)({},e.taxonomies),{},Object(i.a)({},t.name,{taxonomy:t.taxonomy,terms:t.terms}))});case"SET_CURRENTPOST":return Object(u.a)(Object(u.a)({},e),{},{currentPost:Object(u.a)(Object(u.a)({},t.post),{},{unscheduled:t.unscheduled})});case"REFETCH":return Object(u.a)(Object(u.a)({},e),{},{refetch:!e.refetch});case"NEW_POST":return Object(u.a)(Object(u.a)({},e),{},{currentPost:{id:0,post_date:t.post_date,unscheduled:t.unscheduled,taxonomies:{}}});case"UPDATE_CURRENTPOST_FIELD":return Object(u.a)(Object(u.a)({},e),{},{currentPost:Object(u.a)(Object(u.a)({},e.currentPost),{},Object(i.a)({},t.field,t.value))});case"UNSET_CURRENTPOST":return Object(u.a)(Object(u.a)({},e),{},{currentPost:V.currentPost});default:return e}}var Y=b.routeBase,q={"X-WP-Nonce":b.nonce},z=function(e,t){var a=Object(c.useContext)(J),n=a.posts.refetch,s=a.postsDispatch,r=Object(c.useState)(!1),i=Object(o.a)(r,2),u=i[0],l=i[1];return Object(c.useEffect)((function(){if(null!==e&&null!==t){var a=Object(X.a)(e,p),c=Object(X.a)(t,p),n="".concat(Y,"/posts/scheduled/").concat(a,"/").concat(c);return function(){var e=Object(H.a)(I.a.mark((function e(){var t,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,e.next=4,fetch(n,{headers:q});case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,s({type:"SET_SCHEDULED",posts:a.posts,start:a.dateRange.start,end:a.dateRange.end}),l(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("REST error",e.t0.message),l(!1);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}()(),function(){l(!1)}}}),[e,t,n,s]),u},K=function(e){var t=Object(c.useContext)(J),a=t.posts.taxonomies,n=t.postsDispatch,s=Object(c.useState)(!1),r=Object(o.a)(s,2),i=r[0],u=r[1];return Object(c.useEffect)((function(){if(Object(j.isEmpty)(a[e])){var t="".concat(Y,"/tax/").concat(e);return function(){var a=Object(H.a)(I.a.mark((function a(){var c,s;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return u(!0),a.prev=1,a.next=4,fetch(t,{headers:q});case 4:return c=a.sent,a.next=7,c.json();case 7:s=a.sent,n({type:"SET_TAXONOMY_TERMS",name:e,taxonomy:s.taxonomy,terms:s.terms}),u(!1),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(1),console.log("REST error",a.t0.message),u(!1);case 16:case"end":return a.stop()}}),a,null,[[1,12]])})));return function(){return a.apply(this,arguments)}}()(),function(){u(!1)}}}),[e,a,n]),i},Q=function(e,t){Object(c.useEffect)((function(){var a=!1,c=!1,n=function(n){!a&&c&&e.current&&!e.current.contains(n.target)&&t(n)},s=function(t){c=e.current,a=e.current&&e.current.contains(t.target)};return document.addEventListener("mousedown",s),document.addEventListener("touchstart",s),document.addEventListener("click",n),function(){document.removeEventListener("mousedown",s),document.removeEventListener("touchstart",s),document.removeEventListener("click",n)}}),[e,t])};function Z(e){var t=e.handleTodayClick;!function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),a=t[0],n=t[1],s=Object(c.useContext)(T).viewOptionsDispatch;Object(c.useEffect)((function(){var e="".concat(Y,"/statuses");return function(){var t=Object(H.a)(I.a.mark((function t(){var a,c;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(!0),t.prev=1,t.next=4,fetch(e,{headers:q});case 4:return a=t.sent,t.next=7,a.json();case 7:c=t.sent,s({type:"SET_POST_STATUSES",postStatuses:c}),n(!1),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),console.log("REST error",t.t0.message),n(!1);case 16:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(){return t.apply(this,arguments)}}()(),function(){n(!1)}}),[s])}();var a=b.pluginUrl;return Object(l.jsx)("header",{className:"calendario__header",children:Object(l.jsxs)("div",{className:"calendario__header__content",children:[Object(l.jsx)("div",{className:"left",children:Object(l.jsx)(F,{handleTodayClick:t})}),Object(l.jsxs)("div",{className:"right",children:[Object(l.jsx)("h1",{className:"calendario__title",children:"editorial calendar.io"}),Object(l.jsx)("a",{className:"calendario__logo",href:"https://roundhouse-designs.com",rel:"noreferrer",target:"_blank",children:Object(l.jsx)("img",{src:"".concat(a,"rhd-logo.png"),alt:"Roundhouse Designs logo"})})]})]})})}var $=a(180),ee=a(181),te=Object(c.createContext)(null);function ae(e,t){switch(t.type){case"START":return{post:t.post,isDragging:!0,draggedFrom:t.draggedFrom>=0&&t.draggedFrom};case"DRAGGING_OVER_UNSCHEDULED":return Object(u.a)(Object(u.a)({},e),{},{draggedTo:t.draggedOver,overUnscheduled:!0});case"DRAGGING_OVER_CALENDAR":return Object(u.a)(Object(u.a)({},e),{},{draggedTo:ce.draggedTo,overUnscheduled:!1});case"END":return ce;default:return e}}var ce={post:{},isDragging:!1,draggedFrom:null,draggedTo:null,overUnscheduled:!1},ne=Object(c.forwardRef)((function(e,t){var a=e.day,n=e.monthName,s=e.children,r=Object(c.useState)(!1),i=Object(o.a)(r,2),u=i[0],d=i[1],j=Object(c.useContext)(te).draggedPost,b=j.post.post_date,p=j.isUnscheduled,h=["day","col","cell"],f=function(){!p&&Object(B.a)(a,b)||d(!0)};return Object($.a)(a)&&h.push("today"),Object(ee.a)(a)&&!Object($.a)(a)&&h.push("past"),u&&h.push("dragOver"),Object(l.jsxs)("div",{className:h.join(" "),ref:Object($.a)(a)?t:null,onDragOver:f,onDragLeave:function(){return d(!1)},onDrop:function(){return d(!1)},children:[n?Object(l.jsx)("span",{className:"month",children:n}):"",Object(l.jsx)("span",{className:"number",children:Object(X.a)(a,O)}),s]})})),se={updateNow:!1,trash:!1,params:{},unscheduled:!1};function re(e,t){switch(t.type){case"UPDATE":return{updateNow:!0,params:t.params,unscheduled:t.unscheduled};case"UPDATING":return Object(u.a)(Object(u.a)({},e),{},{updateNow:!1});case"TRASH":return{trash:!0,updateNow:!0,params:t.params};case"COMPLETE":return se;default:return e}}var oe=a(16);function ie(e){var t=e.post,a=e.className,n=e.unscheduled,s=b.routeBase,r=b.user,i=b.nonce,u=b.DEBUG_MODE,d=t.id,j=t.edit_link,O=t.view_link,p=Object(c.useContext)(J).postsDispatch,h=Object(c.useReducer)(re,se),f=Object(o.a)(h,2),v=f[0],m=f[1];Object(c.useEffect)((function(){if(!0===v.updateNow&&"undefined"!==d){m({type:"UPDATING"});var e="".concat(s,"/posts/");!0===v.trash?e+="trash/".concat(d,"/").concat(r):e+="update/".concat(d,"/").concat(r);var t={"Content-Type":"application/json"};!0!==u&&(t["X-WP-Nonce"]=i);var a={unscheduled:v.unscheduled};(function(){var c=Object(H.a)(I.a.mark((function c(){var n;return I.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,fetch(e,{method:"POST",headers:t,body:JSON.stringify(a)});case 3:return n=c.sent,c.next=6,n.json();case 6:m({type:"COMPLETE"}),p({type:"REFETCH"}),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(0),console.log(c.t0.message);case 13:case"end":return c.stop()}}),c,null,[[0,10]])})));return function(){return c.apply(this,arguments)}})()()}}),[d,r,i,s,p,v.trash,v.params,v.updateNow,v.unscheduled,u]);return Object(l.jsxs)("div",{className:"postLinks ".concat(a),children:[Object(l.jsx)("button",{className:"icon top left icon__view",onClick:function(){return window.open(O,"_blank")},target:"_blank",rel:"noreferrer",title:"View Post",children:"open_in_new"}),Object(l.jsx)("button",{className:"icon top right icon__edit",onClick:function(){return window.open(Object(oe.decode)(j),"_blank")},target:"_blank",rel:"noreferrer",title:"Edit Post in a new tab",children:"mode_edit"}),n?Object(l.jsx)("button",{className:"icon icon__schedule bottom right",onClick:function(e){e.preventDefault(),m({type:"UPDATE",params:{},unscheduled:!1})},title:"Schedule this post",children:"event_available"}):Object(l.jsx)("button",{className:"icon icon__unschedule bottom right",onClick:function(e){e.preventDefault(),m({type:"UPDATE",params:{},unscheduled:!0})},title:"Unschedule this post",children:"drafts"}),Object(l.jsx)("button",{className:"icon icon__trash bottom left",onClick:function(){m({type:"TRASH",params:{id:d}})},title:"Trash this post",children:"delete_forever"})]})}function ue(e){var t=e.post,a=e.index,n=e.unscheduled,s=e.allowDrag,r=Object(c.useContext)(J),i=r.posts.currentPost,u=r.postsDispatch,d=Object(c.useContext)(te),b=d.draggedPost,O=b.isDragging,p=b.draggedFrom,h=b.draggedTo,f=d.draggedPostDispatch,v=Object(c.useContext)(T).viewOptions.postStatuses,m=Object(c.useState)(new Date),x=Object(o.a)(m,2),g=x[0],_=x[1],E=Object(c.useState)(""),N=Object(o.a)(E,2),y=N[0],w=N[1];Object(c.useEffect)((function(){return _(new Date(t.post_date)),function(){_(new Date)}}),[t.post_date]),Object(c.useEffect)((function(){if(void 0!==v&&!Object(j.isEmpty)(v))return w(v[t.post_status].color),function(){w("")}}),[t.post_status,v]);var S=function(e){var a=!!e.currentTarget.parentNode.classList.contains("unscheduledDrafts");f({type:"START",post:t,unscheduled:n,draggedFrom:!!a&&Number(e.currentTarget.dataset.index)})},D=function(){return f({type:"END"})},C=function(e){e.target.classList.contains("icon")||u({type:"SET_CURRENTPOST",post:t,unscheduled:n})};return Object(j.isEmpty)(v)?null:function(){var e=["post","post-id-".concat(t.id," status__").concat(t.post_status)];return O&&(h===Number(a)&&(e.push("dropArea"),!1===p?e.push("fromNowhere"):p<h?e.push("fromAbove"):p>h&&e.push("fromBelow")),p===Number(a)&&e.push("dragging")),Object(j.isEmpty)(i)||i.id!==t.id||e.push("currentPost"),Object(l.jsxs)("li",{id:t.id,className:e.join(" "),style:!1===n&&!0===v[t.post_status].visible||!0===n?{visibility:"visible"}:{visibility:"hidden"},"data-index":a,draggable:!0===s||!Object($.a)(g)&&!Object(ee.a)(g),onDragStart:S,onDragEnd:D,onClick:C,children:[Object(l.jsx)(ie,{className:O?"disabled":"active",post:t,unscheduled:n}),Object(l.jsx)("p",{className:"postData",style:{backgroundColor:y},children:Object(oe.decode)(t.post_title,{scope:"strict"})})]})}()}function le(e){var t=e.className;return Object(l.jsx)("div",{className:"loadingOverlay ".concat(t),children:Object(l.jsxs)("div",{className:"roller",children:[Object(l.jsx)("div",{}),Object(l.jsx)("div",{}),Object(l.jsx)("div",{}),Object(l.jsx)("div",{}),Object(l.jsx)("div",{}),Object(l.jsx)("div",{}),Object(l.jsx)("div",{}),Object(l.jsx)("div",{})]})})}var de=a(182),je=a(183),be=a(184),Oe=a(185);function pe(e){var t=e.posts,a=e.className,n=e.allowDrag,s=e.allowDrop,r=e.date,i=e.loadingState,d=b.routeBase,j=b.user,O=b.nonce,p=Object(c.useContext)(J),f=p.posts.currentPost,v=p.postsDispatch,m=Object(c.useContext)(te),x=m.draggedPost,_=x.post,E=x.draggedTo,N=x.draggedFrom,y=x.overUnscheduled,w=m.draggedPostDispatch,T=Object(c.useReducer)(re,se),S=Object(o.a)(T,2),D=S[0],C=S[1],R=Object(c.useState)(!1),P=Object(o.a)(R,2),k=P[0],A=P[1];Object(c.useEffect)((function(){if(void 0!==i&&null!==i)return A(i),function(){A(!1)}}),[i]),Object(c.useEffect)((function(){if(!0===D.updateNow&&"undefined"!==_.id){C({type:"UPDATING"});var e="".concat(d,"/posts/update/").concat(_.id,"/").concat(j),t={"Content-Type":"application/json"};t["X-WP-Nonce"]=O;var a={params:g(D.params,_),unscheduled:D.unscheduled};null!==E&&(a.draggedTo=E),function(){var c=Object(H.a)(I.a.mark((function c(){var n;return I.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return A(!0),c.prev=1,c.next=4,fetch(e,{method:"POST",headers:t,body:JSON.stringify(a)});case 4:return n=c.sent,c.next=7,n.json();case 7:v({type:"REFETCH"}),w({type:"END"}),C({type:"COMPLETE"}),A(!1),c.next=17;break;case 13:c.prev=13,c.t0=c.catch(1),console.log(c.t0.message),A(!1);case 17:case"end":return c.stop()}}),c,null,[[1,13]])})));return function(){return c.apply(this,arguments)}}()()}}),[d,j,O,D,E,w,_,v]);var U=function(e){if(e.preventDefault(),!1!==n&&e.currentTarget.classList.contains("unscheduledDrafts")){var t=Number(e.target.dataset.index);if(N===t)return;var a=!Number.isNaN(t)&&t;if(!1===a){var c=e.currentTarget.getBoundingClientRect(),s=e.clientY-c.top,r=e.currentTarget.childNodes,o=r.length;a=0===r.length||s<r[0].offsetTop?0:s>=r[o-1].offsetTop?o:o-1}a!==E&&null!==E&&w({type:"DRAGGING_OVER_UNSCHEDULED",draggedOver:a})}else!0===y&&w({type:"DRAGGING_OVER_CALENDAR"})},M=function(){var e,t,a;!1!==s&&(!1===r?a=Object(X.a)(_.post_date,h):(e=r,t={h:Object(de.a)(_.post_date),m:Object(je.a)(_.post_date)},e=Object(be.a)(e,t.h),e=Object(Oe.a)(e,t.m),a=Object(X.a)(e,h)),C({type:"UPDATE",params:{post_date:a},unscheduled:y}),f.id===_.id&&v({type:"UPDATE_CURRENTPOST_FIELD",field:"post_date",value:r}))};return function(){var e={className:"postList ".concat(a),onDragOver:U};return!1!==s?e.onDrop=M:e.className+=" dropDisabled",Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(le,{className:k?"active":null}),Object(l.jsx)("ul",Object(u.a)(Object(u.a)({},e),{},{children:t.map((function(e,t){return Object(l.jsx)(ue,{post:e,index:t,unscheduled:!1===r,allowDrag:n},e.id)}))}))]})}()}function he(e){var t=e.day,a=e.unscheduled,n=Object(c.useContext)(J).postsDispatch;return Object(l.jsx)("button",{className:"icon newPost",onClick:function(e){e.preventDefault(),n({type:"NEW_POST",post_date:t||new Date,unscheduled:a||!1})},children:"add_circle"})}function fe(e){var t=e.posts,a=e.date,c=e.allowDrag,n=e.allowDrop,s=e.title,r=e.loadingState,o=function(e,t){var a=[];return e&&e.forEach((function(e){Object(B.a)(t,new Date(e.post_date))&&a.push(e)})),a}(t,a);return function(){var e={className:"dayPosts",date:a,posts:o,allowDrop:!0,loadingState:r};"undefined"!==c&&null!==c&&(e.allowDrag=c),e.allowDrop=!1!==n;var t=Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(he,{day:a,unscheduled:!1}),Object(l.jsx)(pe,Object(u.a)({},e))]});return s?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h4",{className:"title",children:s}),t]}):t}()}var ve=a(186);function me(e){var t=e.className,a=e.todayRef,n=Object(c.useContext)(J),s=n.posts.scheduled,r=n.postsDispatch,o=Object(c.useContext)(T).viewOptions.viewRange;Object(c.useEffect)((function(){r({type:"REFETCH"})}),[r]),z(o.start,o.end);var i=Object(c.useCallback)((function(){for(var e=[],t=Object(E.a)(o.start),a=0;a<7;a++)e.push(Object(l.jsx)("div",{className:"col col__center",children:Object(X.a)(Object(L.a)(t,a),f)},a));return Object(l.jsx)("div",{className:"days row",children:e})}),[o.start]),u=Object(c.useCallback)((function(){for(var e=[],t=[],c=o.start,n=!0;c<=o.end;){for(var r=0;r<7;r++){var i=Object(ve.a)(c)||n;t.push(Object(l.jsx)(ne,{ref:Object($.a)(c)?a:null,day:c,monthName:i?Object(X.a)(c,v):"",children:Object(l.jsx)(fe,{date:c,posts:s,allowDrag:!0,renderEmpty:!0})},c)),n=!1,c=Object(L.a)(c,1)}e.push(Object(l.jsx)("div",{className:"row",children:t},c)),t=[]}return Object(l.jsx)("div",{className:"body",children:e})}),[o.end,o.start,s,a]);return Object(l.jsx)("div",{className:t,children:null!==o.start&&null!==o.end?Object(l.jsxs)("div",{className:"view__calendar__inner",children:[i(),u()]}):null})}var xe=a(187);function ge(e){var t=e.className,a=Object(c.useContext)(J),n=a.posts.scheduled,s=a.postsDispatch,r=Object(c.useContext)(T).viewOptions.viewRange,o=r.start,i=r.end;Object(c.useEffect)((function(){s({type:"REFETCH"})}),[s]),z(o,i);var u=function(){var e=[],t=o,a=["listDay"];if("undefined"!==i&&null!==i)for(;Object(xe.a)(t)<=Object(xe.a)(i);)Object($.a)(t)&&a.push("today"),Object(ee.a)(t)&&!Object($.a)(t)&&a.push("past"),e.push(Object(l.jsx)("li",{className:a.join(" "),children:Object(l.jsx)(fe,{date:t,posts:n,allowDrag:!0,title:Object(X.a)(t,m),newPostButton:!0})},t)),t=Object(L.a)(t,1);return e};return Object(l.jsx)("div",{className:t,children:null!==o&&null!==i?Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("div",{className:"view__list__days",children:Object(l.jsx)("ul",{children:u()})})}):null})}var _e=a(30);function Ee(e){var t=e.name,a=e.label,c=e.inlineLabel,n=e.children;return Object(l.jsxs)("div",{className:"fieldGroup fieldGroup__".concat(t," ").concat(c?"inlineLabel":""),children:[a?Object(l.jsx)("label",{htmlFor:t,children:a}):null,n]})}var Ne=a(188),ye={post:{},editMode:!1};function we(e,t){switch(t.type){case"SET":return{post:t.post,editMode:!0};case"EDIT":var a=t.field,c=t.value;return"post_date"===a&&(c=new Date(c)),Object(u.a)(Object(u.a)({},e),{},{post:Object(u.a)(Object(u.a)({},e.post),{},Object(i.a)({},a,c))});case"TOGGLE_TAXONOMY":var n=parseInt(t.term_id),s=!!e.post.taxonomies.hasOwnProperty(t.taxonomy)&&e.post.taxonomies[t.taxonomy].indexOf(n),r=-1===s?[].concat(Object(_e.a)(e.post.taxonomies[t.taxonomy]),[n]):!1===s?[n]:[].concat(Object(_e.a)(e.post.taxonomies[t.taxonomy].slice(0,s)),Object(_e.a)(e.post.taxonomies[t.taxonomy].slice(s+1)));return Object(u.a)(Object(u.a)({},e),{},{post:Object(u.a)(Object(u.a)({},e.post),{},{taxonomies:Object(u.a)(Object(u.a)({},e.post.taxonomies),{},Object(i.a)({},t.taxonomy,r))})});case"CLEAR":return ye;default:return{state:e}}}function Te(){var e=b.routeBase,t=b.user,a=b.nonce,n=Object(c.useContext)(T).viewOptions.postStatuses,s=Object(c.useContext)(J),r=s.posts,i=r.currentPost,u=r.taxonomies,d=s.postsDispatch,O=Object(c.useContext)(te).draggedPostDispatch,p=Object(c.useReducer)(we,ye),f=Object(o.a)(p,2),v=f[0],m=f[1],x=Object(c.useReducer)(re,se),_=Object(o.a)(x,2),E=_[0],N=_[1],y=Object(c.useRef)(),w=Object(c.useState)(new Date),S=Object(o.a)(w,2),D=S[0],C=S[1],R=Object(c.useState)({}),P=Object(o.a)(R,2),A=P[0],U=P[1],M=Object(c.useState)(!1),L=Object(o.a)(M,2),F=L[0],G=L[1],B=Object(c.useState)(!1),V=Object(o.a)(B,2),W=V[0],Y=V[1],q=v.post,z=v.editMode;Object(c.useEffect)((function(){return q.post_date&&"undefined"!==q.post_date&&C(new Date(q.post_date)),function(){C(new Date)}}),[q.post_date]),Object(c.useEffect)((function(){var e=[];!0===q.unscheduled?e.push("publish","future","pending"):Object(Ne.a)(D)?e.push("publish"):Object(ee.a)(D)&&e.push("future");var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=e;if(t.length>0)for(var c in a)t.includes(c)&&(a=Object(j.omit)(a,c));return a}(n,e);return U(t),function(){U({})}}),[D,q.unscheduled,n]),Object(c.useEffect)((function(){return G(!(!i.post_date||!Object($.a)(i.post_date)&&!Object(ee.a)(i.post_date)||"publish"!==i.post_status)),function(){G(!1)}}),[i.post_date,i.post_status]),Object(c.useEffect)((function(){if(!0===E.updateNow&&"undefined"!==i.id){N({type:"UPDATING"});var c="".concat(e,"/posts/");!0===E.trash?c+="trash/".concat(i.id,"/").concat(t):0===i.id?c+="new/".concat(t):c+="update/".concat(i.id,"/").concat(t);var n={"Content-Type":"application/json"};n["X-WP-Nonce"]=a;var s={params:g(E.params,i),unscheduled:E.unscheduled};(function(){var e=Object(H.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(c,{method:"POST",headers:n,body:JSON.stringify(s)});case 3:return t=e.sent,e.next=6,t.json();case 6:O({type:"END"}),N({type:"COMPLETE"}),d({type:"SET_CURRENTPOST",post:q,unscheduled:q.unscheduled}),d({type:"REFETCH"}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}})()()}}),[i,e,q,t,a,O,d,E.trash,E.params,E.updateNow,E.unscheduled]),Object(c.useEffect)((function(){return(i.id>0||0===i.id)&&m({type:"SET",post:i}),function(){m({type:"CLEAR"})}}),[i.id,i]);var K,Z=Object(c.useCallback)((function(){m({type:"CLEAR"}),d({type:"UNSET_CURRENTPOST"})}),[m,d]),ae=function(e){m({type:"EDIT",field:e.target.name,value:e.target.value})},ce=function(e){m({type:"TOGGLE_TAXONOMY",taxonomy:e.target.name,term_id:e.target.value})};return Q(y,Z),Object(l.jsx)("div",{className:"editPost ".concat(z?"active":"inactive"),children:Object(l.jsx)("div",{className:"editPost__container",children:z?Object(l.jsxs)("div",{ref:y,className:"editPost__editor",children:[Object(l.jsx)("button",{className:"close icon",onClick:Z,children:"highlight_off"}),Object(l.jsxs)("h3",{className:"title",children:[0===q.id?"New":"Edit"," Post"]}),Object(l.jsxs)("form",{className:"editPost__editor__form",onSubmit:function(e){e.preventDefault(),N({type:"UPDATE",params:{post_title:q.post_title,post_date:Object(X.a)(new Date(q.post_date),h),post_status:q.post_status,post_excerpt:q.post_excerpt,taxonomies:q.taxonomies},unscheduled:q.unscheduled}),m({type:"CLEAR"})},children:[Object(l.jsx)(Ee,{name:"post_title",label:"Title",children:Object(l.jsx)("input",{name:"post_title",value:Object(oe.decode)(q.post_title,{scope:"strict"}),onChange:ae})}),Object(l.jsxs)(Ee,{name:"date_status",children:[Object(l.jsxs)("div",{className:"fieldGroup__date",children:[Object(l.jsxs)("div",{className:"post_date ".concat(!0===q.unscheduled?"inactive":"active"),children:[Object(l.jsx)("label",{htmlFor:"post_date",children:"Post Date"}),Object(l.jsx)(k.a,{closeOnScroll:function(e){return e.target===document},selected:D,timeInputLabel:"Time:",showTimeInput:!0,dateFormat:h,onChange:function(e){null===e&&(e=new Date),m({type:"EDIT",field:"post_date",value:e})},disabled:F})]}),Object(l.jsxs)("div",{className:"unscheduled",children:[Object(l.jsx)("input",{type:"checkbox",name:"unscheduled",checked:q.unscheduled,onChange:function(e){m({type:"EDIT",field:e.target.name,value:!q[e.target.name]})}}),Object(l.jsx)("label",{htmlFor:"unscheduled",children:"Unscheduled"})]})]}),Object(l.jsxs)("div",{className:"fieldGroup__status",children:[Object(l.jsx)("label",{htmlFor:"post_status",children:"Post Status"}),Object(l.jsx)("select",{name:"post_status",onChange:ae,value:q.post_status,children:(K=A,Object.keys(K).map((function(e){return Object(l.jsx)("option",{value:e,children:K[e].name},e)})))})]})]}),Object(l.jsxs)(Ee,{name:"taxonomies",children:[Object(l.jsxs)("label",{htmlFor:"category",children:["Categories",Object(l.jsx)("fieldset",{name:"category",children:u.category.terms.map((function(e,t){return Object(l.jsxs)("label",{children:[Object(l.jsx)("input",{type:"checkbox",name:"category",value:e.term_id,onChange:ce,checked:!Object(j.isEmpty)(q.taxonomies)&&!Object(j.isEmpty)(q.taxonomies.category)&&q.taxonomies.category.includes(e.term_id)}),Object(oe.decode)(e.name,{scope:"strict"})]},t)}))})]}),Object(l.jsxs)("label",{htmlFor:"post_tag",children:["Tags",Object(l.jsx)("fieldset",{name:"post_tag",children:u.post_tag.terms.map((function(e,t){return Object(l.jsxs)("label",{children:[Object(l.jsx)("input",{type:"checkbox",name:"post_tag",value:e.term_id,onChange:ce,checked:!Object(j.isEmpty)(q.taxonomies)&&!Object(j.isEmpty)(q.taxonomies.post_tag)&&q.taxonomies.post_tag.includes(e.term_id)}),Object(oe.decode)(e.name,{scope:"strict"})]},t)}))})]})]}),Object(l.jsx)(Ee,{name:"post_excerpt",label:"Excerpt",children:Object(l.jsx)("textarea",{name:"post_excerpt",onChange:ae,rows:4,value:Object(oe.decode)(q.post_excerpt,{scope:"strict"})})}),Object(l.jsx)("div",{className:"post_thumb",children:q.image?Object(l.jsxs)("div",{children:[Object(l.jsx)("span",{children:"Featured Image"}),Object(l.jsx)("a",{href:Object(oe.decode)(q.edit_link),target:"_blank",rel:"noreferrer",children:Object(l.jsx)("img",{src:q.image,alt:"".concat(q.post_title)})})]}):null}),Object(l.jsx)("div",{className:"editPost__buttons",children:!0===W?Object(l.jsxs)("div",{className:"editPost__buttons__trash confirm",children:[Object(l.jsx)("p",{style:{fontWeight:"bold"},children:"Are you sure you want to Trash this post?"}),Object(l.jsx)("input",{type:"button",onClick:function(){N({type:"TRASH",params:{id:q.id}}),m({type:"CLEAR"}),Y(!1)},value:"Yes",autoFocus:!0}),Object(l.jsx)("input",{type:"button",onClick:function(){return Y(!1)},value:"No"})]}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("input",{type:"submit",className:"editPost__buttons__save",value:0===q.id?"Save":"Update"}),Object(l.jsx)("input",{type:"button",className:"editPost__buttons__cancel",onClick:function(){m({type:"CLEAR"}),d({type:"UNSET_CURRENTPOST"})},value:"Cancel"}),Object(l.jsx)("input",{type:"button",className:"editPost__buttons__trash",onClick:function(){return Y(!0)},value:"Delete"})]})})]})]}):null})})}var Se=Object(c.forwardRef)((function(e,t){var a=e.todayRef,n=Object(c.useContext)(T).viewOptions.viewMode;return K("category"),K("post_tag"),Object(l.jsxs)("main",{className:"calendario__main",children:[Object(l.jsx)("div",{className:"view",ref:t,children:"calendar"===n?Object(l.jsx)(me,{className:"view__calendar",todayRef:a}):Object(l.jsx)(ge,{className:"view__list",todayRef:a})}),Object(l.jsx)(Te,{})]})}));function De(){var e=b.blogUrl,t=b.trashUrl,a=function(e){var t=Object(o.a)(e,3),a=t[0],c=t[1],n=t[2];return n=n||"_self",Object(l.jsx)("li",{children:Object(l.jsxs)("a",{rel:"noreferrer",href:a,target:n,children:[c," ",Object(l.jsx)("span",{className:"icon",children:"open_in_new"})]})})};return Object(l.jsxs)("ul",{className:"adminLinks",children:[a([t,"Trash","_blank"]),a([e,"View Posts","_blank"])]})}function Ce(){var e=Object(c.useContext)(J),t=e.posts.unscheduled,a=e.postsDispatch;Object(c.useEffect)((function(){a({type:"REFETCH"})}),[a]);var n=function(){var e=Object(c.useContext)(J),t=e.posts.refetch,a=e.postsDispatch,n=Object(c.useState)(!1),s=Object(o.a)(n,2),r=s[0],i=s[1];return Object(c.useEffect)((function(){var e="".concat(Y,"/posts/unscheduled");return function(){var t=Object(H.a)(I.a.mark((function t(){var c,n;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),t.prev=1,t.next=4,fetch(e,{headers:q});case 4:return c=t.sent,t.next=7,c.json();case 7:n=t.sent,a({type:"SET_UNSCHEDULED",posts:n.posts,unscheduled:!0}),i(!1),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),console.log("REST error",t.t0.message),i(!1);case 16:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(){return t.apply(this,arguments)}}()(),function(){i(!1)}}),[a,t]),r}();return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(pe,{className:"unscheduledDrafts",date:!1,posts:t,allowDrag:!0,loadingState:n}),Object(l.jsx)(he,{unscheduled:!0}),Object(l.jsx)(De,{})]})}var Re=a(73);function Pe(e){var t=e.color,a=e.name,n=b.presetStatusColors,s=Object(c.useRef)(),r=Object(c.useRef)(t),i=Object(c.useContext)(T),u=i.viewOptions.postStatuses,d=i.viewOptionsDispatch,j=Object(c.useState)(""),O=Object(o.a)(j,2),p=O[0],h=O[1],f=Object(c.useState)(!1),v=Object(o.a)(f,2),m=v[0],x=v[1];Object(c.useEffect)((function(){(void 0!==s.current||t)&&h(t)}),[t]),Object(c.useEffect)((function(){void 0!==s.current&&u[a].color!==p&&r.current!==p&&(d({type:"SET_POST_STATUS_COLOR",postStatus:a,color:p}),r.current=p)}),[p,a,u,d]);var g=Object(c.useCallback)((function(){return x(!1)}),[]);return Q(s,g),Object(l.jsxs)("div",{className:"picker",children:[Object(l.jsx)("div",{className:"swatch",style:{backgroundColor:p},onClick:function(){return x(!0)}}),m&&Object(l.jsxs)("div",{className:"popover",ref:s,children:[Object(l.jsx)(Re.a,{color:p,onChange:h,name:a}),Object(l.jsx)("div",{className:"picker__swatches",children:void 0===n?null:n.map((function(e){return Object(l.jsx)("button",{className:"picker__swatch",style:{background:e},onClick:function(){return h(e)}},e)}))})]})]})}function ke(e){var t=e.selected,a=e.toggleSelected,c=e.name;return Object(l.jsx)("div",{className:"toggle",children:Object(l.jsx)("button",{name:c,className:"dialog-button ".concat(t?"":"disabled"),onClick:a,children:t?"ON":"OFF"})})}function Ae(){var e=b.routeBase,t=Object(c.useRef)(!0),a=Object(c.useContext)(T),n=a.viewOptions.postStatuses,s=a.viewOptionsDispatch,r=Object.keys(n);Object(c.useEffect)((function(){if(!Object(j.isEmpty)(n))if(!0!==t.current){var a="".concat(e,"/statuses");(function(){var e=Object(H.a)(I.a.mark((function e(){var t,c,s;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c in t={},n)t[c]=n[c].color;return e.prev=2,e.next=5,fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 5:return s=e.sent,e.next=8,s.json();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}})()()}else t.current=!1}),[t,e,n]);var o=function(e){s({type:"TOGGLE_POST_STATUS",postStatus:e.target.name})};return Object(l.jsxs)("div",{className:"statusFilters",children:[Object(l.jsx)("ul",{className:"filters",children:r.map((function(e,t){var a=n[e],c=a.color,s=a.name;return Object(l.jsxs)("li",{className:"filterItem status__".concat(e),children:[Object(l.jsx)(Pe,{color:c,name:e}),Object(l.jsx)("span",{className:"name",children:s}),Object(l.jsx)(ke,{selected:!!n[e].visible,toggleSelected:o,name:e})]},t)}))}),Object(l.jsx)("button",{className:"reset",onClick:function(){s({type:"RESET_POST_STATUS_COLORS"})},children:"Reset Colors"})]})}function Ue(){var e=b.pluginUrl;return Object(l.jsx)("aside",{className:"calendario__sidebar",children:Object(l.jsxs)("div",{className:"calendario__sidebar__inner",children:[_("Unscheduled Drafts","unscheduledDrafts",Object(l.jsx)(Ce,{})),_("Post Status","statusFilters",Object(l.jsx)(Ae,{})),_("","support",Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("ul",{className:"docs",children:[Object(l.jsx)("li",{children:Object(l.jsx)("a",{href:"https://github.com/gaswirth/rhdwp-calendario",rel:"noreferrer",target:"_blank",children:"Help + Documentation (dummy link)"})}),Object(l.jsx)("li",{children:Object(l.jsx)("a",{href:"https://github.com/gaswirth/rhdwp-calendario",rel:"noreferrer",target:"_blank",children:"Support (dummy link)"})})]}),Object(l.jsx)("a",{className:"rhdLogo",href:"https://roundhouse-designs.com",target:"_blank",rel:"noreferrer",children:Object(l.jsx)("img",{src:"".concat(e,"rhd-logo.png"),alt:"Roundhouse Designs logo"})})]}))]})})}a(170);function Me(){var e=Object(c.useReducer)(W,V),t=Object(o.a)(e,2),a=t[0],n=t[1],s=Object(c.useReducer)(ae,ce),r=Object(o.a)(s,2),i=r[0],u=r[1],d=Object(c.useReducer)(C,S),j=Object(o.a)(d,2),b=j[0],O=j[1],p=function(e,t){var a=Object(c.useState)((function(){var a=window.localStorage.getItem(t);return null!==a?JSON.parse(a):e})),n=Object(o.a)(a,2),s=n[0],r=n[1];return Object(c.useEffect)((function(){window.localStorage.setItem(t,JSON.stringify(s))}),[t,s]),[s,r]}({viewMode:"calendar"},"viewOptions"),h=Object(o.a)(p,2),f=h[0],v=h[1],m=Object(c.useRef)(),x=Object(c.useRef)();return Object(c.useEffect)((function(){O({type:"UPDATE",viewMode:f.viewMode})}),[]),Object(c.useEffect)((function(){v({viewMode:b.viewMode})}),[v,b.viewMode]),Object(l.jsx)("div",{className:"calendario",children:Object(l.jsx)(T.Provider,{value:{viewOptions:b,viewOptionsDispatch:O},children:Object(l.jsxs)(J.Provider,{value:{posts:a,postsDispatch:n},children:[Object(l.jsx)(Z,{handleTodayClick:function(){var e,t,a,c=new Date;e=c,t=b.viewRange.start,a=b.viewRange.end,e.getTime()>=t.getTime()&&e.getTime()<=a.getTime()?x.current.scroll({top:m.current.offsetTop,behavior:"smooth"}):O({type:"SET_RANGE_START",date:c})}}),Object(l.jsxs)(te.Provider,{value:{draggedPost:i,draggedPostDispatch:u},children:[Object(l.jsx)(Ue,{}),Object(l.jsx)(Se,{ref:x,todayRef:m})]})]})})})}var Le,Fe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,190)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),s(e),r(e)}))},Ge=(window.rhdReactPlugin||{}).appSelector;(Le=document.querySelector(Ge))&&r.a.render(Object(l.jsx)(n.a.StrictMode,{children:Object(l.jsx)(Me,{})}),Le),Fe()},78:function(e,t,a){}},[[171,1,2]]]);
//# sourceMappingURL=main.248688db.chunk.js.map