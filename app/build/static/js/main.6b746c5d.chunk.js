(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{134:function(e,t,n){},135:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n(3),c=n.n(s),r=n(28),o=n.n(r),i=(n(67),n(6)),d=n(137),u=n(12);function l(e){var t=e.title,n=e.className,s=e.children;return Object(a.jsxs)("div",{className:"widget ".concat(n),children:[t?Object(a.jsx)("h3",{className:"widgetTitle",children:t}):null,s]})}var j,b,O;j=window.rhdReactPlugin.nonce,b=window.rhdReactPlugin.restBase,O=window.rhdReactPlugin.postStatuses;var p="d",h="yyyy-MM-dd",f="EEEE",v="MMM",m="EEEE,  MMMM dd, yyyy",x="MMMM dd, yyyy";function _(e,t){if(e.length>0)for(var n in e)e[n]===t[n]&&(e=Object(u.omit)(e,n));return e}var g=function(e,t,n){return Object(a.jsx)(l,{title:e,className:"widget__".concat(t),children:n})},N=n(19),E=n(5),w=n(29),D=n(69),y=Object(s.createContext)({});function C(e,t){switch(t.type){case"UPDATE_OPTION":return Object(E.a)(Object(E.a)({},e),{},{viewMode:t.viewMode?t.viewMode:e.viewMode,monthCount:t.monthCount?t.monthCount:e.monthCount});case"SET_RANGE":return Object(E.a)(Object(E.a)({},e),{},{viewRange:{start:t.start,end:t.end}});case"NEXT_MONTH":return Object(E.a)(Object(E.a)({},e),{},{viewRange:{start:Object(w.default)(e.viewRange.start,1),end:Object(w.default)(e.viewRange.end,1)}});case"PREV_MONTH":return Object(E.a)(Object(E.a)({},e),{},{viewRange:{start:Object(D.default)(e.viewRange.start,1),end:Object(D.default)(e.viewRange.end,1)}});case"TOGGLE_STATUS":return console.log(e.statuses),Object(E.a)(Object(E.a)({},e),{},{statuses:Object(E.a)(Object(E.a)({},e.statuses),{},Object(N.a)({},t.status,!e.statuses[t.status]))});default:return e}}var T={};for(var P in O)T[P]=!0;var S={viewMode:"",monthCount:1,viewRange:{start:null,end:null},statuses:T};function R(e){var t=e.start,n=e.end,c=Object(s.useContext)(y).viewOptionsDispatch;return Object(a.jsxs)("div",{className:"calendarListHeader row flex-middle",children:[Object(a.jsx)("div",{className:"col col__start",children:Object(a.jsx)("button",{className:"icon dateChevron",onClick:function(e){e.preventDefault(),c({type:"PREV_MONTH"})},children:"chevron_left"})}),Object(a.jsxs)("div",{className:"col col__center",children:[Object(a.jsx)("h3",{className:"viewTitle",children:"Scheduled Posts"}),Object(a.jsx)("p",{className:"viewRange",children:t&&n?"".concat(Object(d.default)(t,x)," \u2014 ").concat(Object(d.default)(n,x)):null})]}),Object(a.jsx)("div",{className:"col col__end",children:Object(a.jsx)("button",{className:"icon dateChevron",onClick:function(e){e.preventDefault(),c({type:"NEXT_MONTH"})},children:"chevron_right"})})]})}function k(){var e=Object(s.useContext)(y).viewOptions.viewRange,t=e.start,n=e.end;return Object(a.jsx)("header",{className:"calendario__header",children:Object(a.jsxs)("div",{className:"calendario__header__content",children:[Object(a.jsx)("div",{className:"left",children:Object(a.jsx)(R,{start:t,end:n})}),Object(a.jsx)("div",{className:"right",children:Object(a.jsx)("h1",{className:"calendario__title",children:"the editorial calendorial"})})]})})}function U(){var e=Object.keys(O),t=Object(s.useContext)(y),n=t.viewOptions.statuses,c=t.viewOptionsDispatch,r=function(e){c({type:"TOGGLE_STATUS",status:e.target.name})};return Object(a.jsx)("div",{className:"statusFilters",children:Object(a.jsx)("ul",{className:"filters",children:e.map((function(e,t){var s=O[e],c=s.color,o=s.backgroundColor,i=s.name;return Object(a.jsxs)("li",{className:"filterItem status__".concat(e),children:[Object(a.jsx)("button",{className:"dot ".concat(n[e]?"visible":"hidden"),name:e,style:!0===n[e]?{color:c,backgroundColor:o,borderColor:o}:{color:c,borderColor:o},onClick:r}),Object(a.jsx)("span",{className:"name",children:i})]},t)}))})})}function M(e){var t=e.name,n=e.label,s=e.inlineLabel,c=e.children;return Object(a.jsxs)("div",{className:"sidebarInput fieldGroup fieldGroup__".concat(t," ").concat(s?"inlineLabel":""),children:[n?Object(a.jsx)("label",{htmlFor:t,children:n}):null,c]})}var L=n(140),A=n(10),F=n(18),G=n(141);function H(){var e=Object(s.useContext)(y),t=e.viewOptions,n=t.viewMode,c=t.monthCount,r=t.viewRange,o=e.viewOptionsDispatch,i=function(e){o({type:"UPDATE_OPTION",viewMode:e.target.value})};return Object(a.jsxs)("div",{className:"viewOptions",children:[Object(a.jsx)(U,{}),Object(a.jsxs)("div",{className:"dateOptions",children:[Object(a.jsx)("button",{onClick:function(){var e=Object(L.a)();o({type:"SET_RANGE",start:"calendar"===n?Object(A.default)(e):e,end:Object(w.default)(e,c)})},disabled:Object(F.default)(r.start)===Object(L.a)()||Object(G.a)(r.start,Object(L.a)()),children:"Jump to Today"}),Object(a.jsxs)(M,{name:"viewMode",children:[Object(a.jsx)("button",{onClick:i,className:"calendar"===n?"active ":"inactive",value:"calendar",children:"Calendar"}),Object(a.jsx)("button",{name:"viewMode",onClick:i,className:"list"===n?"active ":"inactive",value:"list",children:"List"})]}),Object(a.jsx)(M,{name:"monthCount",label:"Months",inlineLabel:!0,children:Object(a.jsx)("input",{type:"number",min:1,value:c,onChange:function(e){o({type:"UPDATE_OPTION",monthCount:e.target.value})},className:"mini"})})]})]})}var I=n(142),J=n(143);function V(e){e.className;var t=e.day,n=e.monthName,s=e.children,c=["day","col","cell"];return Object(I.a)(t)&&c.push("today"),Object(J.a)(t)&&!Object(I.a)(t)&&c.push("past"),Object(a.jsxs)("div",{className:c.join(" "),children:[n?Object(a.jsx)("span",{className:"month",children:n}):"",Object(a.jsx)("span",{className:"number",children:Object(d.default)(t,p)}),s]})}var B=n(9),W=n.n(B),X=n(15),Y={updateNow:!1,trash:!1,params:{},unscheduled:!1};function q(e,t){switch(t.type){case"UPDATE":return{updateNow:!0,params:t.params,unscheduled:t.unscheduled};case"UPDATING":return Object(E.a)(Object(E.a)({},e),{},{updateNow:!1});case"TRASH":return{trash:!0,updateNow:!0,params:t.params};case"COMPLETE":return Y;default:return e}}var z=Object(s.createContext)({}),K={currentPost:{id:null,post_title:"",post_status:"",post_date:"",unscheduled:null},refetch:!1,dateRange:{start:"",end:""},unscheduled:[],scheduled:[],trashed:[]};function Q(e,t){switch(t.type){case"SET_SCHEDULED":var n=t.posts;return n.forEach((function(e,t){n[t].post_date=new Date(e.post_date)})),Object(E.a)(Object(E.a)({},e),{},{dateRange:{start:t.start,end:t.end},scheduled:n});case"SET_UNSCHEDULED":var a=t.posts;return a.forEach((function(e,t){a[t].post_date=new Date(e.post_date)})),Object(E.a)(Object(E.a)({},e),{},{unscheduled:a});case"SET_TRASHED":var s=t.posts;return s.forEach((function(e,t){s[t].post_date=new Date(e.post_date)})),Object(E.a)(Object(E.a)({},e),{},{trashed:s});case"REFETCH":return Object(E.a)(Object(E.a)({},e),{},{refetch:!e.refetch});case"SET_CURRENTPOST":return Object(E.a)(Object(E.a)({},e),{},{currentPost:Object(E.a)(Object(E.a)({},t.post),{},{unscheduled:t.unscheduled})});case"NEW_POST":return Object(E.a)(Object(E.a)({},e),{},{currentPost:{id:0,post_date:t.post_date,unscheduled:t.unscheduled}});case"UPDATE_CURRENTPOST_FIELD":return Object(E.a)(Object(E.a)({},e),{},{currentPost:Object(E.a)(Object(E.a)({},e.currentPost),{},Object(N.a)({},t.field,t.value))});case"UNSET_CURRENTPOST":return Object(E.a)(Object(E.a)({},e),{},{currentPost:K.currentPost});default:return e}}var Z=n(20);function $(e){var t=e.post,n=e.className,c=e.unscheduled,r=t.id,o=t.edit_link,d=t.view_link,u=Object(s.useContext)(z).postsDispatch,l=Object(s.useReducer)(q,Y),j=Object(i.a)(l,2),O=j[0],p=j[1];Object(s.useEffect)((function(){if(!0===O.updateNow&&"undefined"!==r){p({type:"UPDATING"});var e="".concat(b,"/");!0===O.trash?e+="trash/".concat(r):e+="update/".concat(r);var t={unscheduled:O.unscheduled};(function(){var n=Object(X.a)(W.a.mark((function n(){var a;return W.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return a=n.sent,n.next=6,a.json();case 6:p({type:"COMPLETE"}),u({type:"REFETCH"}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0.message);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(){return n.apply(this,arguments)}})()()}}),[r,u,O.trash,O.params,O.updateNow,O.unscheduled]);return Object(a.jsxs)("div",{className:"postLinks ".concat(n),children:[Object(a.jsx)("a",{className:"icon top left icon__view",href:d,target:"_blank",rel:"noreferrer",title:"View Post",children:"open_in_new"}),Object(a.jsx)("a",{className:"icon top right icon__edit",href:Object(Z.decode)(o),target:"_blank",rel:"noreferrer",title:"Edit Post in a new tab",children:"mode_edit"}),c?Object(a.jsx)("button",{className:"icon icon__schedule bottom right",onClick:function(e){e.preventDefault(),p({type:"UPDATE",params:{},unscheduled:!1})},title:"Schedule this post",children:"event_available"}):Object(a.jsx)("button",{className:"icon icon__unschedule bottom right",onClick:function(e){e.preventDefault(),p({type:"UPDATE",params:{},unscheduled:!0})},title:"Unschedule this post",children:"drafts"}),Object(a.jsx)("button",{className:"icon icon__trash bottom left",onClick:function(){p({type:"TRASH",params:{id:r}})},title:"Trash this post",children:"delete_forever"})]})}var ee=Object(s.createContext)(null);function te(e,t){switch(t.type){case"START":return{post:t.post,isDragging:!0,draggedFrom:t.draggedFrom>=0&&t.draggedFrom};case"DRAGGING_OVER_UNSCHEDULED":return Object(E.a)(Object(E.a)({},e),{},{draggedTo:t.draggedOver,overUnscheduled:!0});case"DRAGGING_OVER_SCHEDULED":return Object(E.a)(Object(E.a)({},e),{},{draggedTo:null,overUnscheduled:!1});case"END":return ne;default:return e}}var ne={post:{},isDragging:!1,draggedFrom:null,draggedTo:null,overUnscheduled:!1};function ae(e){var t=e.post,n=e.index,c=e.unscheduled,r=e.allowDrag,o=Object(s.useContext)(z),d=o.posts.currentPost,l=o.postsDispatch,j=Object(s.useContext)(ee),b=j.draggedPost,p=b.isDragging,h=b.draggedFrom,f=b.draggedTo,v=j.draggedPostDispatch,m=Object(s.useContext)(y).viewOptions.statuses,x=Object(s.useState)({}),_=Object(i.a)(x,2),g=_[0],N=_[1],E=Object(s.useState)(new Date),w=Object(i.a)(E,2),D=w[0],C=w[1],T=Object(s.useState)(!1),P=Object(i.a)(T,2),S=P[0],R=P[1];Object(s.useEffect)((function(){C(new Date(t.post_date))}),[t.post_date]),Object(s.useEffect)((function(){N({color:O[t.post_status].color,backgroundColor:O[t.post_status].backgroundColor})}),[t.post_status]);var k=function(e){var n=!!e.currentTarget.parentNode.classList.contains("unscheduledDrafts");v({type:"START",post:t,draggedFrom:!!n&&Number(e.currentTarget.dataset.index)})},U=function(){return v({type:"END"})},M=function(e){if(!e.target.classList.contains("icon")){var n=!(!e.target.classList.contains("unscheduledDrafts")&&!e.target.parentNode.classList.contains("unscheduledDrafts"));l({type:"SET_CURRENTPOST",post:t,unscheduled:n})}};return t?function(){var e=["post","post-id-".concat(t.id," status__").concat(t.post_status)];return p&&(f===Number(n)&&(e.push("dropArea"),!1===h?e.push("fromNowhere"):h<f?e.push("fromAbove"):h>f&&e.push("fromBelow")),h===Number(n)&&e.push("dragging")),Object(u.isEmpty)(d)||d.id!==t.id||e.push("currentPost"),Object(a.jsxs)("li",{id:t.id,className:e.join(" "),style:!1===c&&!0===m[t.post_status]||!0===c?{visibility:"visible"}:{visibility:"hidden"},"data-index":n,draggable:!0===r||!Object(I.a)(D)&&!Object(J.a)(D),onDragStart:k,onDragEnd:U,onClick:M,onMouseEnter:function(){return R(!0)},onMouseLeave:function(){return R(!1)},children:[Object(a.jsx)($,{className:S&&!p?"visible":"hidden",post:t,unscheduled:c}),Object(a.jsx)("p",{className:"postData",style:{backgroundColor:g.backgroundColor,color:g.color},children:Object(Z.decode)(t.post_title,{scope:"strict"})})]})}():null}function se(e){var t=e.className;return Object(a.jsx)("div",{className:"loadingOverlay ".concat(t),children:Object(a.jsxs)("div",{className:"roller",children:[Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{})]})})}function ce(e){var t=e.posts,n=e.className,c=e.allowDrag,r=e.allowDrop,o=e.date,l=e.loadingState,O=Object(s.useContext)(z),p=O.posts.currentPost,f=O.postsDispatch,v=Object(s.useContext)(ee),m=v.draggedPost,x=m.post,g=m.draggedTo,N=m.draggedFrom,w=m.overUnscheduled,D=v.draggedPostDispatch,y=Object(s.useReducer)(q,Y),C=Object(i.a)(y,2),T=C[0],P=C[1],S=Object(s.useState)(!1),R=Object(i.a)(S,2),k=R[0],U=R[1];Object(s.useEffect)((function(){if(void 0!==l&&null!==l)return U(l),function(){U(!1)}}),[l]),Object(s.useEffect)((function(){if(!0===T.updateNow&&"undefined"!==x.id){P({type:"UPDATING"});var e="".concat(b,"/update/").concat(x.id),t={params:_(T.params,x),unscheduled:T.unscheduled};if(null!==g&&(t.draggedTo=g),Object(u.isEmpty)(t))return{data:"Update not necessary.",error:!0};var n={"Content-Type":"application/json"};n["X-WP-Nonce"]=j,function(){var a=Object(X.a)(W.a.mark((function a(){var s;return W.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return U(!0),a.prev=1,a.next=4,fetch(e,{method:"POST",headers:n,body:JSON.stringify(t)});case 4:return s=a.sent,a.next=7,s.json();case 7:f({type:"REFETCH"}),D({type:"END"}),P({type:"COMPLETE"}),U(!1),a.next=17;break;case 13:a.prev=13,a.t0=a.catch(1),console.log(a.t0.message),U(!1);case 17:case"end":return a.stop()}}),a,null,[[1,13]])})));return function(){return a.apply(this,arguments)}}()()}}),[T,g,D,x,f]);var M=function(e){if(e.preventDefault(),!1!==c)if(e.currentTarget.classList.contains("unscheduledDrafts")){var t=Number(e.target.dataset.index),n=!1;if(N===t)return;if((n=!Number.isNaN(t)&&t)!==g){if(!1===n){var a=e.currentTarget.getBoundingClientRect(),s=e.clientY-a.top,r=e.currentTarget.childNodes,o=r.length;n=0===r.length||s<r[0].offsetTop?0:s>=r[o-1].offsetTop?o:o-1}D({type:"DRAGGING_OVER_UNSCHEDULED",draggedOver:n})}}else!0===w&&D({type:"DRAGGING_OVER_SCHEDULED"})},L=function(){!1!==r&&(P({type:"UPDATE",params:{post_date:!1===o?Object(d.default)(x.post_date,h):Object(d.default)(o,h)},unscheduled:w}),p.id===x.id&&f({type:"UPDATE_CURRENTPOST_FIELD",field:"post_date",value:o}))};return function(){var e={className:"postList ".concat(n),onDragOver:M};return!1!==r?e.onDrop=L:e.className+=" dropDisabled",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(se,{className:k?"active":null}),Object(a.jsx)("ul",Object(E.a)(Object(E.a)({},e),{},{children:t.map((function(e,t){return Object(a.jsx)(ae,{post:e,index:t,unscheduled:!1===o,allowDrag:c},e.id)}))}))]})}()}function re(e){var t=e.day,n=e.unscheduled,c=Object(s.useContext)(z).postsDispatch;return Object(a.jsx)("button",{className:"icon newPost",onClick:function(e){e.preventDefault(),c({type:"NEW_POST",post_date:t||new Date,unscheduled:n||!1})},children:"add_circle"})}var oe=n(41),ie=function(e,t){var n=Object(s.useContext)(z).postsDispatch,a=Object(s.useState)(!1),c=Object(i.a)(a,2),r=c[0],o=c[1];return Object(s.useEffect)((function(){if(null!==e&&null!==t){var a=Object(d.default)(e,h),s=Object(d.default)(t,h),c="".concat(b,"/scheduled/").concat(a,"/").concat(s),r={};return r["X-WP-Nonce"]=j,function(){var e=Object(X.a)(W.a.mark((function e(){var t,a;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,e.next=4,fetch(c,{headers:r});case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,n({type:"SET_SCHEDULED",posts:a.posts,start:a.dateRange.start,end:a.dateRange.end}),o(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("REST error",e.t0.message),o(!1);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}()(),function(){o(!1)}}}),[e,t,n]),r};function de(e){var t=e.posts,n=e.date,s=e.allowDrag,c=e.allowDrop,r=e.title,o=e.loadingState,i=function(e,t){var n=[];return e&&e.forEach((function(e){Object(oe.default)(t,new Date(e.post_date))&&n.push(e)})),n}(t,n);return function(){var e={className:"dayPosts",date:n,posts:i,allowDrop:!0,loadingState:o};"undefined"!==s&&null!==s&&(e.allowDrag=s),e.allowDrop=!1!==c;var t=Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(re,{day:n,unscheduled:!1}),Object(a.jsx)(ce,Object(E.a)({},e))]});return r?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h4",{className:"title",children:r}),t]}):t}()}var ue=n(74),le=n(30),je=n(144);function be(e){var t=e.className,n=Object(s.useContext)(z),c=n.posts,r=c.scheduled,o=c.refetch,i=n.postsDispatch,u=Object(s.useContext)(y),l=u.viewOptions,j=l.monthCount,b=l.viewRange,O=u.viewOptionsDispatch;Object(s.useEffect)((function(){i({type:"REFETCH"})}),[i]),Object(s.useEffect)((function(){var e=Object(L.a)();O({type:"SET_RANGE",start:Object(A.default)(e),end:Object(ue.default)(Object(w.default)(e,j))})}),[o,j,O]),ie(b.start,b.end);var p=Object(s.useCallback)((function(){for(var e=[],t=Object(A.default)(b.start),n=0;n<7;n++)e.push(Object(a.jsx)("div",{className:"col col__center",children:Object(d.default)(Object(le.default)(t,n),f)},n));return Object(a.jsx)("div",{className:"days row",children:e})}),[b.start]),h=Object(s.useCallback)((function(){for(var e=[],t=[],n=b.start,s=!0;n<=b.end;){for(var c=0;c<7;c++){var o=Object(je.a)(n)||s;t.push(Object(a.jsx)(V,{day:n,monthName:o?Object(d.default)(n,v):"",children:Object(a.jsx)(de,{date:n,posts:r,allowDrag:!0,renderEmpty:!0})},n)),s=!1,n=Object(le.default)(n,1)}e.push(Object(a.jsx)("div",{className:"row",children:t},n)),t=[]}return Object(a.jsx)("div",{className:"body",children:e})}),[b.end,b.start,r]);return Object(a.jsx)("div",{className:t,children:null!==b.start&&null!==b.end?Object(a.jsxs)("div",{className:"view__calendar__inner",children:[p(),h()]}):null})}var Oe=n(75);function pe(e){var t=e.className,n=Object(s.useContext)(z),c=n.posts,r=c.scheduled,o=c.refetch,i=n.postsDispatch,u=Object(s.useContext)(y),l=u.viewOptions,j=l.monthCount,b=l.viewRange,O=u.viewOptionsDispatch;Object(s.useEffect)((function(){i({type:"REFETCH"})}),[i]),Object(s.useEffect)((function(){var e=Object(L.a)();O({type:"SET_RANGE",start:e,end:Object(w.default)(e,j)})}),[o,j,O]),ie(b.start,b.end);var p=function(){var e=[],t=b.start,n=["listDay"];if("undefined"!==b.end&&null!==b.end)for(;Object(Oe.default)(t)<=Object(Oe.default)(b.end);)Object(I.a)(t)&&n.push("today"),Object(J.a)(t)&&!Object(I.a)(t)&&n.push("past"),e.push(Object(a.jsx)("li",{className:n.join(" "),children:Object(a.jsx)(de,{date:t,posts:r,allowDrag:!0,title:Object(d.default)(t,m),newPostButton:!0})},t)),t=Object(le.default)(t,1);return e};return Object(a.jsx)("div",{className:t,children:null!==b.start&&null!==b.end?Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:"view__list__days",children:Object(a.jsx)("ul",{children:p()})})}):null})}var he=n(59),fe=n.n(he),ve=n(145),me=(n(76),{post:{},editMode:!1});function xe(e,t){switch(t.type){case"SET":return{post:t.post,editMode:!0};case"EDIT":var n=t.field,a=t.value;return"post_date"===n&&(a=new Date(a)),Object(E.a)(Object(E.a)({},e),{},{post:Object(E.a)(Object(E.a)({},e.post),{},Object(N.a)({},n,a))});case"DATE_CHANGE":return Object(E.a)(Object(E.a)({},e),{},{post:Object(E.a)(Object(E.a)({},e.post),{},{post_date:t.newDate})});case"CLEAR":return me;default:return{state:e}}}function _e(){var e=Object(s.useContext)(z),t=e.posts.currentPost,n=e.postsDispatch,c=Object(s.useContext)(ee).draggedPostDispatch,r=Object(s.useReducer)(xe,me),o=Object(i.a)(r,2),l=o[0],j=o[1],p=Object(s.useReducer)(q,Y),f=Object(i.a)(p,2),v=f[0],m=f[1],x=Object(s.useRef)(),g=Object(s.useState)(new Date),N=Object(i.a)(g,2),E=N[0],w=N[1],D=Object(s.useState)({}),y=Object(i.a)(D,2),C=y[0],T=y[1],P=Object(s.useState)(!1),S=Object(i.a)(P,2),R=S[0],k=S[1],U=Object(s.useState)(!1),L=Object(i.a)(U,2),A=L[0],F=L[1],G=l.post,H=l.editMode;Object(s.useEffect)((function(){return G.post_date&&"undefined"!==G.post_date&&w(new Date(G.post_date)),function(){w(new Date)}}),[G.post_date]),Object(s.useEffect)((function(){var e=[];!0===G.unscheduled?e.push("publish","future","pending"):Object(ve.a)(E)?e.push("publish"):Object(J.a)(E)&&e.push("future");var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=O;if(e.length>0)for(var n in O)e.includes(n)&&(t=Object(u.omit)(t,n));return t}(e);T(t)}),[E,G.unscheduled]),Object(s.useEffect)((function(){k(!(!t.post_date||!Object(I.a)(t.post_date)&&!Object(J.a)(t.post_date)||"publish"!==t.post_status))}),[t.post_date,t.post_status]),Object(s.useEffect)((function(){if(!0===v.updateNow&&"undefined"!==t.id){m({type:"UPDATING"});var e="".concat(b,"/");!0===v.trash?e+="trash/".concat(t.id):0===t.id?e+="new":e+="update/".concat(t.id);var a={params:_(v.params,t),unscheduled:v.unscheduled};if(Object(u.isEmpty)(a.params))return{data:"Update not necessary.",error:!0};(function(){var t=Object(X.a)(W.a.mark((function t(){var s;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 3:return s=t.sent,t.next=6,s.json();case 6:c({type:"END"}),m({type:"COMPLETE"}),n({type:"SET_CURRENTPOST",post:G,unscheduled:G.unscheduled}),n({type:"REFETCH"}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0.message);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}})()()}}),[t,G,c,n,v.trash,v.params,v.updateNow,v.unscheduled]),Object(s.useEffect)((function(){(t.id>0||0===t.id)&&j({type:"SET",post:t})}),[t.id,t]);var V=Object(s.useCallback)((function(){j({type:"CLEAR"}),n({type:"UNSET_CURRENTPOST"})}),[j,n]);Object(s.useEffect)((function(){var e=function(e){x.current&&x.current.contains(e.target)||V()};return Object(u.isEmpty)(t)?document.removeEventListener("mousedown",e):document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[t,n,V]);var B,K=function(e){j({type:"EDIT",field:e.target.name,value:e.target.value})};return H?Object(a.jsx)("div",{className:"editPost",children:Object(a.jsx)("div",{className:"editPost__container",children:Object(a.jsxs)("div",{ref:x,className:"editPost__editor",children:[Object(a.jsx)("button",{className:"close icon",onClick:V,children:"highlight_off"}),Object(a.jsxs)("h3",{className:"title",children:[0===G.id?"New":"Edit"," Post"]}),Object(a.jsxs)("form",{className:"editPost__editor__form",onSubmit:function(e){e.preventDefault(),m({type:"UPDATE",params:{post_title:G.post_title,post_date:Object(d.default)(new Date(G.post_date),h),post_status:G.post_status,post_excerpt:G.post_excerpt},unscheduled:G.unscheduled}),j({type:"CLEAR"})},children:[Object(a.jsx)(M,{name:"post_title",label:"Title",children:Object(a.jsx)("input",{name:"post_title",value:Object(Z.decode)(G.post_title,{scope:"strict"}),onChange:K})}),Object(a.jsxs)(M,{name:"date",children:[Object(a.jsxs)("div",{className:"fieldGroup__field post_date ".concat(!0===G.unscheduled?"inactive":"active"),children:[Object(a.jsx)("label",{htmlFor:"post_date",children:"Post Date"}),Object(a.jsx)(fe.a,{closeOnScroll:function(e){return e.target===document},selected:E,onChange:function(e){null===e&&(e=new Date),j({type:"EDIT",field:"post_date",value:e})},disabled:R})]}),Object(a.jsxs)("div",{className:"fieldGroup__field unscheduled",children:[Object(a.jsx)("input",{type:"checkbox",name:"unscheduled",checked:G.unscheduled,onChange:function(e){j({type:"EDIT",field:e.target.name,value:!G[e.target.name]})}}),Object(a.jsx)("label",{htmlFor:"unscheduled",children:"Unscheduled"})]})]}),Object(a.jsx)(M,{name:"post_status",label:"Status",children:Object(a.jsx)("select",{name:"post_status",onChange:K,value:G.post_status,children:(B=C,Object.keys(B).map((function(e){return Object(a.jsx)("option",{value:e,children:B[e].name},e)})))})}),Object(a.jsx)(M,{name:"taxonomies",label:"Categories & Tags",children:Object(a.jsx)("p",{children:"Coming soon"})}),Object(a.jsx)(M,{name:"post_excerpt",label:"Excerpt",children:Object(a.jsx)("textarea",{name:"post_excerpt",onChange:K,rows:4,value:Object(Z.decode)(G.post_excerpt,{scope:"strict"})})}),Object(a.jsx)("div",{className:"post_thumb",children:G.image?Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{children:"Featured Image"}),Object(a.jsx)("a",{href:Object(Z.decode)(G.edit_link),target:"_blank",rel:"noreferrer",children:Object(a.jsx)("img",{src:G.image,alt:"".concat(G.post_title)})})]}):null}),Object(a.jsx)("div",{className:"editPost__buttons",children:!0===A?Object(a.jsxs)("div",{className:"editPost__buttons__trash confirm",children:[Object(a.jsx)("p",{style:{fontWeight:"bold"},children:"Are you sure you want to Trash this post?"}),Object(a.jsx)("input",{type:"button",onClick:function(){m({type:"TRASH",params:{id:G.id}}),j({type:"CLEAR"}),F(!1)},value:"Yes",autoFocus:!0}),Object(a.jsx)("input",{type:"button",onClick:function(){return F(!1)},value:"No"})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{type:"submit",className:"editPost__buttons__save",value:0===G.id?"Save":"Update"}),Object(a.jsx)("input",{type:"button",className:"editPost__buttons__cancel",onClick:function(){return j({type:"CLEAR"})},value:"Cancel"}),Object(a.jsx)("input",{type:"button",className:"editPost__buttons__trash",onClick:function(){return F(!0)},value:"Delete"})]})})]})]})})}):null}function ge(){var e=Object(s.useContext)(y).viewOptions.viewMode;return Object(a.jsxs)("main",{className:"calendario__main",children:[Object(a.jsxs)("div",{className:"view",children:[Object(a.jsx)(H,{className:"view__options"}),"calendar"===e?Object(a.jsx)(be,{className:"view__calendar"}):Object(a.jsx)(pe,{className:"view__list"})]}),Object(a.jsx)(_e,{})]})}function Ne(){var e=Object(s.useContext)(z),t=e.posts.unscheduled,n=e.postsDispatch;Object(s.useEffect)((function(){n({type:"REFETCH"})}),[n]);var c=function(){var e=Object(s.useContext)(z),t=e.posts.refetch,n=e.postsDispatch,a=Object(s.useState)(!1),c=Object(i.a)(a,2),r=c[0],o=c[1];return Object(s.useEffect)((function(){var e="".concat(b,"/unscheduled"),t={};return t["X-WP-Nonce"]=j,function(){var a=Object(X.a)(W.a.mark((function a(){var s,c;return W.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o(!0),a.prev=1,a.next=4,fetch(e,{headers:t});case 4:return s=a.sent,a.next=7,s.json();case 7:c=a.sent,n({type:"SET_UNSCHEDULED",posts:c.posts,unscheduled:!0}),o(!1),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(1),console.log("REST error",a.t0.message),o(!1);case 16:case"end":return a.stop()}}),a,null,[[1,12]])})));return function(){return a.apply(this,arguments)}}()(),function(){o(!1)}}),[n,t]),r}();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ce,{className:"unscheduledDrafts",date:!1,posts:t,allowDrag:!0,loadingState:c}),Object(a.jsx)(re,{unscheduled:!0})]})}function Ee(){return Object(a.jsx)("aside",{className:"calendario__sidebar",children:Object(a.jsxs)("div",{className:"calendario__sidebar__inner",children:[g("Unscheduled Drafts","unscheduledDrafts",Object(a.jsx)(Ne,{})),g("","viewOptions noBorder",Object(a.jsx)(H,{})),g("Dev Links + Info","dev",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("ul",{style:{marginLeft:0,paddingLeft:"24px",listStylePosition:"outside"},children:[Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"https://github.com/gaswirth/rhdwp-calendario#readme",target:"_blank",rel:"noreferrer",children:"TODO/Readme"})}),Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"https://github.com/gaswirth/rhdwp-calendario/issues",target:"_blank",rel:"noreferrer",children:"Report an issue"})}),Object(a.jsxs)("li",{children:["GitHub:"," ",Object(a.jsx)("a",{href:"https://github.com/gaswirth/rhdwp-calendario",target:"_blank",rel:"noreferrer",children:"gaswirth/rhdwp-calendario"})]})]}),Object(a.jsx)("p",{style:{fontSize:"0.7em"},children:Object(a.jsx)("a",{href:"https://roundhouse-designs.com",target:"_blank",rel:"noreferrer",children:"Roundhouse Designs"})})]}))]})})}n(134);function we(){var e=Object(s.useReducer)(Q,K),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(s.useReducer)(te,ne),o=Object(i.a)(r,2),d=o[0],u=o[1],l=Object(s.useReducer)(C,S),j=Object(i.a)(l,2),b=j[0],O=j[1],p=function(e,t){var n=Object(s.useState)((function(){var n=window.localStorage.getItem(t);return null!==n?JSON.parse(n):e})),a=Object(i.a)(n,2),c=a[0],r=a[1];return Object(s.useEffect)((function(){window.localStorage.setItem(t,JSON.stringify(c))}),[t,c]),[c,r]}({viewMode:"calendar",monthCount:1},"viewOptions"),h=Object(i.a)(p,2),f=h[0],v=h[1];return Object(s.useEffect)((function(){O({type:"UPDATE_OPTION",monthCount:f.monthCount,viewMode:f.viewMode})}),[]),Object(s.useEffect)((function(){v({viewMode:b.viewMode,monthCount:b.monthCount})}),[v,b.viewMode,b.monthCount]),Object(a.jsx)("div",{className:"calendario",children:Object(a.jsx)(s.Profiler,{id:"Main",onRender:function(e,t,n,a,s,c,r){},children:Object(a.jsx)(y.Provider,{value:{viewOptions:b,viewOptionsDispatch:O},children:Object(a.jsxs)(z.Provider,{value:{posts:n,postsDispatch:c},children:[Object(a.jsx)(k,{}),Object(a.jsxs)(ee.Provider,{value:{draggedPost:d,draggedPostDispatch:u},children:[Object(a.jsx)(ge,{}),Object(a.jsx)(Ee,{})]})]})})})})}var De,ye=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,146)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),c(e),r(e)}))},Ce=(window.rhdReactPlugin||{}).appSelector;(De=document.querySelector(Ce))&&o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(we,{})}),De),ye()},67:function(e,t,n){}},[[135,1,2]]]);
//# sourceMappingURL=main.6b746c5d.chunk.js.map